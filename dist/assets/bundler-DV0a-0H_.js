const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/concat-hex-CnVKMvRX.js","assets/main-hS3tnEYq.js","assets/wScoge-BthgsBuw.js","assets/wScoge-CUf-lIoi.css","assets/main-CU5_KOYG.css","assets/resolveImplementation-Ch6rgDfE.js","assets/extractIPFS-CWTaWkWU.js","assets/getInstalledModules-DnAcbhWG.js","assets/eth_estimateGas-CTs1FFFR.js","assets/send-eip712-transaction-CjkzrfEU.js","assets/eth_sendRawTransaction-DPdnXbFR.js","assets/eth_getTransactionCount-moPnBCTy.js"])))=>i.map(i=>d[i]);
import{bT as x,c5 as ge,c6 as he,c7 as be,c8 as Pe,bg as xe,c9 as X,ca as we,cb as J,cc as F,cd as Ae,ce as L,cf as C,cg as q,ch as ee,ci as ve,cj as $,ck as Ie,cl as Ge,cm as D,bE as _e,cn as b,co as M,cp as H,cq as Fe,cr as te,cs as ne,ct as Ee,cu as Te,cv as S,cw as Be,br as Oe,be as P,bF as N,bC as R,bL as Se,bX as Ue,bH as re,bh as Ce,bV as De,bo as G,cx as j,c1 as Ne,bZ as Re,cy as Le,cz as E,cA as ae,bG as $e,bR as Me,bj as V,bS as se,cB as He}from"./main-hS3tnEYq.js";async function je(e){const t=await e({method:"eth_gasPrice"});return x(t)}function Ve(e){const t=[],n=e.length;for(let r=0;r<n;r++){const a=e[r],s=ge(a);t.push(s)}return t}function ke(e){const t=he(e),n=[],r=e.length;for(let a=0;a<r;a++){const s=e[a];be(s)||n.push(Pe(s,t))}return n}class We extends xe{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const T=X;function Ze(e){const{abi:t,args:n=[],name:r}=e,a=we(r,{strict:!1}),s=t.filter(o=>a?o.type==="function"?J(o)===r:o.type==="event"?T(o)===r:!1:"name"in o&&o.name===r);if(s.length===0)return;if(s.length===1)return s[0];let i;for(const o of s){if(!("inputs"in o))continue;if(!n||n.length===0){if(!o.inputs||o.inputs.length===0)return o;continue}if(!o.inputs||o.inputs.length===0||o.inputs.length!==n.length)continue;if(n.every((c,l)=>{const p="inputs"in o&&o.inputs[l];return p?U(c,p):!1})){if(i&&"inputs"in i&&i.inputs){const c=ie(o.inputs,i.inputs,n);if(c)throw new Ae({abiItem:o,type:c[0]},{abiItem:i,type:c[1]})}i=o}}return i||s[0]}function U(e,t){const n=typeof e,r=t.type;switch(r){case"address":return F(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((a,s)=>U(Object.values(e)[s],a)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(a=>U(a,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function ie(e,t,n){for(const r in e){const a=e[r],s=t[r];if(a.type==="tuple"&&s.type==="tuple"&&"components"in a&&"components"in s)return ie(a.components,s.components,n[r]);const i=[a.type,s.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?F(n[r],{strict:!1}):i.includes("address")&&i.includes("bytes")?F(n[r],{strict:!1}):!1)return i}}const k="/docs/contract/encodeEventTopics";function ze(e){var u;const{abi:t,eventName:n,args:r}=e;let a=t[0];if(n){const c=Ze({abi:t,name:n});if(!c)throw new L(n,{docsPath:k});a=c}if(a.type!=="event")throw new L(void 0,{docsPath:k});const s=C(a),i=T(s);let o=[];if(r&&"inputs"in a){const c=(u=a.inputs)==null?void 0:u.filter(p=>"indexed"in p&&p.indexed),l=Array.isArray(r)?r:Object.values(r).length>0?(c==null?void 0:c.map(p=>r[p.name]))??[]:[];l.length>0&&(o=(c==null?void 0:c.map((p,f)=>Array.isArray(l[f])?l[f].map((w,h)=>W({param:p,value:l[f][h]})):typeof l[f]<"u"&&l[f]!==null?W({param:p,value:l[f]}):null))??[])}return[i,...o]}function W({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return q(ee(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new We(e.type);return ve([e],[t])}const Ye={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Ke={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function oe(e){const{abi:t,data:n}=e,r=$(n,0,4);if(r==="0x")throw new Ie;const s=[...t||[],Ye,Ke].find(i=>i.type==="error"&&r===J(C(i)));if(!s)throw new Ge(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?D(s.inputs,$(n,4)):void 0,errorName:s.name}}const Qe={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Xe(e){const t={};return typeof e.authorizationList<"u"&&(t.authorizationList=Je(e.authorizationList)),typeof e.accessList<"u"&&(t.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(t.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?t.blobs=e.blobs.map(n=>_e(n)):t.blobs=e.blobs),typeof e.data<"u"&&(t.data=e.data),typeof e.from<"u"&&(t.from=e.from),typeof e.gas<"u"&&(t.gas=b(e.gas)),typeof e.gasPrice<"u"&&(t.gasPrice=b(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=b(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=b(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=b(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=b(e.nonce)),typeof e.to<"u"&&(t.to=e.to),typeof e.type<"u"&&(t.type=Qe[e.type]),typeof e.value<"u"&&(t.value=b(e.value)),t}function Je(e){return e.map(t=>({address:t.address,r:t.r?b(BigInt(t.r)):t.r,s:t.s?b(BigInt(t.s)):t.s,chainId:b(t.chainId),nonce:b(t.nonce),...typeof t.yParity<"u"?{yParity:b(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:b(t.v)}:{}}))}const qe={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function et(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?M(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?M(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?qe[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=tt(e.authorizationList)),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}function tt(e){return e.map(t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function nt(e){const t=(e.transactions??[]).map(n=>typeof n=="string"?n:et(n));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}function rt(e,t){if(!F(e,{strict:!1}))throw new H({address:e});if(!F(t,{strict:!1}))throw new H({address:t});return e.toLowerCase()===t.toLowerCase()}const Z="/docs/contract/decodeEventLog";function at(e){const{abi:t,data:n,strict:r,topics:a}=e,s=r??!0,[i,...o]=a;if(!i)throw new Fe({docsPath:Z});const u=t.length===1?t[0]:t.find(d=>d.type==="event"&&i===T(C(d)));if(!(u&&"name"in u)||u.type!=="event")throw new te(i,{docsPath:Z});const{name:c,inputs:l}=u,p=l==null?void 0:l.some(d=>!("name"in d&&d.name));let f=p?[]:{};const w=l.filter(d=>"indexed"in d&&d.indexed);for(let d=0;d<w.length;d++){const y=w[d],v=o[d];if(!v)throw new ne({abiItem:u,param:y});f[p?d:y.name||d]=st({param:y,value:v})}const h=l.filter(d=>!("indexed"in d&&d.indexed));if(h.length>0){if(n&&n!=="0x")try{const d=D(h,n);if(d)if(p)f=[...f,...d];else for(let y=0;y<h.length;y++)f[h[y].name]=d[y]}catch(d){if(s)throw d instanceof Ee||d instanceof Te?new S({abiItem:u,data:n,params:h,size:Be(n)}):d}else if(s)throw new S({abiItem:u,data:"0x",params:h,size:0})}return{eventName:c,args:Object.values(f).length>0?f:void 0}}function st({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(D([e],t)||[])[0]}function it(e){const{abi:t,args:n,logs:r,strict:a=!0}=e,s=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(i=>{var o;try{const u=t.find(l=>l.type==="event"&&i.topics[0]===T(l));if(!u)return null;const c=at({...i,abi:[u],strict:a});return s&&!s.includes(c.eventName)||!ot({args:c.args,inputs:u.inputs,matchArgs:n})?null:{...c,...i}}catch(u){let c,l;if(u instanceof te)return null;if(u instanceof S||u instanceof ne){if(a)return null;c=u.abiItem.name,l=(o=u.abiItem.inputs)==null?void 0:o.some(p=>!("name"in p&&p.name))}return{...i,args:l?[]:{},eventName:c}}}).filter(Boolean)}function ot(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function a(s,i,o){try{return s.type==="address"?rt(i,o):s.type==="string"||s.type==="bytes"?q(ee(i))===o:i===o}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((s,i)=>{if(s==null)return!0;const o=n[i];return o?(Array.isArray(s)?s:[s]).some(c=>a(o,c,t[i])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([s,i])=>{if(i==null)return!0;const o=n.find(c=>c.name===s);return o?(Array.isArray(i)?i:[i]).some(c=>a(o,c,t[s])):!1}):!1}function ct(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}async function ut(e,t){const n=t.blockTag??"latest",r=t.includeTransactions??!1,a=t.blockNumber!==void 0?Oe(t.blockNumber):void 0,s=await e({method:"eth_getBlockByNumber",params:[a||n,r]});if(!s)throw new Error("Block not found");return nt(s)}async function dt(e){const t=await e({method:"eth_maxPriorityFeePerGas"});return x(t)}const B=new WeakMap;async function ce(e){if(B.has(e))return B.get(e);const t=(async()=>{const[n,r,{concatHex:a}]=await Promise.all([ue(e),de(e),P(()=>import("./concat-hex-CnVKMvRX.js"),__vite__mapDeps([0,1,2,3,4]))]);return r?a([n,r]):n})();return B.set(e,t),t}async function ue(e){if(e.data===void 0)return"0x";if(typeof e.data=="function"){const t=await e.data();return t||"0x"}return e.data}async function de(e){if(e.extraCallData){if(typeof e.extraCallData=="function"){const t=await e.extraCallData();if(!t)return;if(!t.startsWith("0x"))throw Error("Invalid extra calldata - must be a hex string");return t==="0x"?void 0:t}if(!e.extraCallData.startsWith("0x"))throw Error("Invalid extra calldata - must be a hex string");return e.extraCallData}}const ft=Object.freeze(Object.defineProperty({__proto__:null,encode:ce,getDataFromTx:ue,getExtraCallDataFromTx:de},Symbol.toStringTag,{value:"Module"}));async function g(e){return typeof e=="function"?await e():e}function fe(e,t){let[n,r=""]=e.split(".");const a=n.startsWith("-")?"-":"";if(a&&(n=n.slice(1)),r=r.padEnd(t,"0"),t===0)r[0]&&Number.parseInt(r[0])>=5&&(n=(BigInt(n)+1n).toString()),r="";else if(r.length>t){const s=r[t];s&&Number.parseInt(s,10)>=5?(r=(BigInt(r.substring(0,t))+1n).toString().padStart(t,"0"),r.length>t&&(n=(BigInt(n)+1n).toString(),r=r.substring(r.length-t))):r=r.substring(0,t)}return BigInt(`${a}${n}${r}`)}function Xt(e){return fe(e,18)}async function z(e){const{client:t,chain:n,percentMultiplier:r}=e,a=N({client:t,chain:n}),s=await je(a),i=r?s/BigInt(100)*BigInt(r):0n;return s+i}function _(e){if(e===0n||(e&e-1n)===0n)return e;let t=1n;for(;e>0n;)e>>=1n,t<<=1n;return t}const lt=[78600,2040,248,9372,841,842,2016,9768,2442,1942999413,1952959480,994873017,19011,40875,1511670449,5464,2020,2021];async function pt(e){var i;const[t,n,r,a]=await Promise.all([g(e.maxFeePerGas),g(e.maxPriorityFeePerGas),g(e.gasPrice),g(e.type)]);if(t!==void 0&&n!==void 0)return{maxFeePerGas:t,maxPriorityFeePerGas:n};if(typeof r=="bigint")return{gasPrice:r};const s=await yt(e.client,e.chain,a==="legacy"?"legacy":"eip1559");return(i=e.chain.experimental)!=null&&i.increaseZeroByteCount?s.gasPrice?{gasPrice:_(s.gasPrice)}:{maxFeePerGas:t??_(s.maxFeePerGas??0n),maxPriorityFeePerGas:n??_(s.maxPriorityFeePerGas??0n)}:s.gasPrice!==void 0?s:{maxFeePerGas:t??s.maxFeePerGas,maxPriorityFeePerGas:n??s.maxPriorityFeePerGas}}async function yt(e,t,n){if((n??t.feeType)==="legacy"||lt.includes(t.id))return{gasPrice:await z({client:e,chain:t,percentMultiplier:10})};const a=await mt(e,t);return a.maxFeePerGas!==null&&a.maxPriorityFeePerGas!==null?{maxFeePerGas:a.maxFeePerGas,maxPriorityFeePerGas:a.maxPriorityFeePerGas}:{gasPrice:await z({client:e,chain:t,percentMultiplier:10})}}async function mt(e,t,n=10){let r=null,a=null;const s=N({client:e,chain:t}),[i,o]=await Promise.all([ut(s,{blockTag:"latest"}),dt(s).catch(()=>null)]),u=i==null?void 0:i.baseFeePerGas,c=t.id;return c===220||c===1220?{maxFeePerGas:null,maxPriorityFeePerGas:null}:(c===80002||c===137?a=await Pt(c):o!==null&&(a=o),a==null||u==null?{maxFeePerGas:null,maxPriorityFeePerGas:null}:(a=gt(a,n),r=u*2n+a,(c===42220||c===44787||c===62320)&&(a=r),{maxFeePerGas:r,maxPriorityFeePerGas:a}))}function gt(e,t=10){const n=e/BigInt(100)*BigInt(t);return e+n}function ht(e){switch(e){case 137:return"https://gasstation.polygon.technology/v2";case 80002:return"https://gasstation-testnet.polygon.technology/v2"}}const bt=31n;async function Pt(e){const t=ht(e);try{const r=(await(await fetch(t)).json()).fast.maxPriorityFee;if(r>0){const a=Number.parseFloat(r).toFixed(9);return fe(a,9)}}catch(n){console.error("failed to fetch gas",n)}return bt}const xt=ct({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0}),wt="https://{clientId}.ipfscdn.io/ipfs/{cid}";function At(e){var t,n;if(e.uri.startsWith("ipfs://")){const r=((n=(t=e.client.config)==null?void 0:t.storage)==null?void 0:n.gatewayUrl)??wt,a=e.client.clientId,s=vt(e.uri);let i;return typeof globalThis<"u"&&"Application"in globalThis&&(i=globalThis.Application.applicationId),`${r.replace("{clientId}",a).split("/ipfs")[0]}/ipfs/${s}${i?`?bundleId=${i}`:""}`}if(e.uri.startsWith("http"))return e.uri;throw new Error('Invalid URI scheme, expected "ipfs://" or "http(s)://"')}function vt(e){if(!e.startsWith("ipfs://"))return e;const t=e.search(/\/(Qm|baf)/i);return e.slice(t+1)}async function It(e){var r,a,s,i,o,u,c,l,p;let t;if(e.uri.startsWith("ar://")){const{resolveArweaveScheme:f}=await P(async()=>{const{resolveArweaveScheme:w}=await import("./arweave-CAGvOb64.js");return{resolveArweaveScheme:w}},[]);t=f(e)}else t=At(e);const n=await R(e.client)(t,{keepalive:(s=(a=(r=e.client.config)==null?void 0:r.storage)==null?void 0:a.fetch)==null?void 0:s.keepalive,headers:(u=(o=(i=e.client.config)==null?void 0:i.storage)==null?void 0:o.fetch)==null?void 0:u.headers,requestTimeoutMs:e.requestTimeoutMs??((p=(l=(c=e.client.config)==null?void 0:c.storage)==null?void 0:l.fetch)==null?void 0:p.requestTimeoutMs)??6e4});if(!n.ok){const f=await n.text();throw new Error(`Failed to download file: ${n.status} ${n.statusText} ${f||""}`)}return n}function Gt(e,t="https://contract.thirdweb.com/abi"){return Se(async()=>{if(e.abi)return e.abi;if(e.chain.id===31337||e.chain.id===1337||e.chain.id===xt.id)return await Y(e);try{return await _t(e,t)}catch{return await Y(e)}},{cacheKey:`${e.chain.id}-${e.address}`,cacheTime:1e3*60*60*1})}async function _t(e,t="https://contract.thirdweb.com/abi"){const r=await(await R(e.client)(`${t}/${e.chain.id}/${e.address}`)).json();if(!r||r.error)throw new Error(`Failed to resolve ABI from contract API. ${r.error||""}`);return r}async function le(e){const[{resolveImplementation:t},{extractIPFSUri:n}]=await Promise.all([P(()=>import("./resolveImplementation-Ch6rgDfE.js"),__vite__mapDeps([5,1,2,3,4])),P(()=>import("./extractIPFS-CWTaWkWU.js"),__vite__mapDeps([6,1,2,3,4]))]),{bytecode:r}=await t(e);if(r==="0x"){const{id:s,name:i}=e.chain;throw new Error(`Failed to load contract bytecode. Make sure the contract [${e.address}] exists on the chain [${i||"Unknown Chain"} (chain id: ${s})]`)}const a=n(r);if(!a)return[];try{return(await(await It({uri:a,client:e.client})).json()).output.abi}catch{return[]}}const Ft={inputs:[],name:"getAllPlugins",outputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin[]",name:"registered",type:"tuple[]"}],stateMutability:"view",type:"function"},Et={inputs:[],name:"getAllExtensions",outputs:[{components:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"address",name:"implementation",type:"address"}],internalType:"struct IExtension.ExtensionMetadata",name:"metadata",type:"tuple"},{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"}],internalType:"struct IExtension.ExtensionFunction[]",name:"functions",type:"tuple[]"}],internalType:"struct IExtension.Extension[]",name:"allExtensions",type:"tuple[]"}],stateMutability:"view",type:"function"},Tt={inputs:[],name:"facets",outputs:[{components:[{internalType:"address",name:"facetAddress",type:"address"},{internalType:"bytes4[]",name:"functionSelectors",type:"bytes4[]"}],type:"tuple[]"}],stateMutability:"view",type:"function"};async function Y(e,t,n){const[r,a,s,i,o]=await Promise.all([le(e),Bt(e),Ot(e),St(e),Ut(e)]),u=[...new Set([...a,...s,...i,...o])];if(!u.length)return r;const c=await Ct({contract:e,plugins:u,resolveSubAbi:n});return Dt({rootAbi:r,pluginAbis:c})}async function Bt(e){try{const{readContract:t}=await P(async()=>{const{readContract:r}=await import("./main-hS3tnEYq.js").then(a=>a.dd);return{readContract:r}},__vite__mapDeps([1,2,3,4])),n=await t({contract:e,method:Ft});return n.length?[...new Set(n.map(r=>r.pluginAddress))]:[]}catch{}return[]}async function Ot(e){try{const{readContract:t}=await P(async()=>{const{readContract:r}=await import("./main-hS3tnEYq.js").then(a=>a.dd);return{readContract:r}},__vite__mapDeps([1,2,3,4])),n=await t({contract:e,method:Et});return n.length?[...new Set(n.map(r=>r.metadata.implementation))]:[]}catch{}return[]}async function St(e){try{const{getInstalledModules:t}=await P(async()=>{const{getInstalledModules:r}=await import("./getInstalledModules-DnAcbhWG.js");return{getInstalledModules:r}},__vite__mapDeps([7,1,2,3,4])),n=await t({contract:e});return n.length?[...new Set(n.map(r=>r.implementation))]:[]}catch{}return[]}async function Ut(e){try{const{readContract:t}=await P(async()=>{const{readContract:r}=await import("./main-hS3tnEYq.js").then(a=>a.dd);return{readContract:r}},__vite__mapDeps([1,2,3,4])),n=await t({contract:e,method:Tt});return n.length?n.map(r=>r.facetAddress):[]}catch{}return[]}async function Ct(e){return Promise.all(e.plugins.map(t=>{const n=Ue({...e.contract,address:t});return e.resolveSubAbi?e.resolveSubAbi(n):le(n)}))}function Dt(e){let t=e.pluginAbis.flat().filter(r=>r.type!=="constructor");e.rootAbi&&(t=[...e.rootAbi,...t].filter(r=>r.type!=="fallback"&&r.type!=="receive").filter(Boolean));const n=[...new Set(Ve(t))];return ke(n)}async function K(e){const{error:t,contract:n}=e,r=await Nt({error:t,contract:n});return r?new Rt(r,n):t}async function Nt(e){const{error:t,contract:n}=e;if(typeof t=="object"){const r=t;if(r.data&&r.data!=="0x"&&re(r.data)){let a=n==null?void 0:n.abi;n&&!a&&(a=await Gt(n).catch(()=>{}));const s=oe({data:r.data,abi:a});return`${s.errorName}${s.args?` - ${s.args}`:""}`}}return`Execution Reverted: ${Ce(t)}`}class Rt extends Error{constructor(t,n){var a;let r=t;super(r),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chainId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TransactionError",this.contractAddress=n==null?void 0:n.address,this.chainId=(a=n==null?void 0:n.chain)==null?void 0:a.id,this.message=r}}const O=new WeakMap;async function Lt(e){var s,i;const t=typeof e.from=="string"?e.from??void 0:((s=e.from)==null?void 0:s.address)??((i=e.account)==null?void 0:i.address),n={...e.transaction,from:t};if(O.has(n))return O.get(n);const{account:r}=e,a=(async()=>{var y,v;const o=await g(e.transaction.gas);if(o!==void 0)return o;if(r!=null&&r.estimateGas)try{let m=await r.estimateGas(e.transaction);return(y=e.transaction.chain.experimental)!=null&&y.increaseZeroByteCount&&(m=_(m)),m}catch(m){throw await K({error:m,contract:e.transaction.__contract})}const{encode:u}=await P(async()=>{const{encode:m}=await Promise.resolve().then(()=>ft);return{encode:m}},void 0),[c,l,p,f]=await Promise.all([u(e.transaction),g(e.transaction.to),g(e.transaction.value),g(e.transaction.authorizationList)]),[{getRpcClient:w},{eth_estimateGas:h}]=await Promise.all([P(()=>import("./main-hS3tnEYq.js").then(m=>m.dc),__vite__mapDeps([1,2,3,4])),P(()=>import("./eth_estimateGas-CTs1FFFR.js"),__vite__mapDeps([8,1,2,3,4]))]),d=w(e.transaction);try{let m=await h(d,Xe({to:l?G(l):void 0,data:c,from:t?G(t):void 0,value:p,authorizationList:f==null?void 0:f.map(I=>({...I,r:j(I.r),s:j(I.s),nonce:Number(I.nonce),contractAddress:G(I.address)})),...f&&(f==null?void 0:f.length)>0?{gas:jt(De(c),BigInt((f==null?void 0:f.length)??0))+100000n}:{}}));return(v=e.transaction.chain.experimental)!=null&&v.increaseZeroByteCount&&(m=_(m)),m}catch(m){throw await K({error:m,contract:e.transaction.__contract})}})();return O.set(n,a),a}const Q=21000n,$t=10n,Mt=4n,Ht=12500n;function jt(e,t=0n){let n=0n;for(const o of e)o!==0&&n++;const r=BigInt(e.length)-n,a=n*Mt+r,s=Q+a*$t,i=Q+t*Ht;return s>i?s:i}async function Jt(e){if(await Ne(e.transaction.chain)){const{getZkGasFees:d}=await P(async()=>{const{getZkGasFees:I}=await import("./send-eip712-transaction-CjkzrfEU.js").then(me=>me.a);return{getZkGasFees:I}},__vite__mapDeps([9,10,1,2,3,4,0])),{gas:y,maxFeePerGas:v,maxPriorityFeePerGas:m}=await d({transaction:e.transaction,from:typeof e.from=="string"?G(e.from):e.from!==void 0?G(e.from.address):void 0});e.transaction={...e.transaction,gas:y,maxFeePerGas:v,maxPriorityFeePerGas:m}}const n=N(e.transaction),r=e.transaction.chain.id,a=e.from;let[s,i,o,u,c,l,p,f,w]=await Promise.all([ce(e.transaction),(async()=>{const d=await g(e.transaction.nonce);return d!==void 0?d:a?await P(async()=>{const{eth_getTransactionCount:y}=await import("./eth_getTransactionCount-moPnBCTy.js");return{eth_getTransactionCount:y}},__vite__mapDeps([11,1,2,3,4])).then(({eth_getTransactionCount:y})=>y(n,{address:typeof a=="string"?G(a):G(a.address),blockTag:"pending"})):void 0})(),Lt({...e,from:e.from}),pt(e.transaction),g(e.transaction.to),g(e.transaction.accessList),g(e.transaction.value),g(e.transaction.authorizationList),g(e.transaction.type)]);const h=await g(e.transaction.extraGas);return h&&(o+=h),{to:c,chainId:r,data:s,gas:o,nonce:i,accessList:l,value:p,authorizationList:f,type:w,...u}}function Vt(e,t){return t&&(e.__preparedMethod=t.preparedMethod,e.__contract=t.contract),e}function qt(e){const{contract:t,method:n,params:r,...a}=e,s=()=>(async()=>{var i,o;if(Array.isArray(n))return n;if(Le(n))return E(n);if(typeof n=="function")return E(await n(t));if(typeof n=="string"&&n.startsWith("function ")){const u=ae(n);if(u.type==="function")return E(u);throw new Error('"method" passed is not of type "function"')}if(t.abi&&((i=t.abi)==null?void 0:i.length)>0){const u=(o=t.abi)==null?void 0:o.find(c=>c.type==="function"&&c.name===n);if(u)return E(u)}throw new Error(`Could not resolve method "${n}".`)})();return Vt({...a,to:t.address,chain:t.chain,client:t.client,data:async()=>{let i;return Array.isArray(n)?i=n:i=await s(),i[1].length===0?i[0]:i[0]+Re(i[1],await g(r??[])).slice(2)}},{preparedMethod:s,contract:t})}function kt(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="event")}function pe(e){const{signature:t}=e;let n;return kt(t)?n=t:n=ae(t),{abiEvent:n,hash:X(n),topics:ze({abi:[n],args:e.filters})}}function Wt(e){const{logs:t,events:n,strict:r}=e;return it({logs:t,abi:n.map(a=>a.abiEvent),strict:r})}function en(e){let t;return()=>(t||(t=e()),t)}function Zt(e={}){return pe({signature:"event UserOperationRevertReason(bytes32 indexed userOpHash, address indexed sender, uint256 nonce, bytes revertReason)",filters:e})}function zt(e={}){return pe({signature:"event PostOpRevertReason(bytes32 indexed userOpHash, address indexed sender, uint256 nonce, bytes revertReason)",filters:e})}function Yt(e){const{receipt:t}=e,n={...t,transactionHash:t.transactionHash,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs,to:t.to?t.to:null,transactionIndex:t.transactionIndex,status:t.status,type:t.type};return t.blobGasPrice&&(n.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(n.blobGasUsed=BigInt(t.blobGasUsed)),{...e,receipt:n,userOpHash:e.userOpHash,actualGasCost:BigInt(e.actualGasCost),actualGasUsed:BigInt(e.actualGasUsed),nonce:BigInt(e.nonce)}}const tn=()=>{const e=BigInt(Math.floor(Math.random()*4294967296)),t=BigInt(Math.floor(Math.random()*4294967296)),n=BigInt(Math.floor(Math.random()*4294967296)),r=BigInt(Math.floor(Math.random()*4294967296)),a=BigInt(Math.floor(Math.random()*4294967296)),s=BigInt(Math.floor(Math.random()*4294967296));return e<<BigInt(160)|t<<BigInt(128)|n<<BigInt(96)|r<<BigInt(64)|a<<BigInt(32)|s};function ye(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,n==null||re(n)?n:$e(n)]))}async function nn(e){return A({...e,operation:"eth_sendUserOperation",params:[ye(e.userOp),e.options.entrypointAddress??se]})}async function rn(e,t){const n=await A({...e,operation:"eth_estimateUserOperationGas",params:[ye(e.userOp),e.options.entrypointAddress??se,t??{}]});return{preVerificationGas:x(n.preVerificationGas),verificationGas:n.verificationGas!==void 0?x(n.verificationGas):void 0,verificationGasLimit:x(n.verificationGasLimit),callGasLimit:x(n.callGasLimit)+He,paymasterVerificationGasLimit:n.paymasterVerificationGasLimit!==void 0?x(n.paymasterVerificationGasLimit):void 0,paymasterPostOpGasLimit:n.paymasterPostOpGasLimit!==void 0?x(n.paymasterPostOpGasLimit):void 0}}async function an(e){const t=await A({...e,operation:"thirdweb_getUserOperationGasPrice",params:[]});return{maxPriorityFeePerGas:x(t.maxPriorityFeePerGas),maxFeePerGas:x(t.maxFeePerGas)}}async function sn(e){var n,r;const t=await Kt(e);if(t){if(t.success===!1){const s=(r=(n=Wt({events:[Zt(),zt()],logs:t.logs})[0])==null?void 0:n.args)==null?void 0:r.revertReason;if(!s)throw new Error(`UserOp failed at txHash: ${t.receipt.transactionHash}`);const i=oe({data:s});throw new Error(`UserOp failed with reason: '${i.args.join(",")}' at txHash: ${t.receipt.transactionHash}`)}return t.receipt}}async function Kt(e){const t=await A({options:e,operation:"eth_getUserOperationReceipt",params:[e.userOpHash]});if(t)return Yt(t)}async function on(e){const t=await A({options:e.options,operation:"zk_paymasterData",params:[e.transaction]});return{paymaster:t.paymaster,paymasterInput:t.paymasterInput}}async function cn(e){return{transactionId:(await A({...e,operation:"tw_execute",params:[e.eoaAddress,e.wrappedCalls,e.signature,e.authorization]})).queueId}}async function un(e){return{transactionHash:(await A({...e,operation:"tw_getTransactionHash",params:[e.transactionId]})).transactionHash}}async function dn(e){return{transactionHash:(await A({options:e.options,operation:"zk_broadcastTransaction",params:[{...e.transaction,signedTransaction:e.signedTransaction}]})).transactionHash}}async function A(e){const{options:t,operation:n,params:r}=e,a=t.bundlerUrl??Me(t.chain),i=await R(t.client)(a,{method:"POST",headers:{"Content-Type":"application/json"},body:V({jsonrpc:"2.0",id:1,method:n,params:r})}),o=await i.json();if(!i.ok||o.error){let u=o.error||i.statusText;typeof u=="object"&&(u=V(u));const c=o.code||"UNKNOWN";throw new Error(`${n} error: ${u}
Status: ${i.status}
Code: ${c}`)}return o.result}export{fe as a,Xt as b,an as c,yt as d,ce as e,tn as f,sn as g,ye as h,rn as i,on as j,dn as k,nn as l,cn as m,un as n,en as o,qt as p,ke as q,g as r,qe as s,Jt as t};
