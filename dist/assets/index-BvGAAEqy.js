const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/resolveImplementation-DKT10vio.js","assets/main-CjiS4ifE.js","assets/wScoge-BthgsBuw.js","assets/wScoge-CUf-lIoi.css","assets/main-CU5_KOYG.css","assets/extractIPFS-BaFs0eZv.js","assets/getInstalledModules-DudD39g5.js","assets/eth_estimateGas-vX9ABOt0.js","assets/eth_getTransactionCount-BnBGT2o8.js","assets/send-gasless-transaction-Bnl5lowF.js","assets/random-Db2hH_qc.js","assets/decimals-DnNLhJxl.js","assets/signing-D24nz3yp.js"])))=>i.map(i=>d[i]);
import{bH as v,bI as Pt,bJ as bt,bK as wt,bL as xt,be as M,bM as De,bN as Se,bO as Be,bP as R,bQ as At,bR as be,bS as ce,bT as Ue,bU as B,bV as Gt,bW as we,bX as vt,bY as Tt,bZ as de,b_ as _t,bA as Ce,b$ as $e,c0 as T,c1 as xe,aF as Ft,c2 as O,c3 as Ae,c4 as It,c5 as Ne,c6 as Re,c7 as Et,c8 as Lt,c9 as ne,ca as Ot,bp as Dt,bB as V,bc as A,by as q,cb as Me,cc as I,bD as Q,bf as St,bm as F,cd as Ge,ce as Ve,cf as Bt,cg as j,ch as He,ci as ke,cj as Ut,bu as je,ck as S,bv as Ct,cl as ze,cm as D,bC as G,cn as H,co as ue,cp as L,bh as W,cq as le,cr as $t,cs as Nt,ct as Rt,cu as Mt,cv as We,cw as Ke,cx as Vt,cy as Ht,bq as kt,bj as z,bw as K}from"./main-CjiS4ifE.js";import{r as jt,e as zt}from"./random-Db2hH_qc.js";const Ze="0x0000000000000000000000000000000000000000";async function Wt(e){const t=await e({method:"eth_gasPrice"});return v(t)}function Kt(e){const t=[],n=e.length;for(let a=0;a<n;a++){const r=e[a],s=Pt(r);t.push(s)}return t}function Zt(e){const t=bt(e),n=[],a=e.length;for(let r=0;r<a;r++){const s=e[r];wt(s)||n.push(xt(s,t))}return n}class Yt extends M{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const J=De;function qt(e){const{abi:t,args:n=[],name:a}=e,r=Se(a,{strict:!1}),s=t.filter(o=>r?o.type==="function"?Be(o)===a:o.type==="event"?J(o)===a:!1:"name"in o&&o.name===a);if(s.length===0)return;if(s.length===1)return s[0];let i;for(const o of s){if(!("inputs"in o))continue;if(!n||n.length===0){if(!o.inputs||o.inputs.length===0)return o;continue}if(!o.inputs||o.inputs.length===0||o.inputs.length!==n.length)continue;if(n.every((d,l)=>{const y="inputs"in o&&o.inputs[l];return y?ae(d,y):!1})){if(i&&"inputs"in i&&i.inputs){const d=Ye(o.inputs,i.inputs,n);if(d)throw new At({abiItem:o,type:d[0]},{abiItem:i,type:d[1]})}i=o}}return i||s[0]}function ae(e,t){const n=typeof e,a=t.type;switch(a){case"address":return R(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return a==="tuple"&&"components"in t?Object.values(t.components).every((r,s)=>ae(Object.values(e)[s],r)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(a)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(a)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(a)?Array.isArray(e)&&e.every(r=>ae(r,{...t,type:a.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Ye(e,t,n){for(const a in e){const r=e[a],s=t[a];if(r.type==="tuple"&&s.type==="tuple"&&"components"in r&&"components"in s)return Ye(r.components,s.components,n[a]);const i=[r.type,s.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?R(n[a],{strict:!1}):i.includes("address")&&i.includes("bytes")?R(n[a],{strict:!1}):!1)return i}}const ve="/docs/contract/encodeEventTopics";function Qt(e){var c;const{abi:t,eventName:n,args:a}=e;let r=t[0];if(n){const d=qt({abi:t,name:n});if(!d)throw new be(n,{docsPath:ve});r=d}if(r.type!=="event")throw new be(void 0,{docsPath:ve});const s=ce(r),i=J(s);let o=[];if(a&&"inputs"in r){const d=(c=r.inputs)==null?void 0:c.filter(y=>"indexed"in y&&y.indexed),l=Array.isArray(a)?a:Object.values(a).length>0?(d==null?void 0:d.map(y=>a[y.name]))??[]:[];l.length>0&&(o=(d==null?void 0:d.map((y,u)=>Array.isArray(l[u])?l[u].map((P,g)=>Te({param:y,value:l[u][g]})):typeof l[u]<"u"&&l[u]!==null?Te({param:y,value:l[u]}):null))??[])}return[i,...o]}function Te({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return Ue(B(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new Yt(e.type);return Gt([e],[t])}const Jt={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Xt={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function qe(e){const{abi:t,data:n}=e,a=we(n,0,4);if(a==="0x")throw new vt;const s=[...t||[],Jt,Xt].find(i=>i.type==="error"&&a===Be(ce(i)));if(!s)throw new Tt(a,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?de(s.inputs,we(n,4)):void 0,errorName:s.name}}function en(e,t="hex"){const n=Qe(e),a=_t(new Uint8Array(n.length));return n.encode(a),t==="hex"?Ce(a.bytes):a.bytes}function Qe(e){return Array.isArray(e)?tn(e.map(t=>Qe(t))):nn(e)}function tn(e){const t=e.reduce((r,s)=>r+s.length,0),n=Je(t);return{length:t<=55?1+t:1+n+t,encode(r){t<=55?r.pushByte(192+t):(r.pushByte(247+n),n===1?r.pushUint8(t):n===2?r.pushUint16(t):n===3?r.pushUint24(t):r.pushUint32(t));for(const{encode:s}of e)s(r)}}}function nn(e){const t=typeof e=="string"?$e(e):e,n=Je(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(r){t.length===1&&t[0]<128?r.pushBytes(t):t.length<=55?(r.pushByte(128+t.length),r.pushBytes(t)):(r.pushByte(183+n),n===1?r.pushUint8(t.length):n===2?r.pushUint16(t.length):n===3?r.pushUint24(t.length):r.pushUint32(t.length),r.pushBytes(t))}}}function Je(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new M("Length is too large.")}const an={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function rn(e){const t={};return typeof e.authorizationList<"u"&&(t.authorizationList=sn(e.authorizationList)),typeof e.accessList<"u"&&(t.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(t.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?t.blobs=e.blobs.map(n=>Ce(n)):t.blobs=e.blobs),typeof e.data<"u"&&(t.data=e.data),typeof e.from<"u"&&(t.from=e.from),typeof e.gas<"u"&&(t.gas=T(e.gas)),typeof e.gasPrice<"u"&&(t.gasPrice=T(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=T(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=T(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=T(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=T(e.nonce)),typeof e.to<"u"&&(t.to=e.to),typeof e.type<"u"&&(t.type=an[e.type]),typeof e.value<"u"&&(t.value=T(e.value)),t}function sn(e){return e.map(t=>({address:t.contractAddress,r:t.r,s:t.s,chainId:T(t.chainId),nonce:T(t.nonce),...typeof t.yParity<"u"?{yParity:T(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:T(t.v)}:{}}))}const on=2n**16n-1n,cn={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function dn(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?xe(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?xe(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?cn[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=un(e.authorizationList)),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}function un(e){return e.map(t=>({contractAddress:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function ln(e){const t=(e.transactions??[]).map(n=>typeof n=="string"?n:dn(n));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}function mn(e,t){const n=Ft(Se(e,{strict:!1})?B(e):e);return O(n)}function yn(e,t){if(!R(e,{strict:!1}))throw new Ae({address:e});if(!R(t,{strict:!1}))throw new Ae({address:t});return e.toLowerCase()===t.toLowerCase()}const _e="/docs/contract/decodeEventLog";function pn(e){const{abi:t,data:n,strict:a,topics:r}=e,s=a??!0,[i,...o]=r;if(!i)throw new It({docsPath:_e});const c=t.length===1?t[0]:t.find(p=>p.type==="event"&&i===J(ce(p)));if(!(c&&"name"in c)||c.type!=="event")throw new Ne(i,{docsPath:_e});const{name:d,inputs:l}=c,y=l==null?void 0:l.some(p=>!("name"in p&&p.name));let u=y?[]:{};const P=l.filter(p=>"indexed"in p&&p.indexed);for(let p=0;p<P.length;p++){const b=P[p],h=o[p];if(!h)throw new Re({abiItem:c,param:b});u[y?p:b.name||p]=fn({param:b,value:h})}const g=l.filter(p=>!("indexed"in p&&p.indexed));if(g.length>0){if(n&&n!=="0x")try{const p=de(g,n);if(p)if(y)u=[...u,...p];else for(let b=0;b<g.length;b++)u[g[b].name]=p[b]}catch(p){if(s)throw p instanceof Et||p instanceof Lt?new ne({abiItem:c,data:n,params:g,size:Ot(n)}):p}else if(s)throw new ne({abiItem:c,data:"0x",params:g,size:0})}return{eventName:d,args:Object.values(u).length>0?u:void 0}}function fn({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(de([e],t)||[])[0]}function gn(e){const{abi:t,args:n,logs:a,strict:r=!0}=e,s=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return a.map(i=>{var o;try{const c=t.find(l=>l.type==="event"&&i.topics[0]===J(l));if(!c)return null;const d=pn({...i,abi:[c],strict:r});return s&&!s.includes(d.eventName)||!hn({args:d.args,inputs:c.inputs,matchArgs:n})?null:{...d,...i}}catch(c){let d,l;if(c instanceof Ne)return null;if(c instanceof ne||c instanceof Re){if(r)return null;d=c.abiItem.name,l=(o=c.abiItem.inputs)==null?void 0:o.some(y=>!("name"in y&&y.name))}return{...i,args:l?[]:{},eventName:d}}}).filter(Boolean)}function hn(e){const{args:t,inputs:n,matchArgs:a}=e;if(!a)return!0;if(!t)return!1;function r(s,i,o){try{return s.type==="address"?yn(i,o):s.type==="string"||s.type==="bytes"?Ue(B(i))===o:i===o}catch{return!1}}return Array.isArray(t)&&Array.isArray(a)?a.every((s,i)=>{if(s==null)return!0;const o=n[i];return o?(Array.isArray(s)?s:[s]).some(d=>r(o,d,t[i])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof a=="object"&&!Array.isArray(a)?Object.entries(a).every(([s,i])=>{if(i==null)return!0;const o=n.find(d=>d.name===s);return o?(Array.isArray(i)?i:[i]).some(d=>r(o,d,t[s])):!1}):!1}async function Pn(e,t){const n=t.blockTag??"latest",a=t.includeTransactions??!1,r=t.blockNumber!==void 0?Dt(t.blockNumber):void 0,s=await e({method:"eth_getBlockByNumber",params:[r||n,a]});if(!s)throw new Error("Block not found");return ln(s)}async function bn(e){const t=await e({method:"eth_maxPriorityFeePerGas"});return v(t)}function wn(e,t){return t&&(e.__preparedMethod=t.preparedMethod,e.__contract=t.contract),e}async function w(e){return typeof e=="function"?await e():e}async function Fe(e){const{client:t,chain:n,percentMultiplier:a}=e,r=V({client:t,chain:n}),s=await Wt(r),i=a?s/BigInt(100)*BigInt(a):0n;return s+i}function me(e,t){let[n,a=""]=e.split(".");const r=n.startsWith("-")?"-":"";if(r&&(n=n.slice(1)),a=a.padEnd(t,"0"),t===0)a[0]&&Number.parseInt(a[0])>=5&&(n=(BigInt(n)+1n).toString()),a="";else if(a.length>t){const s=a[t];s&&Number.parseInt(s,10)>=5?(a=(BigInt(a.substring(0,t))+1n).toString().padStart(t,"0"),a.length>t&&(n=(BigInt(n)+1n).toString(),a=a.substring(a.length-t))):a=a.substring(0,t)}return BigInt(`${r}${n}${a}`)}function Xe(e){return me(e,18)}function N(e){if(e===0n||(e&e-1n)===0n)return e;let t=1n;for(;e>0n;)e>>=1n,t<<=1n;return t}const xn=[78600,2040,248,9372,841,842,2016,9768,2442,1942999413,1952959480,994873017,19011,40875,1511670449];async function An(e){var i;const[t,n,a,r]=await Promise.all([w(e.maxFeePerGas),w(e.maxPriorityFeePerGas),w(e.gasPrice),w(e.type)]);if(t!==void 0&&n!==void 0)return{maxFeePerGas:t,maxPriorityFeePerGas:n};if(typeof a=="bigint")return{gasPrice:a};const s=await et(e.client,e.chain,r==="legacy"?"legacy":"eip1559");return(i=e.chain.experimental)!=null&&i.increaseZeroByteCount?s.gasPrice?{gasPrice:N(s.gasPrice)}:{maxFeePerGas:t??N(s.maxFeePerGas??0n),maxPriorityFeePerGas:n??N(s.maxPriorityFeePerGas??0n)}:s.gasPrice!==void 0?s:{maxFeePerGas:t??s.maxFeePerGas,maxPriorityFeePerGas:n??s.maxPriorityFeePerGas}}async function et(e,t,n){if((n??t.feeType)==="legacy"||xn.includes(t.id))return{gasPrice:await Fe({client:e,chain:t,percentMultiplier:10})};const r=await Gn(e,t);return r.maxFeePerGas!==null&&r.maxPriorityFeePerGas!==null?{maxFeePerGas:r.maxFeePerGas,maxPriorityFeePerGas:r.maxPriorityFeePerGas}:{gasPrice:await Fe({client:e,chain:t,percentMultiplier:10})}}async function Gn(e,t,n=10){let a=null,r=null;const s=V({client:e,chain:t}),[i,o]=await Promise.all([Pn(s,{blockTag:"latest"}),bn(s).catch(()=>null)]),c=i==null?void 0:i.baseFeePerGas,d=t.id;return d===220||d===1220?{maxFeePerGas:null,maxPriorityFeePerGas:null}:(d===80002||d===137?r=await Fn(d):o!==null&&(r=o),r==null||c==null?{maxFeePerGas:null,maxPriorityFeePerGas:null}:(r=vn(r,n),a=c*2n+r,(d===42220||d===44787||d===62320)&&(r=a),{maxFeePerGas:a,maxPriorityFeePerGas:r}))}function vn(e,t=10){const n=e/BigInt(100)*BigInt(t);return e+n}function Tn(e){switch(e){case 137:return"https://gasstation.polygon.technology/v2";case 80002:return"https://gasstation-testnet.polygon.technology/v2"}}const _n=31n;async function Fn(e){const t=Tn(e);try{const a=(await(await fetch(t)).json()).fast.maxPriorityFee;if(a>0){const r=Number.parseFloat(a).toFixed(9);return me(r,9)}}catch(n){console.error("failed to fetch gas",n)}return _n}const In="https://{clientId}.ipfscdn.io/ipfs/{cid}";function En(e){var t,n;if(e.uri.startsWith("ipfs://")){const a=((n=(t=e.client.config)==null?void 0:t.storage)==null?void 0:n.gatewayUrl)??In,r=e.client.clientId,s=Ln(e.uri);let i;return typeof globalThis<"u"&&"Application"in globalThis&&(i=globalThis.Application.applicationId),`${a.replace("{clientId}",r).split("/ipfs")[0]}/ipfs/${s}${i?`?bundleId=${i}`:""}`}if(e.uri.startsWith("http"))return e.uri;throw new Error('Invalid URI scheme, expected "ipfs://" or "http(s)://"')}function Ln(e){if(!e.startsWith("ipfs://"))return e;const t=e.search(/\/(Qm|baf)/i);return e.slice(t+1)}async function On(e){var a,r,s,i,o,c,d,l,y,u;let t;if(e.uri.startsWith("ar://")){const{resolveArweaveScheme:P}=await A(async()=>{const{resolveArweaveScheme:g}=await import("./arweave-CAGvOb64.js");return{resolveArweaveScheme:g}},[]);t=P(e)}else t=En(e);const n=await q(e.client)(t,{keepalive:(s=(r=(a=e.client.config)==null?void 0:a.storage)==null?void 0:r.fetch)==null?void 0:s.keepalive,headers:(c=(o=(i=e.client.config)==null?void 0:i.storage)==null?void 0:o.fetch)==null?void 0:c.headers,requestTimeoutMs:e.requestTimeoutMs??((y=(l=(d=e.client.config)==null?void 0:d.storage)==null?void 0:l.fetch)==null?void 0:y.requestTimeoutMs)??6e4});if(!n.ok)throw(u=n.body)==null||u.cancel(),new Error(`Failed to download file: ${n.statusText}`);return n}function Dn(e,t="https://contract.thirdweb.com/abi"){return Me(async()=>{if(e.abi)return e.abi;if(e.chain.id===31337||e.chain.id===1337)return await Ie(e);try{return await Sn(e,t)}catch{return await Ie(e)}},{cacheKey:`${e.chain.id}-${e.address}`,cacheTime:1e3*60*60*1})}async function Sn(e,t="https://contract.thirdweb.com/abi"){const a=await(await q(e.client)(`${t}/${e.chain.id}/${e.address}`)).json();if(!a||a.error)throw new Error(`Failed to resolve ABI from contract API. ${a.error||""}`);return a}async function tt(e){const[{resolveImplementation:t},{extractIPFSUri:n}]=await Promise.all([A(()=>import("./resolveImplementation-DKT10vio.js"),__vite__mapDeps([0,1,2,3,4])),A(()=>import("./extractIPFS-BaFs0eZv.js"),__vite__mapDeps([5,1,2,3,4]))]),{bytecode:a}=await t(e);if(a==="0x"){const{id:s,name:i}=e.chain;throw new Error(`Failed to load contract bytecode. Make sure the contract [${e.address}] exists on the chain [${i||"Unknown Chain"} (chain id: ${s})]`)}const r=n(a);if(!r)return[];try{return(await(await On({uri:r,client:e.client})).json()).output.abi}catch{return[]}}const Bn={inputs:[],name:"getAllPlugins",outputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin[]",name:"registered",type:"tuple[]"}],stateMutability:"view",type:"function"},Un={inputs:[],name:"getAllExtensions",outputs:[{components:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"address",name:"implementation",type:"address"}],internalType:"struct IExtension.ExtensionMetadata",name:"metadata",type:"tuple"},{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"}],internalType:"struct IExtension.ExtensionFunction[]",name:"functions",type:"tuple[]"}],internalType:"struct IExtension.Extension[]",name:"allExtensions",type:"tuple[]"}],stateMutability:"view",type:"function"},Cn={inputs:[],name:"facets",outputs:[{components:[{internalType:"address",name:"facetAddress",type:"address"},{internalType:"bytes4[]",name:"functionSelectors",type:"bytes4[]"}],type:"tuple[]"}],stateMutability:"view",type:"function"};async function Ie(e,t,n){const[a,r,s,i,o]=await Promise.all([tt(e),$n(e),Nn(e),Rn(e),Mn(e)]),c=[...new Set([...r,...s,...i,...o])];if(!c.length)return a;const d=await Vn({contract:e,plugins:c,resolveSubAbi:n});return Hn({rootAbi:a,pluginAbis:d})}async function $n(e){try{const{readContract:t}=await A(async()=>{const{readContract:a}=await import("./main-CjiS4ifE.js").then(r=>r.d6);return{readContract:a}},__vite__mapDeps([1,2,3,4])),n=await t({contract:e,method:Bn});return n.length?[...new Set(n.map(a=>a.pluginAddress))]:[]}catch{}return[]}async function Nn(e){try{const{readContract:t}=await A(async()=>{const{readContract:a}=await import("./main-CjiS4ifE.js").then(r=>r.d6);return{readContract:a}},__vite__mapDeps([1,2,3,4])),n=await t({contract:e,method:Un});return n.length?[...new Set(n.map(a=>a.metadata.implementation))]:[]}catch{}return[]}async function Rn(e){try{const{getInstalledModules:t}=await A(async()=>{const{getInstalledModules:a}=await import("./getInstalledModules-DudD39g5.js");return{getInstalledModules:a}},__vite__mapDeps([6,1,2,3,4])),n=await t({contract:e});return n.length?[...new Set(n.map(a=>a.implementation))]:[]}catch{}return[]}async function Mn(e){try{const{readContract:t}=await A(async()=>{const{readContract:a}=await import("./main-CjiS4ifE.js").then(r=>r.d6);return{readContract:a}},__vite__mapDeps([1,2,3,4])),n=await t({contract:e,method:Cn});return n.length?n.map(a=>a.facetAddress):[]}catch{}return[]}async function Vn(e){return Promise.all(e.plugins.map(t=>{const n=I({...e.contract,address:t});return e.resolveSubAbi?e.resolveSubAbi(n):tt(n)}))}function Hn(e){let t=e.pluginAbis.flat().filter(a=>a.type!=="constructor");e.rootAbi&&(t=[...e.rootAbi,...t].filter(a=>a.type!=="fallback"&&a.type!=="receive").filter(Boolean));const n=[...new Set(Kt(t))];return Zt(n)}async function Ee(e){const{error:t,contract:n}=e,a=await kn({error:t,contract:n});return a?new jn(a,n):t}async function kn(e){const{error:t,contract:n}=e;if(typeof t=="object"){const a=t;if(a.data&&a.data!=="0x"&&Q(a.data)){let r=n==null?void 0:n.abi;n&&!r&&(r=await Dn(n).catch(()=>{}));const s=qe({data:a.data,abi:r});return`${s.errorName}${s.args?` - ${s.args}`:""}`}}return`Execution Reverted: ${St(t)}`}class jn extends Error{constructor(t,n){var r;let a=t;super(a),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chainId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TransactionError",this.contractAddress=n==null?void 0:n.address,this.chainId=(r=n==null?void 0:n.chain)==null?void 0:r.id,this.message=a}}const X=new WeakMap;async function zn(e){var s,i;const t=typeof e.from=="string"?e.from??void 0:((s=e.from)==null?void 0:s.address)??((i=e.account)==null?void 0:i.address),n={...e.transaction,from:t};if(X.has(n))return X.get(n);const{account:a}=e,r=(async()=>{var b,h;const o=await w(e.transaction.gas);if(o!==void 0)return o;if(a!=null&&a.estimateGas)try{let m=await a.estimateGas(e.transaction);return(b=e.transaction.chain.experimental)!=null&&b.increaseZeroByteCount&&(m=N(m)),m}catch(m){throw await Ee({error:m,contract:e.transaction.__contract})}const{encode:c}=await A(async()=>{const{encode:m}=await Promise.resolve().then(()=>Wn);return{encode:m}},void 0),[d,l,y,u]=await Promise.all([c(e.transaction),w(e.transaction.to),w(e.transaction.value),w(e.transaction.authorizationList)]),[{getRpcClient:P},{eth_estimateGas:g}]=await Promise.all([A(()=>import("./main-CjiS4ifE.js").then(m=>m.d5),__vite__mapDeps([1,2,3,4])),A(()=>import("./eth_estimateGas-vX9ABOt0.js"),__vite__mapDeps([7,1,2,3,4]))]),p=P(e.transaction);try{let m=await g(p,rn({to:l?F(l):void 0,data:d,from:t?F(t):void 0,value:y,authorizationList:u==null?void 0:u.map(f=>({...f,r:Ge(f.r),s:Ge(f.s),nonce:Number(f.nonce),contractAddress:F(f.address)}))}));return(h=e.transaction.chain.experimental)!=null&&h.increaseZeroByteCount&&(m=N(m)),m}catch(m){throw await Ee({error:m,contract:e.transaction.__contract})}})();return X.set(n,r),r}function k(e){const{contract:t,method:n,params:a,...r}=e,s=()=>(async()=>{var i,o;if(Array.isArray(n))return n;if(Bt(n))return j(n);if(typeof n=="function")return j(await n(t));if(typeof n=="string"&&n.startsWith("function ")){const c=He(n);if(c.type==="function")return j(c);throw new Error('"method" passed is not of type "function"')}if(t.abi&&((i=t.abi)==null?void 0:i.length)>0){const c=(o=t.abi)==null?void 0:o.find(d=>d.type==="function"&&d.name===n);if(c)return j(c)}throw new Error(`Could not resolve method "${n}".`)})();return wn({...r,to:t.address,chain:t.chain,client:t.client,data:async()=>{let i;return Array.isArray(n)?i=n:i=await s(),i[1].length===0?i[0]:i[0]+Ve(i[1],await w(a??[])).slice(2)}},{preparedMethod:s,contract:t})}const ee=new WeakMap;async function U(e){if(ee.has(e))return ee.get(e);const t=(async()=>{const[n,a,{concatHex:r}]=await Promise.all([nt(e),at(e),A(()=>Promise.resolve().then(()=>Xn),void 0)]);return a?r([n,a]):n})();return ee.set(e,t),t}async function nt(e){if(e.data===void 0)return"0x";if(typeof e.data=="function"){const t=await e.data();return t||"0x"}return e.data}async function at(e){if(e.extraCallData){if(typeof e.extraCallData=="function"){const t=await e.extraCallData();if(!t)return;if(!t.startsWith("0x"))throw Error("Invalid extra calldata - must be a hex string");return t==="0x"?void 0:t}if(!e.extraCallData.startsWith("0x"))throw Error("Invalid extra calldata - must be a hex string");return e.extraCallData}}const Wn=Object.freeze(Object.defineProperty({__proto__:null,encode:U,getDataFromTx:nt,getExtraCallDataFromTx:at},Symbol.toStringTag,{value:"Module"}));function Kn(e){const t=new Set;let n=e;const a=()=>{for(const r of t)r()};return{getValue(){return n},setValue(r){r!==n&&(n=r,a())},subscribe(r){return t.add(r),()=>{t.delete(r)}}}}const re=new Map;function Zn(e){const t=re.get(e);if(t)return t;const n=Kn([]);return re.set(e,n),n}function Yn(e){const{address:t,transactionHash:n,chainId:a}=e,r=Zn(t);r.setValue([...r.getValue(),{transactionHash:n,chainId:a}]),re.set(t,r)}async function ye(e){if(await ke(e.transaction.chain)){const{getZkGasFees:p}=await A(async()=>{const{getZkGasFees:f}=await Promise.resolve().then(()=>lt);return{getZkGasFees:f}},void 0),{gas:b,maxFeePerGas:h,maxPriorityFeePerGas:m}=await p({transaction:e.transaction,from:typeof e.from=="string"?F(e.from):e.from!==void 0?F(e.from.address):void 0});e.transaction={...e.transaction,gas:b,maxFeePerGas:h,maxPriorityFeePerGas:m}}const n=V(e.transaction),a=e.transaction.chain.id,r=e.from;let[s,i,o,c,d,l,y,u,P]=await Promise.all([U(e.transaction),(async()=>{const p=await w(e.transaction.nonce);return p!==void 0?p:r?await A(async()=>{const{eth_getTransactionCount:b}=await import("./eth_getTransactionCount-BnBGT2o8.js");return{eth_getTransactionCount:b}},__vite__mapDeps([8,1,2,3,4])).then(({eth_getTransactionCount:b})=>b(n,{address:typeof r=="string"?F(r):F(r.address),blockTag:"pending"})):void 0})(),zn({...e,from:e.from}),An(e.transaction),w(e.transaction.to),w(e.transaction.accessList),w(e.transaction.value),w(e.transaction.authorizationList),w(e.transaction.type)]);const g=await w(e.transaction.extraGas);return g&&(o+=g),{to:d,chainId:a,data:s,gas:o,nonce:i,accessList:l,value:y,authorizationList:u,type:P,...c}}async function qn(e){let{account:t,transaction:n,gasless:a}=e;if(t.onTransactionRequested&&await t.onTransactionRequested(n),n.eip712){const{sendEip712Transaction:i}=await A(async()=>{const{sendEip712Transaction:o}=await Promise.resolve().then(()=>lt);return{sendEip712Transaction:o}},void 0);return i({account:t,transaction:n})}const r=await ye({transaction:n,from:t});if(a){const{sendGaslessTransaction:i}=await A(async()=>{const{sendGaslessTransaction:o}=await import("./send-gasless-transaction-Bnl5lowF.js");return{sendGaslessTransaction:o}},__vite__mapDeps([9,1,2,3,4,10]));return i({account:t,transaction:n,serializableTransaction:r,gasless:a})}const s=await t.sendTransaction(r);return Yn({address:t.address,transactionHash:s.transactionHash,chainId:n.chain.id}),{...s,chain:n.chain,client:n.client}}function Qn(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="event")}function rt(e){const{signature:t}=e;let n;return Qn(t)?n=t:n=He(t),{abiEvent:n,hash:De(n),topics:Qt({abi:[n],args:e.filters})}}function Jn(e){const{logs:t,events:n,strict:a}=e;return gn({logs:t,abi:n.map(r=>r.abiEvent),strict:a})}function st(e){return Ut(...e)}const Xn=Object.freeze(Object.defineProperty({__proto__:null,concatHex:st},Symbol.toStringTag,{value:"Module"}));async function ea(e){const{factoryContract:t,predictAddressOverride:n,adminAddress:a,accountSalt:r,accountAddress:s}=e;if(n)return n(t,a);if(s)return s;if(!a)throw new Error("Account address is required to predict the smart wallet address.");return Me(async()=>{const i=r&&Q(r)?r:je(r??"");return S({contract:t,method:"function getAddress(address, bytes) returns (address)",params:[a,i]})},{cacheKey:`${e.factoryContract.chain.id}-${e.factoryContract.address}-${e.adminAddress}-${e.accountSalt}`,cacheTime:1e3*60*60*24})}function it(e){const{adminAddress:t,factoryContract:n,createAccountOverride:a,accountSalt:r}=e;if(a)return a(n,t);const s=r&&Q(r)?r:je(r??"");return k({contract:n,method:"function createAccount(address, bytes) returns (address)",params:[t,s]})}function ot(e){const{accountContract:t,transaction:n,executeOverride:a}=e;return a?a(t,n):k({contract:t,method:"function execute(address, uint256, bytes)",params:[n.to||"",n.value||0n,n.data||"0x"],gas:n.gas?n.gas+21000n:void 0})}function ta(e){const{accountContract:t,transactions:n,executeBatchOverride:a}=e;return a?a(t,n):k({contract:t,method:"function executeBatch(address[], uint256[], bytes[])",params:[n.map(r=>r.to||""),n.map(r=>r.value||0n),n.map(r=>r.data||"0x")]})}const na="0xdd62ed3e",aa=[{type:"address",name:"owner"},{type:"address",name:"spender"}],ra=[{type:"uint256"}];async function sa(e){return S({contract:e.contract,method:[na,aa,ra],params:[e.owner,e.spender]})}function ct(e){let t;return()=>(t||(t=e()),t)}const ia="0x095ea7b3",oa=[{type:"address",name:"spender"},{type:"uint256",name:"value"}],ca=[{type:"bool"}];function da(e){const t=ct(async()=>"asyncParams"in e?await e.asyncParams():e);return k({contract:e.contract,method:[ia,oa,ca],params:async()=>{const n=await t();return[n.spender,n.value]},value:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.value},accessList:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.accessList},gas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.gas},gasPrice:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.gasPrice},maxFeePerGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.maxFeePerGas},maxPriorityFeePerGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.maxPriorityFeePerGas},nonce:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.nonce},extraGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.extraGas},erc20Value:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.erc20Value}})}function ua(e){return da({contract:e.contract,asyncParams:async()=>{let t;if("amount"in e){const{decimals:n}=await A(async()=>{const{decimals:r}=await import("./decimals-DnNLhJxl.js");return{decimals:r}},__vite__mapDeps([11,1,2,3,4])),a=await n(e).catch(()=>18);t=me(e.amount.toString(),a)}else t=e.amountWei;return{spender:e.spender,value:t,overrides:{erc20Value:{amountWei:t,tokenAddress:e.contract.address}}}}})}const la="0xf15d424e",ma=[{type:"address",name:"signer"}],ya=[{type:"tuple",name:"permissions",components:[{type:"address",name:"signer"},{type:"address[]",name:"approvedTargets"},{type:"uint256",name:"nativeTokenLimitPerTransaction"},{type:"uint128",name:"startTimestamp"},{type:"uint128",name:"endTimestamp"}]}];async function pa(e){return S({contract:e.contract,method:[la,ma,ya],params:[e.signer]})}const fa="0x5892e236",ga=[{type:"tuple",name:"req",components:[{type:"address",name:"signer"},{type:"uint8",name:"isAdmin"},{type:"address[]",name:"approvedTargets"},{type:"uint256",name:"nativeTokenLimitPerTransaction"},{type:"uint128",name:"permissionStartTimestamp"},{type:"uint128",name:"permissionEndTimestamp"},{type:"uint128",name:"reqValidityStartTimestamp"},{type:"uint128",name:"reqValidityEndTimestamp"},{type:"bytes32",name:"uid"}]},{type:"bytes",name:"signature"}],ha=[];function Pa(e){const t=ct(async()=>"asyncParams"in e?await e.asyncParams():e);return k({contract:e.contract,method:[fa,ga,ha],params:async()=>{const n=await t();return[n.req,n.signature]},value:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.value},accessList:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.accessList},gas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.gas},gasPrice:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.gasPrice},maxFeePerGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.maxFeePerGas},maxPriorityFeePerGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.maxPriorityFeePerGas},nonce:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.nonce},extraGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.extraGas},erc20Value:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.erc20Value}})}function $(e){if(["string","number"].includes(typeof e)&&!Number.isInteger(Number(e)))throw new Error(`Expected value to be an integer to convert to a bigint, got ${e} of type ${typeof e}`);return e instanceof Uint8Array?BigInt(Ct(e)):BigInt(e)}const se=(e,t)=>typeof e=="bigint"?t(e):Array.isArray(e)?e.map(n=>se(n,t)):e&&typeof e=="object"?Object.fromEntries(Object.entries(e).map(([n,a])=>[n,se(a,t)])):e;function Le(){return new Date(Date.now()+1e3*60*60*24*365*10)}function te(e){return $(Math.floor(e.getTime()/1e3))}const ba=[{name:"signer",type:"address"},{name:"isAdmin",type:"uint8"},{name:"approvedTargets",type:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256"},{name:"permissionStartTimestamp",type:"uint128"},{name:"permissionEndTimestamp",type:"uint128"},{name:"reqValidityStartTimestamp",type:"uint128"},{name:"reqValidityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}];async function wa(e){const{account:t,contract:n,req:a}=e,r=await t.signTypedData({domain:{name:"Account",version:"1",verifyingContract:n.address,chainId:n.chain.id},primaryType:"SignerPermissionRequest",types:{SignerPermissionRequest:ba},message:a});return{req:a,signature:r}}async function xa(e){var a;const{target:t,permissions:n}=e;return{approvedTargets:n.approvedTargets==="*"?[Ze]:n.approvedTargets,nativeTokenLimitPerTransaction:Xe(((a=n.nativeTokenLimitPerTransaction)==null?void 0:a.toString())||"0"),permissionStartTimestamp:te(n.permissionStartTimestamp||new Date(0)),permissionEndTimestamp:te(n.permissionEndTimestamp||Le()),reqValidityStartTimestamp:0n,reqValidityEndTimestamp:te(Le()),uid:await jt(),isAdmin:0,signer:t}}function Aa(e){const{contract:t,sessionKeyAddress:n,account:a,permissions:r}=e;return Pa({contract:t,async asyncParams(){const{req:s,signature:i}=await wa({account:a,contract:t,req:await xa({target:n,permissions:r})});return{signature:i,req:s}}})}async function Ga(e){var i;const{accountContract:t,sessionKeyAddress:n,newPermissions:a}=e;if(!await ze(t))return!0;const s=await pa({contract:t,signer:n});return!!(s.endTimestamp&&s.endTimestamp<Math.floor(new Date().getTime()/1e3)||!va(s.approvedTargets,a.approvedTargets)||Xe(((i=a.nativeTokenLimitPerTransaction)==null?void 0:i.toString())??"0")>s.nativeTokenLimitPerTransaction)}function va(e,t){return t==="*"&&e.length===1&&e[0]===Ze?!0:t!=="*"?t.map(n=>n.toLowerCase()).every(n=>e.map(a=>a.toLowerCase()).includes(n)):!1}const Oe=on*32n;class Ta extends M{constructor({givenLength:t,maxBytecodeSize:n}){super(`Bytecode cannot be longer than ${n} bytes. Given length: ${t}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class _a extends M{constructor({givenLengthInWords:t}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${t}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class Fa extends M{constructor({givenLength:t}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${t}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}function Ia(e){const t=B(e);if(t.length%32!==0)throw new Fa({givenLength:t.length});if(t.length>Oe)throw new Ta({givenLength:t.length,maxBytecodeSize:Oe});const n=mn(t),a=B(n),r=t.length/32;if(r%2===0)throw new _a({givenLengthInWords:r});const s=B(r),i=D(s,{size:2}),o=new Uint8Array([1,0]);return a.set(o,0),a.set(i,2),a}const dt=50000n,Ea=e=>{const t=La(e);return{domain:{name:"zkSync",version:"2",chainId:e.chainId},types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]},primaryType:"Transaction",message:t}};function La(e){const{gas:t,nonce:n,to:a,from:r,value:s,maxFeePerGas:i,maxPriorityFeePerGas:o,paymaster:c,paymasterInput:d,gasPerPubdata:l,data:y,factoryDeps:u}=e;return{txType:113n,from:BigInt(r),to:a?BigInt(a):0n,gasLimit:t??0n,gasPerPubdataByteLimit:l??dt,maxFeePerGas:i??0n,maxPriorityFeePerGas:o??0n,paymaster:c?BigInt(c):0n,nonce:n?BigInt(n):0n,value:s??0n,data:y||"0x0",factoryDeps:(u==null?void 0:u.map(P=>G(Ia(P))))??[],paymasterInput:d||"0x"}}async function Oa(e){const{account:t,transaction:n}=e,a=await fe(e),r=await pe({account:t,eip712Transaction:a,chainId:n.chain.id}),s=V(n);return{transactionHash:await zt(s,r),chain:n.chain,client:n.client}}async function pe(e){const{account:t,eip712Transaction:n,chainId:a}=e,r=Ea(n),s=await t.signTypedData({...r});return Da({...n,chainId:a,customSignature:s})}async function fe(e){const{account:t,transaction:n}=e,{gas:a,maxFeePerGas:r,maxPriorityFeePerGas:s,gasPerPubdata:i}=await ut({transaction:n,from:F(t.address)});return{...await ye({transaction:{...n,gas:a,maxFeePerGas:r,maxPriorityFeePerGas:s},from:t.address}),...n.eip712,gasPerPubdata:i,from:t.address}}function Da(e){const{chainId:t,gas:n,nonce:a,to:r,from:s,value:i,maxFeePerGas:o,maxPriorityFeePerGas:c,customSignature:d,factoryDeps:l,paymaster:y,paymasterInput:u,gasPerPubdata:P,data:g}=e,p=[a?G(a):"0x",c?G(c):"0x",o?G(o):"0x",n?G(n):"0x",r??"0x",i?G(i):"0x",g??"0x0",G(t),G(""),G(""),G(t),s??"0x",P?G(P):G(dt),l??[],d??"0x",y&&u?[y,u]:[]];return st(["0x71",en(p)])}async function ut(e){const{transaction:t,from:n}=e;let[a,r,s,i]=await Promise.all([w(t.gas),w(t.maxFeePerGas),w(t.maxPriorityFeePerGas),w(t.eip712)]),o=i==null?void 0:i.gasPerPubdata;if(a===void 0||r===void 0||s===void 0){const c=V(t),d=await Sa({transaction:t,from:n}),l=await c({method:"zks_estimateFee",params:[se(d,G)]});a=$(l.gas_limit)*2n,r=$(l.max_fee_per_gas)*2n,s=$(l.max_priority_fee_per_gas)||1n,o=$(l.gas_per_pubdata_limit)*2n,o<50000n&&(o=50000n)}return{gas:a,maxFeePerGas:r,maxPriorityFeePerGas:s,gasPerPubdata:o}}async function Sa(e){var c;const{transaction:t,from:n}=e,[a,r,s,i]=await Promise.all([U(t),w(t.to),w(t.value),w(t.eip712)]),o=i==null?void 0:i.gasPerPubdata;return{from:n,to:r,data:a,value:s,gasPerPubdata:o,eip712Meta:{...i,gasPerPubdata:o||50000n,factoryDeps:(c=i==null?void 0:i.factoryDeps)==null?void 0:c.map(d=>Array.from($e(d)))},type:"0x71"}}const lt=Object.freeze(Object.defineProperty({__proto__:null,getZkGasFees:ut,populateEip712Transaction:fe,sendEip712Transaction:Oa,signEip712Transaction:pe},Symbol.toStringTag,{value:"Module"})),Ba=2n**96n-1n;function Ua(e={}){return rt({signature:"event UserOperationRevertReason(bytes32 indexed userOpHash, address indexed sender, uint256 nonce, bytes revertReason)",filters:e})}function Ca(e={}){return rt({signature:"event PostOpRevertReason(bytes32 indexed userOpHash, address indexed sender, uint256 nonce, bytes revertReason)",filters:e})}function $a(e){const{receipt:t}=e,n={...t,transactionHash:t.transactionHash,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs,to:t.to?t.to:null,transactionIndex:t.transactionIndex,status:t.status,type:t.type};return t.blobGasPrice&&(n.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(n.blobGasUsed=BigInt(t.blobGasUsed)),{...e,receipt:n,userOpHash:e.userOpHash,actualGasCost:BigInt(e.actualGasCost),actualGasUsed:BigInt(e.actualGasUsed),nonce:BigInt(e.nonce)}}const Na="0x35567e1a",Ra=[{type:"address",name:"sender"},{type:"uint192",name:"key"}],Ma=[{type:"uint256",name:"nonce"}];async function Va(e){return S({contract:e.contract,method:[Na,Ra,Ma],params:[e.sender,e.key]})}const Ha="0xa6193531",ka=[{type:"tuple",name:"userOp",components:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"uint256",name:"callGasLimit"},{type:"uint256",name:"verificationGasLimit"},{type:"uint256",name:"preVerificationGas"},{type:"uint256",name:"maxFeePerGas"},{type:"uint256",name:"maxPriorityFeePerGas"},{type:"bytes",name:"paymasterAndData"},{type:"bytes",name:"signature"}]}],ja=[{type:"bytes32"}];async function za(e){return S({contract:e.contract,method:[Ha,ka,ja],params:[e.userOp]})}const Wa="0x22cdde4c",Ka=[{type:"tuple",name:"userOp",components:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"},{type:"bytes",name:"signature"}]}],Za=[{type:"bytes32"}];async function Ya(e){return S({contract:e.contract,method:[Wa,Ka,Za],params:[e.userOp]})}function qa(e){return e.factory?H([e.factory,e.factoryData||"0x"]):"0x"}function Qa(e){return H([D(O(e.verificationGasLimit),{size:16}),D(O(e.callGasLimit),{size:16})])}function Ja(e){return H([D(O(e.maxPriorityFeePerGas),{size:16}),D(O(e.maxFeePerGas),{size:16})])}function Xa(e){return e.paymaster?H([e.paymaster,D(O(e.paymasterVerificationGasLimit||BigInt(0)),{size:16}),D(O(e.paymasterPostOpGasLimit||BigInt(0)),{size:16}),e.paymasterData||"0x"]):"0x"}const er=e=>({sender:e.sender,nonce:e.nonce,initCode:qa(e),callData:e.callData,accountGasLimits:Qa(e),preVerificationGas:e.preVerificationGas,gasFees:Ja(e),paymasterAndData:Xa(e),signature:e.signature}),tr=()=>{const e=BigInt(Math.floor(Math.random()*4294967296)),t=BigInt(Math.floor(Math.random()*4294967296)),n=BigInt(Math.floor(Math.random()*4294967296)),a=BigInt(Math.floor(Math.random()*4294967296)),r=BigInt(Math.floor(Math.random()*4294967296)),s=BigInt(Math.floor(Math.random()*4294967296));return e<<BigInt(160)|t<<BigInt(128)|n<<BigInt(96)|a<<BigInt(64)|r<<BigInt(32)|s};function ge(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,n==null||Q(n)?n:G(n)]))}async function Z(e){var g;const{userOp:t,paymasterOverride:n,client:a,chain:r,entrypointAddress:s}=e;if(n)return n(t);const i={"Content-Type":"application/json"},o=s??L,c=ue(r),d={jsonrpc:"2.0",id:1,method:"pm_sponsorUserOperation",params:[ge(t),o]},y=await q(a)(c,{method:"POST",headers:i,body:W(d)}),u=await y.json();if(!y.ok){const p=u.error||y.statusText,b=u.code||"UNKNOWN";throw new Error(`Paymaster error: ${p}
Status: ${y.status}
Code: ${b}`)}if(u.result)return typeof u.result=="string"?{paymasterAndData:u.result}:(u.result.policyId&&u.result.reason&&console.warn(`Paymaster policy rejected this transaction with reason: ${u.result.reason} (policyId: ${u.result.policyId})`),{paymasterAndData:u.result.paymasterAndData,verificationGasLimit:u.result.verificationGasLimit?v(u.result.verificationGasLimit):void 0,preVerificationGas:u.result.preVerificationGas?v(u.result.preVerificationGas):void 0,callGasLimit:u.result.callGasLimit?v(u.result.callGasLimit):void 0,paymaster:u.result.paymaster,paymasterData:u.result.paymasterData,paymasterVerificationGasLimit:u.result.paymasterVerificationGasLimit?v(u.result.paymasterVerificationGasLimit):void 0,paymasterPostOpGasLimit:u.result.paymasterPostOpGasLimit?v(u.result.paymasterPostOpGasLimit):void 0});const P=((g=u.error)==null?void 0:g.message)||u.error||y.statusText||"unknown error";throw new Error(`Paymaster error from ${c}: ${P}`)}const he=new Set,Pe=e=>`${e.chain.id}:${e.address}`,mt=e=>{he.add(Pe(e))},yt=e=>{he.delete(Pe(e))},pt=e=>he.has(Pe(e));async function nr(e){const t=e.timeoutMs||12e4,n=e.intervalMs||1e3,a=Date.now()+t;for(;Date.now()<a;){const r=await yr(e);if(r)return r;await new Promise(s=>setTimeout(s,n))}throw new Error(`Timeout waiting for userOp to be mined on chain ${e.chain.id} with UserOp hash: ${e.userOpHash}`)}async function ar(e){var x;const{transaction:t,accountContract:n,factoryContract:a,adminAddress:r,overrides:s,sponsorGas:i,waitForDeployment:o=!0,isDeployedOverride:c}=e,d=t.chain,l=t.client,y={client:l,chain:d,bundlerUrl:s==null?void 0:s.bundlerUrl,entrypointAddress:s==null?void 0:s.entrypointAddress},u=le(((x=e.overrides)==null?void 0:x.entrypointAddress)||L),[P,g,p,b,h]=await Promise.all([typeof c=="boolean"?c:ze(n).then(_=>_||pt(n)),U(t),w(t.gas),rr({executeTx:t,bundlerOptions:y,chain:d,client:l}),ur({accountContract:n,chain:d,client:l,entrypointAddress:s==null?void 0:s.entrypointAddress,getNonceOverride:s==null?void 0:s.getAccountNonce})]),{maxFeePerGas:m,maxPriorityFeePerGas:f}=b;return u==="v0.7"?sr({bundlerOptions:y,factoryContract:a,accountContract:n,adminAddress:r,sponsorGas:i,overrides:s,isDeployed:P,nonce:h,callData:g,callGasLimit:p,maxFeePerGas:m,maxPriorityFeePerGas:f,waitForDeployment:o}):ir({bundlerOptions:y,factoryContract:a,accountContract:n,adminAddress:r,sponsorGas:i,overrides:s,isDeployed:P,nonce:h,callData:g,callGasLimit:p,maxFeePerGas:m,maxPriorityFeePerGas:f,waitForDeployment:o})}async function rr(e){const{executeTx:t,bundlerOptions:n,chain:a,client:r}=e;let{maxFeePerGas:s,maxPriorityFeePerGas:i}=t;const o=(n==null?void 0:n.bundlerUrl)??ue(a);if(Nt(o)){const c=await mr({options:n});s=c.maxFeePerGas,i=c.maxPriorityFeePerGas}else{const[c,d]=await Promise.all([w(s),w(i)]);if(c&&d)s=c,i=d;else{const l=await et(r,a);i=d??l.maxPriorityFeePerGas??0n,s=c??l.maxFeePerGas??0n}}return{maxFeePerGas:s,maxPriorityFeePerGas:i}}async function sr(e){const{bundlerOptions:t,isDeployed:n,factoryContract:a,accountContract:r,adminAddress:s,sponsorGas:i,overrides:o,nonce:c,callData:d,callGasLimit:l,maxFeePerGas:y,maxPriorityFeePerGas:u,waitForDeployment:P}=e,{chain:g,client:p}=t;let b,h;n?(h="0x",P&&await ft(r)):(b=a.address,h=await U(it({factoryContract:a,adminAddress:s,accountSalt:o==null?void 0:o.accountSalt,createAccountOverride:o==null?void 0:o.createAccount})),P&&mt(r));const m={sender:r.address,nonce:c,callData:d,maxFeePerGas:y,maxPriorityFeePerGas:u,callGasLimit:l??0n,verificationGasLimit:0n,preVerificationGas:0n,factory:b,factoryData:h,paymaster:void 0,paymasterData:"0x",paymasterVerificationGasLimit:0n,paymasterPostOpGasLimit:0n,signature:We};if(i){const f=await Z({userOp:m,chain:g,client:p,entrypointAddress:o==null?void 0:o.entrypointAddress,paymasterOverride:o==null?void 0:o.paymaster});if(f.paymaster&&f.paymasterData&&(m.paymaster=f.paymaster,m.paymasterData=f.paymasterData),f.callGasLimit&&f.verificationGasLimit&&f.preVerificationGas&&f.paymasterPostOpGasLimit&&f.paymasterVerificationGasLimit)m.callGasLimit=f.callGasLimit,m.verificationGasLimit=f.verificationGasLimit,m.preVerificationGas=f.preVerificationGas,m.paymasterPostOpGasLimit=f.paymasterPostOpGasLimit,m.paymasterVerificationGasLimit=f.paymasterVerificationGasLimit;else{const x=o!=null&&o.tokenPaymaster?{[o.tokenPaymaster.tokenAddress]:{stateDiff:{[Rt(Ve([{type:"address"},{type:"uint256"}],[r.address,o.tokenPaymaster.balanceStorageSlot]))]:G(Mt,{size:32})}}}:void 0,_=await Y({userOp:m,options:t},x);m.callGasLimit=_.callGasLimit,m.verificationGasLimit=_.verificationGasLimit,m.preVerificationGas=_.preVerificationGas,m.paymasterPostOpGasLimit=o!=null&&o.tokenPaymaster?500000n:_.paymasterPostOpGasLimit||0n,m.paymasterVerificationGasLimit=_.paymasterVerificationGasLimit||0n;const E=await Z({userOp:m,chain:g,client:p,entrypointAddress:o==null?void 0:o.entrypointAddress,paymasterOverride:o==null?void 0:o.paymaster});E.paymaster&&E.paymasterData&&(m.paymaster=E.paymaster,m.paymasterData=E.paymasterData)}}else{const f=await Y({userOp:m,options:t});m.callGasLimit=f.callGasLimit,m.verificationGasLimit=f.verificationGasLimit,m.preVerificationGas=f.preVerificationGas,m.paymasterPostOpGasLimit=f.paymasterPostOpGasLimit||0n,m.paymasterVerificationGasLimit=f.paymasterVerificationGasLimit||0n}return{...m,signature:"0x"}}async function ir(e){const{bundlerOptions:t,isDeployed:n,factoryContract:a,accountContract:r,adminAddress:s,sponsorGas:i,overrides:o,nonce:c,callData:d,callGasLimit:l,maxFeePerGas:y,maxPriorityFeePerGas:u,waitForDeployment:P}=e,{chain:g,client:p}=t;let b;n?(b="0x",P&&await ft(r)):(b=await dr({factoryContract:a,adminAddress:s,accountSalt:o==null?void 0:o.accountSalt,createAccountOverride:o==null?void 0:o.createAccount}),P&&mt(r));const h={sender:r.address,nonce:c,initCode:b,callData:d,maxFeePerGas:y,maxPriorityFeePerGas:u,callGasLimit:l??0n,verificationGasLimit:0n,preVerificationGas:0n,paymasterAndData:"0x",signature:We};if(i){const m=await Z({userOp:h,chain:g,client:p,entrypointAddress:o==null?void 0:o.entrypointAddress,paymasterOverride:o==null?void 0:o.paymaster}),f="paymasterAndData"in m?m.paymasterAndData:"0x";if(f&&f!=="0x"&&(h.paymasterAndData=f),m.callGasLimit&&m.verificationGasLimit&&m.preVerificationGas)h.callGasLimit=m.callGasLimit,h.verificationGasLimit=m.verificationGasLimit,h.preVerificationGas=m.preVerificationGas;else{const x=await Y({userOp:h,options:t});if(h.callGasLimit=x.callGasLimit,h.verificationGasLimit=x.verificationGasLimit,h.preVerificationGas=x.preVerificationGas,f&&f!=="0x"){const _=await Z({userOp:h,chain:g,client:p,entrypointAddress:o==null?void 0:o.entrypointAddress,paymasterOverride:o==null?void 0:o.paymaster}),E="paymasterAndData"in _?_.paymasterAndData:"0x";E&&E!=="0x"&&(h.paymasterAndData=E)}}}else{const m=await Y({userOp:h,options:t});h.callGasLimit=m.callGasLimit,h.verificationGasLimit=m.verificationGasLimit,h.preVerificationGas=m.preVerificationGas}return{...h,signature:"0x"}}async function or(e){const{userOp:t,chain:n,entrypointAddress:a,adminAccount:r}=e,s=await cr({client:e.client,userOp:t,chain:n,entrypointAddress:a});if(r.signMessage){const i=await r.signMessage({message:{raw:$t(s)},originalMessage:W(t),chainId:n.id});return{...t,signature:i}}throw new Error("signMessage not implemented in signingAccount")}async function cr(e){const{userOp:t,chain:n,entrypointAddress:a}=e,r=le(a||L);let s;if(r==="v0.7"){const i=er(t);s=await Ya({contract:I({address:a||Ke,chain:n,client:e.client}),userOp:i})}else s=await za({contract:I({address:a||L,chain:n,client:e.client}),userOp:t});return s}async function dr(e){const{factoryContract:t,adminAddress:n,accountSalt:a,createAccountOverride:r}=e,s=it({factoryContract:t,adminAddress:n,accountSalt:a,createAccountOverride:r});return H([t.address,await U(s)])}async function ur(e){const{accountContract:t,chain:n,client:a,entrypointAddress:r,getNonceOverride:s}=e;return s?s(t):await Va({contract:I({address:r||L,chain:n,client:a}),key:tr(),sender:t.address})}async function ft(e){const t=Date.now();for(;pt(e);){if(Date.now()-t>6e4)throw yt(e),new Error("Account deployment is taking too long (over 1 minute). Please try again.");await new Promise(n=>setTimeout(n,500))}}async function lr(e){return C({...e,operation:"eth_sendUserOperation",params:[ge(e.userOp),e.options.entrypointAddress??L]})}async function Y(e,t){const n=await C({...e,operation:"eth_estimateUserOperationGas",params:[ge(e.userOp),e.options.entrypointAddress??L,t??{}]});return{preVerificationGas:v(n.preVerificationGas),verificationGas:n.verificationGas!==void 0?v(n.verificationGas):void 0,verificationGasLimit:v(n.verificationGasLimit),callGasLimit:v(n.callGasLimit)+Vt,paymasterVerificationGasLimit:n.paymasterVerificationGasLimit!==void 0?v(n.paymasterVerificationGasLimit):void 0,paymasterPostOpGasLimit:n.paymasterPostOpGasLimit!==void 0?v(n.paymasterPostOpGasLimit):void 0}}async function mr(e){const t=await C({...e,operation:"thirdweb_getUserOperationGasPrice",params:[]});return{maxPriorityFeePerGas:v(t.maxPriorityFeePerGas),maxFeePerGas:v(t.maxFeePerGas)}}async function yr(e){var n,a;const t=await pr(e);if(t){if(t.success===!1){const s=(a=(n=Jn({events:[Ua(),Ca()],logs:t.logs})[0])==null?void 0:n.args)==null?void 0:a.revertReason;if(!s)throw new Error(`UserOp failed at txHash: ${t.receipt.transactionHash}`);const i=qe({data:s});throw new Error(`UserOp failed with reason: '${i.args.join(",")}' at txHash: ${t.receipt.transactionHash}`)}return t.receipt}}async function pr(e){const t=await C({options:e,operation:"eth_getUserOperationReceipt",params:[e.userOpHash]});if(t)return $a(t)}async function fr(e){const t=await C({options:e.options,operation:"zk_paymasterData",params:[e.transaction]});return{paymaster:t.paymaster,paymasterInput:t.paymasterInput}}async function gr(e){return{transactionHash:(await C({options:e.options,operation:"zk_broadcastTransaction",params:[{...e.transaction,signedTransaction:e.signedTransaction}]})).transactionHash}}async function C(e){const{options:t,operation:n,params:a}=e,r=t.bundlerUrl??ue(t.chain),i=await q(t.client)(r,{method:"POST",headers:{"Content-Type":"application/json"},body:W({jsonrpc:"2.0",id:1,method:n,params:a})}),o=await i.json();if(!i.ok||o.error){let c=o.error||i.statusText;typeof c=="object"&&(c=W(c));const d=o.code||"UNKNOWN";throw new Error(`${n} error: ${c}
Status: ${i.status}
Code: ${d}`)}return o.result}const gt=new WeakMap,ie=new WeakMap;async function hr(e,t){var P,g,p,b,h,m,f;const{personalAccount:n,client:a,chain:r}=e;if(!n)throw new Error("No personal account provided for smart account connection");const s=t,i=r??s.chain,o="gasless"in s?s.gasless:s.sponsorGas;if(await ke(i))return[xr({creationOptions:t,connectionOptions:e,chain:i,sponsorGas:o}),i];if(s.factoryAddress&&!((P=s.overrides)!=null&&P.entrypointAddress)){const x=await ht(s.factoryAddress,a,i);x&&(s.overrides={...s.overrides,entrypointAddress:x})}(g=s.overrides)!=null&&g.tokenPaymaster&&!((p=s.overrides)!=null&&p.entrypointAddress)&&(s.overrides={...s.overrides,entrypointAddress:Ke});const c=s.factoryAddress??Ht((b=s.overrides)==null?void 0:b.entrypointAddress),d=I({client:a,address:c,chain:i}),l=await ea({factoryContract:d,adminAddress:n.address,predictAddressOverride:(h=s.overrides)==null?void 0:h.predictAddress,accountSalt:(m=s.overrides)==null?void 0:m.accountSalt,accountAddress:(f=s.overrides)==null?void 0:f.accountAddress}).then(x=>x).catch(x=>{throw new Error(`Failed to get account address with factory contract ${d.address} on chain ID ${i.id}: ${(x==null?void 0:x.message)||"unknown error"}`,{cause:x})}),y=I({client:a,address:l,chain:i}),u=await br({...s,chain:i,sponsorGas:o,personalAccount:n,accountContract:y,factoryContract:d,client:a});if(gt.set(n,u),ie.set(u,n),s.sessionKey&&await Ga({accountContract:y,sessionKeyAddress:s.sessionKey.address,newPermissions:s.sessionKey.permissions})){const x=Aa({account:n,contract:y,permissions:s.sessionKey.permissions,sessionKeyAddress:s.sessionKey.address});await qn({account:u,transaction:x})}return[u,i]}async function Pr(e){const t=ie.get(e);t&&(gt.delete(t),ie.delete(e))}async function br(e){var r,s;const t=(r=e.overrides)==null?void 0:r.tokenPaymaster;if(t&&le(((s=e.overrides)==null?void 0:s.entrypointAddress)||L)!=="v0.7")throw new Error("Token paymaster is only supported for entrypoint version v0.7");let n=e.accountContract;const a={address:F(n.address),async sendTransaction(i){var l,y,u;let o;if(t){await wr({accountContract:n,erc20Paymaster:t,options:e});const P=async()=>({paymaster:t.paymasterAddress,paymasterData:"0x"});o=((l=e.overrides)==null?void 0:l.paymaster)||P}else o=(y=e.overrides)==null?void 0:y.paymaster;i.chainId!==n.chain.id&&(n=I({address:a.address,chain:z(i.chainId),client:e.client}));const c=ot({accountContract:n,transaction:i,executeOverride:(u=e.overrides)==null?void 0:u.execute}),d=await oe({executeTx:c,options:{...e,chain:z(i.chainId),accountContract:n,overrides:{...e.overrides,paymaster:o}}});return K({client:e.client,chainId:e.chain.id,transactionHash:d.transactionHash,walletAddress:e.accountContract.address,walletType:"smart",contractAddress:i.to??void 0}),d},async sendBatchTransaction(i){var d,l,y;const o=ta({accountContract:n,transactions:i,executeBatchOverride:(d=e.overrides)==null?void 0:d.executeBatch}),c=await oe({executeTx:o,options:{...e,chain:z(((l=i[0])==null?void 0:l.chainId)??e.chain.id),accountContract:n}});return K({client:e.client,chainId:e.chain.id,transactionHash:c.transactionHash,walletAddress:e.accountContract.address,walletType:"smart",contractAddress:((y=i[0])==null?void 0:y.to)??void 0}),c},async signMessage({message:i}){var c;if((c=e.overrides)!=null&&c.signMessage)return e.overrides.signMessage({adminAccount:e.personalAccount,factoryContract:e.factoryContract,accountContract:n,message:i});const{smartAccountSignMessage:o}=await A(async()=>{const{smartAccountSignMessage:d}=await import("./signing-D24nz3yp.js");return{smartAccountSignMessage:d}},__vite__mapDeps([12,1,2,3,4,10]));return o({accountContract:n,factoryContract:e.factoryContract,options:e,message:i})},async signTypedData(i){var c;if((c=e.overrides)!=null&&c.signTypedData)return e.overrides.signTypedData({adminAccount:e.personalAccount,factoryContract:e.factoryContract,accountContract:n,typedData:i});const{smartAccountSignTypedData:o}=await A(async()=>{const{smartAccountSignTypedData:d}=await import("./signing-D24nz3yp.js");return{smartAccountSignTypedData:d}},__vite__mapDeps([12,1,2,3,4,10]));return o({accountContract:n,factoryContract:e.factoryContract,options:e,typedData:i})},async onTransactionRequested(i){var o,c;return(c=(o=e.personalAccount).onTransactionRequested)==null?void 0:c.call(o,i)}};return a}async function wr(e){var l;const{accountContract:t,erc20Paymaster:n,options:a}=e,r=n.tokenAddress,s=I({address:r,chain:t.chain,client:t.client});if(await sa({contract:s,owner:t.address,spender:n.paymasterAddress})>0n)return;const o=ua({contract:s,spender:n.paymasterAddress,amountWei:Ba-1n}),c=await ye({transaction:o,from:t.address}),d=ot({accountContract:t,transaction:c,executeOverride:(l=a.overrides)==null?void 0:l.execute});await oe({executeTx:d,options:{...a,overrides:{...a.overrides,tokenPaymaster:void 0}}})}function xr(e){const{creationOptions:t,connectionOptions:n,chain:a}=e,r={address:n.personalAccount.address,async sendTransaction(s){var l,y,u,P;const i={data:s.data,to:s.to??void 0,value:s.value??0n,chain:z(s.chainId),client:n.client,eip712:s.eip712};let o=await fe({account:r,transaction:i});if(e.sponsorGas&&!o.paymaster){const g=await fr({options:{client:n.client,chain:a,bundlerUrl:(l=t.overrides)==null?void 0:l.bundlerUrl,entrypointAddress:(y=t.overrides)==null?void 0:y.entrypointAddress},transaction:o});o={...o,...g}}const c=await pe({account:r,chainId:a.id,eip712Transaction:o}),d=await gr({options:{client:n.client,chain:a,bundlerUrl:(u=t.overrides)==null?void 0:u.bundlerUrl,entrypointAddress:(P=t.overrides)==null?void 0:P.entrypointAddress},transaction:o,signedTransaction:c});return K({client:n.client,chainId:a.id,transactionHash:d.transactionHash,walletAddress:r.address,walletType:"smart",contractAddress:s.to??void 0}),{transactionHash:d.transactionHash,client:n.client,chain:a}},async signMessage({message:s}){return n.personalAccount.signMessage({message:s})},async signTypedData(s){const i=kt(s);return n.personalAccount.signTypedData(i)},async onTransactionRequested(s){var i,o;return(o=(i=n.personalAccount).onTransactionRequested)==null?void 0:o.call(i,s)}};return r}async function oe(e){var a,r,s;const{executeTx:t,options:n}=e;try{const i=await ar({transaction:t,factoryContract:n.factoryContract,accountContract:n.accountContract,adminAddress:n.personalAccount.address,sponsorGas:n.sponsorGas,overrides:n.overrides}),o=await or({client:n.client,chain:n.chain,adminAccount:n.personalAccount,entrypointAddress:(a=n.overrides)==null?void 0:a.entrypointAddress,userOp:i}),c={chain:n.chain,client:n.client,bundlerUrl:(r=n.overrides)==null?void 0:r.bundlerUrl,entrypointAddress:(s=n.overrides)==null?void 0:s.entrypointAddress},d=await lr({options:c,userOp:o}),l=await nr({...c,userOpHash:d});return K({client:n.client,chainId:n.chain.id,transactionHash:l.transactionHash,walletAddress:n.accountContract.address,walletType:"smart",contractAddress:await w(t.to??void 0)}),{client:n.client,chain:n.chain,transactionHash:l.transactionHash}}finally{yt(n.accountContract)}}async function ht(e,t,n){const a=I({address:e,client:t,chain:n});try{return await S({contract:a,method:"function entrypoint() public view returns (address)"})}catch{return}}const vr=Object.freeze(Object.defineProperty({__proto__:null,connectSmartAccount:hr,disconnectSmartAccount:Pr,getEntrypointFromFactory:ht},Symbol.toStringTag,{value:"Module"}));export{Ze as Z,it as a,Yn as b,st as c,U as e,vr as i,Zt as p,cn as t};
