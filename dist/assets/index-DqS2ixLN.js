import{t as j,w as Fn,x as ss,y as U,z as J,A as _e,C as He,D as qn,E as Ia}from"./main-D9Rw4yiO.js";function Ma(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var zn={},yt={},Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.walletLogo=void 0;const Aa=(e,t)=>{let r;switch(e){case"standard":return r=t,`data:image/svg+xml,%3Csvg width='${t}' height='${r}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return r=t,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${t}' height='${r}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return r=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return r=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return r=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return r=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;default:return r=t,`data:image/svg+xml,%3Csvg width='${t}' height='${r}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `}};Zt.walletLogo=Aa;var Yt={},as={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,d,p){this.fn=c,this.context=d,this.once=p||!1}function s(c,d,p,h,_){if(typeof p!="function")throw new TypeError("The listener must be a function");var g=new i(p,h||c,_),w=r?r+d:d;return c._events[w]?c._events[w].fn?c._events[w]=[c._events[w],g]:c._events[w].push(g):(c._events[w]=g,c._eventsCount++),c}function a(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],p,h;if(this._eventsCount===0)return d;for(h in p=this._events)t.call(p,h)&&d.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(p)):d},o.prototype.listeners=function(d){var p=r?r+d:d,h=this._events[p];if(!h)return[];if(h.fn)return[h.fn];for(var _=0,g=h.length,w=new Array(g);_<g;_++)w[_]=h[_].fn;return w},o.prototype.listenerCount=function(d){var p=r?r+d:d,h=this._events[p];return h?h.fn?1:h.length:0},o.prototype.emit=function(d,p,h,_,g,w){var k=r?r+d:d;if(!this._events[k])return!1;var m=this._events[k],f=arguments.length,y,E;if(m.fn){switch(m.once&&this.removeListener(d,m.fn,void 0,!0),f){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,p),!0;case 3:return m.fn.call(m.context,p,h),!0;case 4:return m.fn.call(m.context,p,h,_),!0;case 5:return m.fn.call(m.context,p,h,_,g),!0;case 6:return m.fn.call(m.context,p,h,_,g,w),!0}for(E=1,y=new Array(f-1);E<f;E++)y[E-1]=arguments[E];m.fn.apply(m.context,y)}else{var S=m.length,R;for(E=0;E<S;E++)switch(m[E].once&&this.removeListener(d,m[E].fn,void 0,!0),f){case 1:m[E].fn.call(m[E].context);break;case 2:m[E].fn.call(m[E].context,p);break;case 3:m[E].fn.call(m[E].context,p,h);break;case 4:m[E].fn.call(m[E].context,p,h,_);break;default:if(!y)for(R=1,y=new Array(f-1);R<f;R++)y[R-1]=arguments[R];m[E].fn.apply(m[E].context,y)}}return!0},o.prototype.on=function(d,p,h){return s(this,d,p,h,!1)},o.prototype.once=function(d,p,h){return s(this,d,p,h,!0)},o.prototype.removeListener=function(d,p,h,_){var g=r?r+d:d;if(!this._events[g])return this;if(!p)return a(this,g),this;var w=this._events[g];if(w.fn)w.fn===p&&(!_||w.once)&&(!h||w.context===h)&&a(this,g);else{for(var k=0,m=[],f=w.length;k<f;k++)(w[k].fn!==p||_&&!w[k].once||h&&w[k].context!==h)&&m.push(w[k]);m.length?this._events[g]=m.length===1?m[0]:m:a(this,g)}return this},o.prototype.removeAllListeners=function(d){var p;return d?(p=r?r+d:d,this._events[p]&&a(this,p)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(as);var La=as.exports,we={},Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.errorValues=Pe.standardErrorCodes=void 0;Pe.standardErrorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}};Pe.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}};var Jt={},Kn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serialize=e.getErrorCode=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=Pe,r="Unspecified error message.";e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function n(_,g=r){if(_&&Number.isInteger(_)){const w=_.toString();if(p(t.errorValues,w))return t.errorValues[w].message;if(c(_))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return g}e.getMessageFromCode=n;function i(_){if(!Number.isInteger(_))return!1;const g=_.toString();return!!(t.errorValues[g]||c(_))}e.isValidCode=i;function s(_){var g;if(typeof _=="number")return _;if(a(_))return(g=_.code)!==null&&g!==void 0?g:_.errorCode}e.getErrorCode=s;function a(_){return typeof _=="object"&&_!==null&&(typeof _.code=="number"||typeof _.errorCode=="number")}function o(_,{shouldIncludeStack:g=!1}={}){const w={};if(_&&typeof _=="object"&&!Array.isArray(_)&&p(_,"code")&&i(_.code)){const k=_;w.code=k.code,k.message&&typeof k.message=="string"?(w.message=k.message,p(k,"data")&&(w.data=k.data)):(w.message=n(w.code),w.data={originalError:d(_)})}else w.code=t.standardErrorCodes.rpc.internal,w.message=h(_,"message")?_.message:r,w.data={originalError:d(_)};return g&&(w.stack=h(_,"stack")?_.stack:void 0),w}e.serialize=o;function c(_){return _>=-32099&&_<=-32e3}function d(_){return _&&typeof _=="object"&&!Array.isArray(_)?Object.assign({},_):_}function p(_,g){return Object.prototype.hasOwnProperty.call(_,g)}function h(_,g){return typeof _=="object"&&_!==null&&g in _&&typeof _[g]=="string"}})(Kn);Object.defineProperty(Jt,"__esModule",{value:!0});Jt.standardErrors=void 0;const X=Pe,os=Kn;Jt.standardErrors={rpc:{parse:e=>le(X.standardErrorCodes.rpc.parse,e),invalidRequest:e=>le(X.standardErrorCodes.rpc.invalidRequest,e),invalidParams:e=>le(X.standardErrorCodes.rpc.invalidParams,e),methodNotFound:e=>le(X.standardErrorCodes.rpc.methodNotFound,e),internal:e=>le(X.standardErrorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return le(t,e)},invalidInput:e=>le(X.standardErrorCodes.rpc.invalidInput,e),resourceNotFound:e=>le(X.standardErrorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>le(X.standardErrorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>le(X.standardErrorCodes.rpc.transactionRejected,e),methodNotSupported:e=>le(X.standardErrorCodes.rpc.methodNotSupported,e),limitExceeded:e=>le(X.standardErrorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>et(X.standardErrorCodes.provider.userRejectedRequest,e),unauthorized:e=>et(X.standardErrorCodes.provider.unauthorized,e),unsupportedMethod:e=>et(X.standardErrorCodes.provider.unsupportedMethod,e),disconnected:e=>et(X.standardErrorCodes.provider.disconnected,e),chainDisconnected:e=>et(X.standardErrorCodes.provider.chainDisconnected,e),unsupportedChain:e=>et(X.standardErrorCodes.provider.unsupportedChain,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new us(t,r,n)}}};function le(e,t){const[r,n]=cs(t);return new ls(e,r||(0,os.getMessageFromCode)(e),n)}function et(e,t){const[r,n]=cs(t);return new us(e,r||(0,os.getMessageFromCode)(e),n)}function cs(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}class ls extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=t,n!==void 0&&(this.data=n)}}class us extends ls{constructor(t,r,n){if(!Ta(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,r,n)}}function Ta(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.standardErrors=e.standardErrorCodes=void 0;var t=Pe;Object.defineProperty(e,"standardErrorCodes",{enumerable:!0,get:function(){return t.standardErrorCodes}});var r=Jt;Object.defineProperty(e,"standardErrors",{enumerable:!0,get:function(){return r.standardErrors}})})(we);var Qt={},ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.isErrorResponse=void 0;function Pa(e){return e.errorMessage!==void 0}ut.isErrorResponse=Pa;var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.LIB_VERSION=void 0;Ke.LIB_VERSION="4.0.3";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.serializeError=void 0;const Na=ut,Oa=Ke,Da=Pe,ja=Kn;function Ba(e,t){const r=(0,ja.serialize)(Wa(e),{shouldIncludeStack:!0}),n=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");n.searchParams.set("version",Oa.LIB_VERSION),n.searchParams.set("code",r.code.toString());const i=Ua(r.data,t);return i&&n.searchParams.set("method",i),n.searchParams.set("message",r.message),Object.assign(Object.assign({},r),{docUrl:n.href})}Qt.serializeError=Ba;function Wa(e){return typeof e=="string"?{message:e,code:Da.standardErrorCodes.rpc.internal}:(0,Na.isErrorResponse)(e)?Object.assign(Object.assign({},e),{message:e.errorMessage,code:e.errorCode,data:{method:e.method}}):e}function Ua(e,t){const r=e==null?void 0:e.method;if(r)return r;if(t!==void 0){if(typeof t=="string")return t;if(Array.isArray(t)){if(t.length>0)return t[0].method}else return t.method}}var ee={};Object.defineProperty(ee,"__esModule",{value:!0});ee.RegExpString=ee.IntNumber=ee.BigIntString=ee.AddressString=ee.HexString=ee.OpaqueType=void 0;function St(){return e=>e}ee.OpaqueType=St;ee.HexString=St();ee.AddressString=St();ee.BigIntString=St();function Ha(e){return Math.floor(e)}ee.IntNumber=Ha;ee.RegExpString=St();var M={};Object.defineProperty(M,"__esModule",{value:!0});M.areAddressArraysEqual=M.getFavicon=M.range=M.isBigNumber=M.ensureParsedJSONObject=M.ensureBigInt=M.ensureRegExpString=M.ensureIntNumber=M.ensureBuffer=M.ensureAddressString=M.ensureEvenLengthHexString=M.ensureHexString=M.isHexString=M.prepend0x=M.strip0x=M.has0xPrefix=M.hexStringFromIntNumber=M.intNumberFromHexString=M.bigIntStringFromBigInt=M.hexStringFromBuffer=M.hexStringToUint8Array=M.uint8ArrayToHex=M.randomBytesHex=void 0;const Ve=we,de=ee,ds=/^[0-9]*$/,hs=/^[a-f0-9]*$/;function $a(e){return fs(crypto.getRandomValues(new Uint8Array(e)))}M.randomBytesHex=$a;function fs(e){return[...e].map(t=>t.toString(16).padStart(2,"0")).join("")}M.uint8ArrayToHex=fs;function Fa(e){return new Uint8Array(e.match(/.{1,2}/g).map(t=>parseInt(t,16)))}M.hexStringToUint8Array=Fa;function qa(e,t=!1){const r=e.toString("hex");return(0,de.HexString)(t?`0x${r}`:r)}M.hexStringFromBuffer=qa;function za(e){return(0,de.BigIntString)(e.toString(10))}M.bigIntStringFromBigInt=za;function Ka(e){return(0,de.IntNumber)(Number(BigInt(xt(e,!0))))}M.intNumberFromHexString=Ka;function Va(e){return(0,de.HexString)(`0x${BigInt(e).toString(16)}`)}M.hexStringFromIntNumber=Va;function Vn(e){return e.startsWith("0x")||e.startsWith("0X")}M.has0xPrefix=Vn;function Xt(e){return Vn(e)?e.slice(2):e}M.strip0x=Xt;function _s(e){return Vn(e)?`0x${e.slice(2)}`:`0x${e}`}M.prepend0x=_s;function Ct(e){if(typeof e!="string")return!1;const t=Xt(e).toLowerCase();return hs.test(t)}M.isHexString=Ct;function ps(e,t=!1){if(typeof e=="string"){const r=Xt(e).toLowerCase();if(hs.test(r))return(0,de.HexString)(t?`0x${r}`:r)}throw Ve.standardErrors.rpc.invalidParams(`"${String(e)}" is not a hexadecimal string`)}M.ensureHexString=ps;function xt(e,t=!1){let r=ps(e,!1);return r.length%2===1&&(r=(0,de.HexString)(`0${r}`)),t?(0,de.HexString)(`0x${r}`):r}M.ensureEvenLengthHexString=xt;function Ga(e){if(typeof e=="string"){const t=Xt(e).toLowerCase();if(Ct(t)&&t.length===40)return(0,de.AddressString)(_s(t))}throw Ve.standardErrors.rpc.invalidParams(`Invalid Ethereum address: ${String(e)}`)}M.ensureAddressString=Ga;function Za(e){if(j.isBuffer(e))return e;if(typeof e=="string"){if(Ct(e)){const t=xt(e,!1);return j.from(t,"hex")}return j.from(e,"utf8")}throw Ve.standardErrors.rpc.invalidParams(`Not binary data: ${String(e)}`)}M.ensureBuffer=Za;function gs(e){if(typeof e=="number"&&Number.isInteger(e))return(0,de.IntNumber)(e);if(typeof e=="string"){if(ds.test(e))return(0,de.IntNumber)(Number(e));if(Ct(e))return(0,de.IntNumber)(Number(BigInt(xt(e,!0))))}throw Ve.standardErrors.rpc.invalidParams(`Not an integer: ${String(e)}`)}M.ensureIntNumber=gs;function Ya(e){if(e instanceof RegExp)return(0,de.RegExpString)(e.toString());throw Ve.standardErrors.rpc.invalidParams(`Not a RegExp: ${String(e)}`)}M.ensureRegExpString=Ya;function Ja(e){if(e!==null&&(typeof e=="bigint"||bs(e)))return BigInt(e.toString(10));if(typeof e=="number")return BigInt(gs(e));if(typeof e=="string"){if(ds.test(e))return BigInt(e);if(Ct(e))return BigInt(xt(e,!0))}throw Ve.standardErrors.rpc.invalidParams(`Not an integer: ${String(e)}`)}M.ensureBigInt=Ja;function Qa(e){if(typeof e=="string")return JSON.parse(e);if(typeof e=="object")return e;throw Ve.standardErrors.rpc.invalidParams(`Not a JSON string or an object: ${String(e)}`)}M.ensureParsedJSONObject=Qa;function bs(e){if(e==null||typeof e.constructor!="function")return!1;const{constructor:t}=e;return typeof t.config=="function"&&typeof t.EUCLID=="number"}M.isBigNumber=bs;function Xa(e,t){return Array.from({length:t-e},(r,n)=>e+n)}M.range=Xa;function eo(){const e=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:t,host:r}=document.location,n=e?e.getAttribute("href"):null;return!n||n.startsWith("javascript:")||n.startsWith("vbscript:")?null:n.startsWith("http://")||n.startsWith("https://")||n.startsWith("data:")?n:n.startsWith("//")?t+n:`${t}//${r}${n}`}M.getFavicon=eo;function to(e,t){return e.length===t.length&&e.every((r,n)=>r===t[n])}M.areAddressArraysEqual=to;var ve={},er={},tr={},G={};Object.defineProperty(G,"__esModule",{value:!0});G.decryptContent=G.encryptContent=G.importKeyFromHexString=G.exportKeyToHexString=G.decrypt=G.encrypt=G.deriveSharedSecret=G.generateKeyPair=void 0;const vs=M;async function ro(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])}G.generateKeyPair=ro;async function no(e,t){return crypto.subtle.deriveKey({name:"ECDH",public:t},e,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}G.deriveSharedSecret=no;async function ys(e,t){const r=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},e,new TextEncoder().encode(t));return{iv:r,cipherText:n}}G.encrypt=ys;async function ms(e,{iv:t,cipherText:r}){const n=await crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,r);return new TextDecoder().decode(n)}G.decrypt=ms;function ws(e){switch(e){case"public":return"spki";case"private":return"pkcs8"}}async function io(e,t){const r=ws(e),n=await crypto.subtle.exportKey(r,t);return(0,vs.uint8ArrayToHex)(new Uint8Array(n))}G.exportKeyToHexString=io;async function so(e,t){const r=ws(e),n=(0,vs.hexStringToUint8Array)(t).buffer;return await crypto.subtle.importKey(r,n,{name:"ECDH",namedCurve:"P-256"},!0,e==="private"?["deriveKey"]:[])}G.importKeyFromHexString=so;async function ao(e,t){const r=JSON.stringify(e,(n,i)=>{if(!(i instanceof Error))return i;const s=i;return Object.assign(Object.assign({},s.code?{code:s.code}:{}),{message:s.message})});return ys(t,r)}G.encryptContent=ao;async function oo(e,t){return JSON.parse(await ms(t,e))}G.decryptContent=oo;var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.ScopedLocalStorage=void 0;class Kt{constructor(t,r){this.scope=t,this.module=r}setItem(t,r){localStorage.setItem(this.scopedKey(t),r)}getItem(t){return localStorage.getItem(this.scopedKey(t))}removeItem(t){localStorage.removeItem(this.scopedKey(t))}clear(){const t=this.scopedKey(""),r=[];for(let n=0;n<localStorage.length;n++){const i=localStorage.key(n);typeof i=="string"&&i.startsWith(t)&&r.push(i)}r.forEach(n=>localStorage.removeItem(n))}scopedKey(t){return`-${this.scope}${this.module?`:${this.module}`:""}:${t}`}static clearAll(){new Kt("CBWSDK").clear(),new Kt("walletlink").clear()}}Ee.ScopedLocalStorage=Kt;Object.defineProperty(tr,"__esModule",{value:!0});tr.SCWKeyManager=void 0;const Ot=G,co=Ee,bn={storageKey:"ownPrivateKey",keyType:"private"},vn={storageKey:"ownPublicKey",keyType:"public"},yn={storageKey:"peerPublicKey",keyType:"public"};class lo{constructor(){this.storage=new co.ScopedLocalStorage("CBWSDK","SCWKeyManager"),this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}async getOwnPublicKey(){return await this.loadKeysIfNeeded(),this.ownPublicKey}async getSharedSecret(){return await this.loadKeysIfNeeded(),this.sharedSecret}async setPeerPublicKey(t){this.sharedSecret=null,this.peerPublicKey=t,await this.storeKey(yn,t),await this.loadKeysIfNeeded()}async clear(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,this.storage.removeItem(vn.storageKey),this.storage.removeItem(bn.storageKey),this.storage.removeItem(yn.storageKey)}async generateKeyPair(){const t=await(0,Ot.generateKeyPair)();this.ownPrivateKey=t.privateKey,this.ownPublicKey=t.publicKey,await this.storeKey(bn,t.privateKey),await this.storeKey(vn,t.publicKey)}async loadKeysIfNeeded(){if(this.ownPrivateKey===null&&(this.ownPrivateKey=await this.loadKey(bn)),this.ownPublicKey===null&&(this.ownPublicKey=await this.loadKey(vn)),(this.ownPrivateKey===null||this.ownPublicKey===null)&&await this.generateKeyPair(),this.peerPublicKey===null&&(this.peerPublicKey=await this.loadKey(yn)),this.sharedSecret===null){if(this.ownPrivateKey===null||this.peerPublicKey===null)return;this.sharedSecret=await(0,Ot.deriveSharedSecret)(this.ownPrivateKey,this.peerPublicKey)}}async loadKey(t){const r=this.storage.getItem(t.storageKey);return r?(0,Ot.importKeyFromHexString)(t.keyType,r):null}async storeKey(t,r){const n=await(0,Ot.exportKeyToHexString)(t.keyType,r);this.storage.setItem(t.storageKey,n)}}tr.SCWKeyManager=lo;var rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.SCWStateManager=void 0;const uo=Ee,si="accounts",ai="activeChain",oi="availableChains",ci="walletCapabilities";class ho{get accounts(){return this._accounts}get activeChain(){return this._activeChain}get walletCapabilities(){return this._walletCapabilities}constructor(t){var r,n;this.storage=new uo.ScopedLocalStorage("CBWSDK","SCWStateManager"),this.updateListener=t.updateListener,this.availableChains=this.loadItemFromStorage(oi),this._walletCapabilities=this.loadItemFromStorage(ci);const i=this.loadItemFromStorage(si),s=this.loadItemFromStorage(ai);i&&this.updateListener.onAccountsUpdate({accounts:i,source:"storage"}),s&&this.updateListener.onChainUpdate({chain:s,source:"storage"}),this._accounts=i||[],this._activeChain=s||{id:(n=(r=t.appChainIds)===null||r===void 0?void 0:r[0])!==null&&n!==void 0?n:1}}updateAccounts(t){this._accounts=t,this.storeItemToStorage(si,t),this.updateListener.onAccountsUpdate({accounts:t,source:"wallet"})}switchChain(t){var r;const n=(r=this.availableChains)===null||r===void 0?void 0:r.find(i=>i.id===t);return n?(n===this._activeChain||(this._activeChain=n,this.storeItemToStorage(ai,n),this.updateListener.onChainUpdate({chain:n,source:"wallet"})),!0):!1}updateAvailableChains(t){if(!t||Object.keys(t).length===0)return;const r=Object.entries(t).map(([n,i])=>({id:Number(n),rpcUrl:i}));this.availableChains=r,this.storeItemToStorage(oi,r),this.switchChain(this._activeChain.id)}updateWalletCapabilities(t){this._walletCapabilities=t,this.storeItemToStorage(ci,t)}storeItemToStorage(t,r){this.storage.setItem(t,JSON.stringify(r))}loadItemFromStorage(t){const r=this.storage.getItem(t);return r?JSON.parse(r):void 0}clear(){this.storage.clear()}}rr.SCWStateManager=ho;Object.defineProperty(er,"__esModule",{value:!0});er.SCWSigner=void 0;const fo=tr,_o=rr,Dt=we,li=M,jt=G;class po{constructor(t){this.metadata=t.metadata,this.communicator=t.communicator,this.keyManager=new fo.SCWKeyManager,this.stateManager=new _o.SCWStateManager({appChainIds:this.metadata.appChainIds,updateListener:t.updateListener}),this.handshake=this.handshake.bind(this),this.request=this.request.bind(this),this.createRequestMessage=this.createRequestMessage.bind(this),this.decryptResponseMessage=this.decryptResponseMessage.bind(this)}async handshake(){const t=await this.createRequestMessage({handshake:{method:"eth_requestAccounts",params:this.metadata}}),r=await this.communicator.postRequestAndWaitForResponse(t);if("failure"in r.content)throw r.content.failure;const n=await(0,jt.importKeyFromHexString)("public",r.sender);await this.keyManager.setPeerPublicKey(n);const i=await this.decryptResponseMessage(r);this.updateInternalState({method:"eth_requestAccounts"},i);const s=i.result;if("error"in s)throw s.error;return this.stateManager.accounts}async request(t){const r=this.tryLocalHandling(t);if(r!==void 0){if(r instanceof Error)throw r;return r}await this.communicator.waitForPopupLoaded();const n=await this.sendEncryptedRequest(t),i=await this.decryptResponseMessage(n);this.updateInternalState(t,i);const s=i.result;if("error"in s)throw s.error;return s.value}async disconnect(){this.stateManager.clear(),await this.keyManager.clear()}tryLocalHandling(t){var r;switch(t.method){case"wallet_switchEthereumChain":{const n=t.params;if(!n||!(!((r=n[0])===null||r===void 0)&&r.chainId))throw Dt.standardErrors.rpc.invalidParams();const i=(0,li.ensureIntNumber)(n[0].chainId);return this.stateManager.switchChain(i)?null:void 0}case"wallet_getCapabilities":{const n=this.stateManager.walletCapabilities;if(!n)throw Dt.standardErrors.provider.unauthorized("No wallet capabilities found, please disconnect and reconnect");return n}default:return}}async sendEncryptedRequest(t){const r=await this.keyManager.getSharedSecret();if(!r)throw Dt.standardErrors.provider.unauthorized("No valid session found, try requestAccounts before other methods");const n=await(0,jt.encryptContent)({action:t,chainId:this.stateManager.activeChain.id},r),i=await this.createRequestMessage({encrypted:n});return this.communicator.postRequestAndWaitForResponse(i)}async createRequestMessage(t){const r=await(0,jt.exportKeyToHexString)("public",await this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),sender:r,content:t,timestamp:new Date}}async decryptResponseMessage(t){const r=t.content;if("failure"in r)throw r.failure;const n=await this.keyManager.getSharedSecret();if(!n)throw Dt.standardErrors.provider.unauthorized("Invalid session");return(0,jt.decryptContent)(r.encrypted,n)}updateInternalState(t,r){var n,i;const s=(n=r.data)===null||n===void 0?void 0:n.chains;s&&this.stateManager.updateAvailableChains(s);const a=(i=r.data)===null||i===void 0?void 0:i.capabilities;a&&this.stateManager.updateWalletCapabilities(a);const o=r.result;if(!("error"in o))switch(t.method){case"eth_requestAccounts":{const c=o.value;this.stateManager.updateAccounts(c);break}case"wallet_switchEthereumChain":{if(o.value!==null)return;const c=t.params,d=(0,li.ensureIntNumber)(c[0].chainId);this.stateManager.switchChain(d);break}}}}er.SCWSigner=po;var nr={},Nn={exports:{}};function Q(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var Es=Q;Q.EventEmitter=Q;Q.prototype._events=void 0;Q.prototype._maxListeners=void 0;Q.defaultMaxListeners=10;Q.prototype.setMaxListeners=function(e){if(!go(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this};Q.prototype.emit=function(e){var t,r,n,i,s,a;if(this._events||(this._events={}),e==="error"&&(!this._events.error||mt(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var o=new Error('Uncaught, unspecified "error" event. ('+t+")");throw o.context=t,o}if(r=this._events[e],Ss(r))return!1;if(Ne(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(mt(r))for(i=Array.prototype.slice.call(arguments,1),a=r.slice(),n=a.length,s=0;s<n;s++)a[s].apply(this,i);return!0};Q.prototype.addListener=function(e,t){var r;if(!Ne(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,Ne(t.listener)?t.listener:t),this._events[e]?mt(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,mt(this._events[e])&&!this._events[e].warned&&(Ss(this._maxListeners)?r=Q.defaultMaxListeners:r=this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),typeof console.trace=="function"&&console.trace())),this};Q.prototype.on=Q.prototype.addListener;Q.prototype.once=function(e,t){if(!Ne(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this};Q.prototype.removeListener=function(e,t){var r,n,i,s;if(!Ne(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],i=r.length,n=-1,r===t||Ne(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(mt(r)){for(s=i;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}if(n<0)return this;r.length===1?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this};Q.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[e]&&delete this._events[e],this;if(arguments.length===0){for(t in this._events)t!=="removeListener"&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],Ne(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this};Q.prototype.listeners=function(e){var t;return!this._events||!this._events[e]?t=[]:Ne(this._events[e])?t=[this._events[e]]:t=this._events[e].slice(),t};Q.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(Ne(t))return 1;if(t)return t.length}return 0};Q.listenerCount=function(e,t){return e.listenerCount(t)};function Ne(e){return typeof e=="function"}function go(e){return typeof e=="number"}function mt(e){return typeof e=="object"&&e!==null}function Ss(e){return e===void 0}var Cs=Es.EventEmitter,mn,ui;function bo(){if(ui)return mn;ui=1;function e(w,k){var m=Object.keys(w);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(w);k&&(f=f.filter(function(y){return Object.getOwnPropertyDescriptor(w,y).enumerable})),m.push.apply(m,f)}return m}function t(w){for(var k=1;k<arguments.length;k++){var m=arguments[k]!=null?arguments[k]:{};k%2?e(Object(m),!0).forEach(function(f){r(w,f,m[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(m)):e(Object(m)).forEach(function(f){Object.defineProperty(w,f,Object.getOwnPropertyDescriptor(m,f))})}return w}function r(w,k,m){return k=a(k),k in w?Object.defineProperty(w,k,{value:m,enumerable:!0,configurable:!0,writable:!0}):w[k]=m,w}function n(w,k){if(!(w instanceof k))throw new TypeError("Cannot call a class as a function")}function i(w,k){for(var m=0;m<k.length;m++){var f=k[m];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(w,a(f.key),f)}}function s(w,k,m){return k&&i(w.prototype,k),Object.defineProperty(w,"prototype",{writable:!1}),w}function a(w){var k=o(w,"string");return typeof k=="symbol"?k:String(k)}function o(w,k){if(typeof w!="object"||w===null)return w;var m=w[Symbol.toPrimitive];if(m!==void 0){var f=m.call(w,k||"default");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(w)}var c=Fn,d=c.Buffer,p=ss,h=p.inspect,_=h&&h.custom||"inspect";function g(w,k,m){d.prototype.copy.call(w,k,m)}return mn=function(){function w(){n(this,w),this.head=null,this.tail=null,this.length=0}return s(w,[{key:"push",value:function(m){var f={data:m,next:null};this.length>0?this.tail.next=f:this.head=f,this.tail=f,++this.length}},{key:"unshift",value:function(m){var f={data:m,next:this.head};this.length===0&&(this.tail=f),this.head=f,++this.length}},{key:"shift",value:function(){if(this.length!==0){var m=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(this.length===0)return"";for(var f=this.head,y=""+f.data;f=f.next;)y+=m+f.data;return y}},{key:"concat",value:function(m){if(this.length===0)return d.alloc(0);for(var f=d.allocUnsafe(m>>>0),y=this.head,E=0;y;)g(y.data,f,E),E+=y.data.length,y=y.next;return f}},{key:"consume",value:function(m,f){var y;return m<this.head.data.length?(y=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):m===this.head.data.length?y=this.shift():y=f?this._getString(m):this._getBuffer(m),y}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var f=this.head,y=1,E=f.data;for(m-=E.length;f=f.next;){var S=f.data,R=m>S.length?S.length:m;if(R===S.length?E+=S:E+=S.slice(0,m),m-=R,m===0){R===S.length?(++y,f.next?this.head=f.next:this.head=this.tail=null):(this.head=f,f.data=S.slice(R));break}++y}return this.length-=y,E}},{key:"_getBuffer",value:function(m){var f=d.allocUnsafe(m),y=this.head,E=1;for(y.data.copy(f),m-=y.data.length;y=y.next;){var S=y.data,R=m>S.length?S.length:m;if(S.copy(f,f.length-m,0,R),m-=R,m===0){R===S.length?(++E,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=S.slice(R));break}++E}return this.length-=E,f}},{key:_,value:function(m,f){return h(this,t(t({},f),{},{depth:0,customInspect:!1}))}}]),w}(),mn}function vo(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,U.nextTick(On,this,e)):U.nextTick(On,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(s){!t&&s?r._writableState?r._writableState.errorEmitted?U.nextTick(Ft,r):(r._writableState.errorEmitted=!0,U.nextTick(di,r,s)):U.nextTick(di,r,s):t?(U.nextTick(Ft,r),t(s)):U.nextTick(Ft,r)}),this)}function di(e,t){On(e,t),Ft(e)}function Ft(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function yo(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function On(e,t){e.emit("error",t)}function mo(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}var xs={destroy:vo,undestroy:yo,errorOrDestroy:mo},Ge={};function wo(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var ks={};function he(e,t,r){r||(r=Error);function n(s,a,o){return typeof t=="string"?t:t(s,a,o)}var i=function(s){wo(a,s);function a(o,c,d){return s.call(this,n(o,c,d))||this}return a}(r);i.prototype.name=r.name,i.prototype.code=e,ks[e]=i}function hi(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function Eo(e,t,r){return e.substr(0,t.length)===t}function So(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function Co(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}he("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);he("ERR_INVALID_ARG_TYPE",function(e,t,r){var n;typeof t=="string"&&Eo(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var i;if(So(e," argument"))i="The ".concat(e," ").concat(n," ").concat(hi(t,"type"));else{var s=Co(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(s," ").concat(n," ").concat(hi(t,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);he("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");he("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});he("ERR_STREAM_PREMATURE_CLOSE","Premature close");he("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});he("ERR_MULTIPLE_CALLBACK","Callback called multiple times");he("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");he("ERR_STREAM_WRITE_AFTER_END","write after end");he("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);he("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);he("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Ge.codes=ks;var xo=Ge.codes.ERR_INVALID_OPT_VALUE;function ko(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function Ro(e,t,r,n){var i=ko(t,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new xo(s,i)}return Math.floor(i)}return e.objectMode?16:16*1024}var Rs={getHighWaterMark:Ro},Io=Mo;function Mo(e,t){if(wn("noDeprecation"))return e;var r=!1;function n(){if(!r){if(wn("throwDeprecation"))throw new Error(t);wn("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}return n}function wn(e){try{if(!J.localStorage)return!1}catch{return!1}var t=J.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}var En,fi;function Is(){if(fi)return En;fi=1,En=P;function e(v){var b=this;this.next=null,this.entry=null,this.finish=function(){Re(b,v)}}var t;P.WritableState=A;var r={deprecate:Io},n=Cs,i=Fn.Buffer,s=(typeof J<"u"?J:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(v){return i.from(v)}function o(v){return i.isBuffer(v)||v instanceof s}var c=xs,d=Rs,p=d.getHighWaterMark,h=Ge.codes,_=h.ERR_INVALID_ARG_TYPE,g=h.ERR_METHOD_NOT_IMPLEMENTED,w=h.ERR_MULTIPLE_CALLBACK,k=h.ERR_STREAM_CANNOT_PIPE,m=h.ERR_STREAM_DESTROYED,f=h.ERR_STREAM_NULL_VALUES,y=h.ERR_STREAM_WRITE_AFTER_END,E=h.ERR_UNKNOWN_ENCODING,S=c.errorOrDestroy;_e(P,n);function R(){}function A(v,b,x){t=t||at(),v=v||{},typeof x!="boolean"&&(x=b instanceof t),this.objectMode=!!v.objectMode,x&&(this.objectMode=this.objectMode||!!v.writableObjectMode),this.highWaterMark=p(this,v,"writableHighWaterMark",x),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var L=v.decodeStrings===!1;this.decodeStrings=!L,this.defaultEncoding=v.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(O){je(b,O)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=v.emitClose!==!1,this.autoDestroy=!!v.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}A.prototype.getBuffer=function(){for(var b=this.bufferedRequest,x=[];b;)x.push(b),b=b.next;return x},function(){try{Object.defineProperty(A.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var W;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(W=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(b){return W.call(this,b)?!0:this!==P?!1:b&&b._writableState instanceof A}})):W=function(b){return b instanceof this};function P(v){t=t||at();var b=this instanceof t;if(!b&&!W.call(P,this))return new P(v);this._writableState=new A(v,this,b),this.writable=!0,v&&(typeof v.write=="function"&&(this._write=v.write),typeof v.writev=="function"&&(this._writev=v.writev),typeof v.destroy=="function"&&(this._destroy=v.destroy),typeof v.final=="function"&&(this._final=v.final)),n.call(this)}P.prototype.pipe=function(){S(this,new k)};function T(v,b){var x=new y;S(v,x),U.nextTick(b,x)}function $(v,b,x,L){var O;return x===null?O=new f:typeof x!="string"&&!b.objectMode&&(O=new _("chunk",["string","Buffer"],x)),O?(S(v,O),U.nextTick(L,O),!1):!0}P.prototype.write=function(v,b,x){var L=this._writableState,O=!1,l=!L.objectMode&&o(v);return l&&!i.isBuffer(v)&&(v=a(v)),typeof b=="function"&&(x=b,b=null),l?b="buffer":b||(b=L.defaultEncoding),typeof x!="function"&&(x=R),L.ending?T(this,x):(l||$(this,L,v,x))&&(L.pendingcb++,O=Se(this,L,l,v,b,x)),O},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var v=this._writableState;v.corked&&(v.corked--,!v.writing&&!v.corked&&!v.bufferProcessing&&v.bufferedRequest&&ce(this,v))},P.prototype.setDefaultEncoding=function(b){if(typeof b=="string"&&(b=b.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((b+"").toLowerCase())>-1))throw new E(b);return this._writableState.defaultEncoding=b,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function te(v,b,x){return!v.objectMode&&v.decodeStrings!==!1&&typeof b=="string"&&(b=i.from(b,x)),b}Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Se(v,b,x,L,O,l){if(!x){var u=te(b,L,O);L!==u&&(x=!0,O="buffer",L=u)}var C=b.objectMode?1:L.length;b.length+=C;var I=b.length<b.highWaterMark;if(I||(b.needDrain=!0),b.writing||b.corked){var F=b.lastBufferedRequest;b.lastBufferedRequest={chunk:L,encoding:O,isBuf:x,callback:l,next:null},F?F.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest,b.bufferedRequestCount+=1}else K(v,b,!1,C,L,O,l);return I}function K(v,b,x,L,O,l,u){b.writelen=L,b.writecb=u,b.writing=!0,b.sync=!0,b.destroyed?b.onwrite(new m("write")):x?v._writev(O,b.onwrite):v._write(O,l,b.onwrite),b.sync=!1}function ne(v,b,x,L,O){--b.pendingcb,x?(U.nextTick(O,L),U.nextTick(se,v,b),v._writableState.errorEmitted=!0,S(v,L)):(O(L),v._writableState.errorEmitted=!0,S(v,L),se(v,b))}function ie(v){v.writing=!1,v.writecb=null,v.length-=v.writelen,v.writelen=0}function je(v,b){var x=v._writableState,L=x.sync,O=x.writecb;if(typeof O!="function")throw new w;if(ie(x),b)ne(v,x,L,b,O);else{var l=xe(x)||v.destroyed;!l&&!x.corked&&!x.bufferProcessing&&x.bufferedRequest&&ce(v,x),L?U.nextTick(oe,v,x,l,O):oe(v,x,l,O)}}function oe(v,b,x,L){x||Ce(v,b),b.pendingcb--,L(),se(v,b)}function Ce(v,b){b.length===0&&b.needDrain&&(b.needDrain=!1,v.emit("drain"))}function ce(v,b){b.bufferProcessing=!0;var x=b.bufferedRequest;if(v._writev&&x&&x.next){var L=b.bufferedRequestCount,O=new Array(L),l=b.corkedRequestsFree;l.entry=x;for(var u=0,C=!0;x;)O[u]=x,x.isBuf||(C=!1),x=x.next,u+=1;O.allBuffers=C,K(v,b,!0,b.length,O,"",l.finish),b.pendingcb++,b.lastBufferedRequest=null,l.next?(b.corkedRequestsFree=l.next,l.next=null):b.corkedRequestsFree=new e(b),b.bufferedRequestCount=0}else{for(;x;){var I=x.chunk,F=x.encoding,N=x.callback,B=b.objectMode?1:I.length;if(K(v,b,!1,B,I,F,N),x=x.next,b.bufferedRequestCount--,b.writing)break}x===null&&(b.lastBufferedRequest=null)}b.bufferedRequest=x,b.bufferProcessing=!1}P.prototype._write=function(v,b,x){x(new g("_write()"))},P.prototype._writev=null,P.prototype.end=function(v,b,x){var L=this._writableState;return typeof v=="function"?(x=v,v=null,b=null):typeof b=="function"&&(x=b,b=null),v!=null&&this.write(v,b),L.corked&&(L.corked=1,this.uncork()),L.ending||We(this,L,x),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function xe(v){return v.ending&&v.length===0&&v.bufferedRequest===null&&!v.finished&&!v.writing}function Be(v,b){v._final(function(x){b.pendingcb--,x&&S(v,x),b.prefinished=!0,v.emit("prefinish"),se(v,b)})}function ke(v,b){!b.prefinished&&!b.finalCalled&&(typeof v._final=="function"&&!b.destroyed?(b.pendingcb++,b.finalCalled=!0,U.nextTick(Be,v,b)):(b.prefinished=!0,v.emit("prefinish")))}function se(v,b){var x=xe(b);if(x&&(ke(v,b),b.pendingcb===0&&(b.finished=!0,v.emit("finish"),b.autoDestroy))){var L=v._readableState;(!L||L.autoDestroy&&L.endEmitted)&&v.destroy()}return x}function We(v,b,x){b.ending=!0,se(v,b),x&&(b.finished?U.nextTick(x):v.once("finish",x)),b.ended=!0,v.writable=!1}function Re(v,b,x){var L=v.entry;for(v.entry=null;L;){var O=L.callback;b.pendingcb--,O(x),L=L.next}b.corkedRequestsFree.next=v}return Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(b){this._writableState&&(this._writableState.destroyed=b)}}),P.prototype.destroy=c.destroy,P.prototype._undestroy=c.undestroy,P.prototype._destroy=function(v,b){b(v)},En}var Sn,_i;function at(){if(_i)return Sn;_i=1;var e=Object.keys||function(d){var p=[];for(var h in d)p.push(h);return p};Sn=a;var t=As(),r=Is();_e(a,t);for(var n=e(r.prototype),i=0;i<n.length;i++){var s=n[i];a.prototype[s]||(a.prototype[s]=r.prototype[s])}function a(d){if(!(this instanceof a))return new a(d);t.call(this,d),r.call(this,d),this.allowHalfOpen=!0,d&&(d.readable===!1&&(this.readable=!1),d.writable===!1&&(this.writable=!1),d.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",o)))}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function o(){this._writableState.ended||U.nextTick(c,this)}function c(d){d.end()}return Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(p){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=p,this._writableState.destroyed=p)}}),Sn}var Cn={},pi;function gi(){if(pi)return Cn;pi=1;var e=He.Buffer,t=e.isEncoding||function(f){switch(f=""+f,f&&f.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(f){if(!f)return"utf8";for(var y;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(y)return;f=(""+f).toLowerCase(),y=!0}}function n(f){var y=r(f);if(typeof y!="string"&&(e.isEncoding===t||!t(f)))throw new Error("Unknown encoding: "+f);return y||f}Cn.StringDecoder=i;function i(f){this.encoding=n(f);var y;switch(this.encoding){case"utf16le":this.text=h,this.end=_,y=4;break;case"utf8":this.fillLast=c,y=4;break;case"base64":this.text=g,this.end=w,y=3;break;default:this.write=k,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(y)}i.prototype.write=function(f){if(f.length===0)return"";var y,E;if(this.lastNeed){if(y=this.fillLast(f),y===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<f.length?y?y+this.text(f,E):this.text(f,E):y||""},i.prototype.end=p,i.prototype.text=d,i.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length),this.lastNeed-=f.length};function s(f){return f<=127?0:f>>5===6?2:f>>4===14?3:f>>3===30?4:f>>6===2?-1:-2}function a(f,y,E){var S=y.length-1;if(S<E)return 0;var R=s(y[S]);return R>=0?(R>0&&(f.lastNeed=R-1),R):--S<E||R===-2?0:(R=s(y[S]),R>=0?(R>0&&(f.lastNeed=R-2),R):--S<E||R===-2?0:(R=s(y[S]),R>=0?(R>0&&(R===2?R=0:f.lastNeed=R-3),R):0))}function o(f,y,E){if((y[0]&192)!==128)return f.lastNeed=0,"�";if(f.lastNeed>1&&y.length>1){if((y[1]&192)!==128)return f.lastNeed=1,"�";if(f.lastNeed>2&&y.length>2&&(y[2]&192)!==128)return f.lastNeed=2,"�"}}function c(f){var y=this.lastTotal-this.lastNeed,E=o(this,f);if(E!==void 0)return E;if(this.lastNeed<=f.length)return f.copy(this.lastChar,y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,y,0,f.length),this.lastNeed-=f.length}function d(f,y){var E=a(this,f,y);if(!this.lastNeed)return f.toString("utf8",y);this.lastTotal=E;var S=f.length-(E-this.lastNeed);return f.copy(this.lastChar,0,S),f.toString("utf8",y,S)}function p(f){var y=f&&f.length?this.write(f):"";return this.lastNeed?y+"�":y}function h(f,y){if((f.length-y)%2===0){var E=f.toString("utf16le",y);if(E){var S=E.charCodeAt(E.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=f[f.length-1],f.toString("utf16le",y,f.length-1)}function _(f){var y=f&&f.length?this.write(f):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return y+this.lastChar.toString("utf16le",0,E)}return y}function g(f,y){var E=(f.length-y)%3;return E===0?f.toString("base64",y):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=f[f.length-1]:(this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1]),f.toString("base64",y,f.length-E))}function w(f){var y=f&&f.length?this.write(f):"";return this.lastNeed?y+this.lastChar.toString("base64",0,3-this.lastNeed):y}function k(f){return f.toString(this.encoding)}function m(f){return f&&f.length?this.write(f):""}return Cn}var bi=Ge.codes.ERR_STREAM_PREMATURE_CLOSE;function Ao(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function Lo(){}function To(e){return e.setHeader&&typeof e.abort=="function"}function Ms(e,t,r){if(typeof t=="function")return Ms(e,null,t);t||(t={}),r=Ao(r||Lo);var n=t.readable||t.readable!==!1&&e.readable,i=t.writable||t.writable!==!1&&e.writable,s=function(){e.writable||o()},a=e._writableState&&e._writableState.finished,o=function(){i=!1,a=!0,n||r.call(e)},c=e._readableState&&e._readableState.endEmitted,d=function(){n=!1,c=!0,i||r.call(e)},p=function(w){r.call(e,w)},h=function(){var w;if(n&&!c)return(!e._readableState||!e._readableState.ended)&&(w=new bi),r.call(e,w);if(i&&!a)return(!e._writableState||!e._writableState.ended)&&(w=new bi),r.call(e,w)},_=function(){e.req.on("finish",o)};return To(e)?(e.on("complete",o),e.on("abort",h),e.req?_():e.on("request",_)):i&&!e._writableState&&(e.on("end",s),e.on("close",s)),e.on("end",d),e.on("finish",o),t.error!==!1&&e.on("error",p),e.on("close",h),function(){e.removeListener("complete",o),e.removeListener("abort",h),e.removeListener("request",_),e.req&&e.req.removeListener("finish",o),e.removeListener("end",s),e.removeListener("close",s),e.removeListener("finish",o),e.removeListener("end",d),e.removeListener("error",p),e.removeListener("close",h)}}var Gn=Ms,xn,vi;function Po(){if(vi)return xn;vi=1;var e;function t(E,S,R){return S=r(S),S in E?Object.defineProperty(E,S,{value:R,enumerable:!0,configurable:!0,writable:!0}):E[S]=R,E}function r(E){var S=n(E,"string");return typeof S=="symbol"?S:String(S)}function n(E,S){if(typeof E!="object"||E===null)return E;var R=E[Symbol.toPrimitive];if(R!==void 0){var A=R.call(E,S||"default");if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(E)}var i=Gn,s=Symbol("lastResolve"),a=Symbol("lastReject"),o=Symbol("error"),c=Symbol("ended"),d=Symbol("lastPromise"),p=Symbol("handlePromise"),h=Symbol("stream");function _(E,S){return{value:E,done:S}}function g(E){var S=E[s];if(S!==null){var R=E[h].read();R!==null&&(E[d]=null,E[s]=null,E[a]=null,S(_(R,!1)))}}function w(E){U.nextTick(g,E)}function k(E,S){return function(R,A){E.then(function(){if(S[c]){R(_(void 0,!0));return}S[p](R,A)},A)}}var m=Object.getPrototypeOf(function(){}),f=Object.setPrototypeOf((e={get stream(){return this[h]},next:function(){var S=this,R=this[o];if(R!==null)return Promise.reject(R);if(this[c])return Promise.resolve(_(void 0,!0));if(this[h].destroyed)return new Promise(function(T,$){U.nextTick(function(){S[o]?$(S[o]):T(_(void 0,!0))})});var A=this[d],W;if(A)W=new Promise(k(A,this));else{var P=this[h].read();if(P!==null)return Promise.resolve(_(P,!1));W=new Promise(this[p])}return this[d]=W,W}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var S=this;return new Promise(function(R,A){S[h].destroy(null,function(W){if(W){A(W);return}R(_(void 0,!0))})})}),e),m),y=function(S){var R,A=Object.create(f,(R={},t(R,h,{value:S,writable:!0}),t(R,s,{value:null,writable:!0}),t(R,a,{value:null,writable:!0}),t(R,o,{value:null,writable:!0}),t(R,c,{value:S._readableState.endEmitted,writable:!0}),t(R,p,{value:function(P,T){var $=A[h].read();$?(A[d]=null,A[s]=null,A[a]=null,P(_($,!1))):(A[s]=P,A[a]=T)},writable:!0}),R));return A[d]=null,i(S,function(W){if(W&&W.code!=="ERR_STREAM_PREMATURE_CLOSE"){var P=A[a];P!==null&&(A[d]=null,A[s]=null,A[a]=null,P(W)),A[o]=W;return}var T=A[s];T!==null&&(A[d]=null,A[s]=null,A[a]=null,T(_(void 0,!0))),A[c]=!0}),S.on("readable",w.bind(null,A)),A};return xn=y,xn}var kn,yi;function No(){return yi||(yi=1,kn=function(){throw new Error("Readable.from is not available in the browser")}),kn}var Rn,mi;function As(){if(mi)return Rn;mi=1,Rn=T;var e;T.ReadableState=P,Es.EventEmitter;var t=function(u,C){return u.listeners(C).length},r=Cs,n=Fn.Buffer,i=(typeof J<"u"?J:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(l){return n.from(l)}function a(l){return n.isBuffer(l)||l instanceof i}var o=ss,c;o&&o.debuglog?c=o.debuglog("stream"):c=function(){};var d=bo(),p=xs,h=Rs,_=h.getHighWaterMark,g=Ge.codes,w=g.ERR_INVALID_ARG_TYPE,k=g.ERR_STREAM_PUSH_AFTER_EOF,m=g.ERR_METHOD_NOT_IMPLEMENTED,f=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,y,E,S;_e(T,r);var R=p.errorOrDestroy,A=["error","close","destroy","pause","resume"];function W(l,u,C){if(typeof l.prependListener=="function")return l.prependListener(u,C);!l._events||!l._events[u]?l.on(u,C):Array.isArray(l._events[u])?l._events[u].unshift(C):l._events[u]=[C,l._events[u]]}function P(l,u,C){e=e||at(),l=l||{},typeof C!="boolean"&&(C=u instanceof e),this.objectMode=!!l.objectMode,C&&(this.objectMode=this.objectMode||!!l.readableObjectMode),this.highWaterMark=_(this,l,"readableHighWaterMark",C),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=l.emitClose!==!1,this.autoDestroy=!!l.autoDestroy,this.destroyed=!1,this.defaultEncoding=l.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,l.encoding&&(y||(y=gi().StringDecoder),this.decoder=new y(l.encoding),this.encoding=l.encoding)}function T(l){if(e=e||at(),!(this instanceof T))return new T(l);var u=this instanceof e;this._readableState=new P(l,this,u),this.readable=!0,l&&(typeof l.read=="function"&&(this._read=l.read),typeof l.destroy=="function"&&(this._destroy=l.destroy)),r.call(this)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(u){this._readableState&&(this._readableState.destroyed=u)}}),T.prototype.destroy=p.destroy,T.prototype._undestroy=p.undestroy,T.prototype._destroy=function(l,u){u(l)},T.prototype.push=function(l,u){var C=this._readableState,I;return C.objectMode?I=!0:typeof l=="string"&&(u=u||C.defaultEncoding,u!==C.encoding&&(l=n.from(l,u),u=""),I=!0),$(this,l,u,!1,I)},T.prototype.unshift=function(l){return $(this,l,null,!0,!1)};function $(l,u,C,I,F){c("readableAddChunk",u);var N=l._readableState;if(u===null)N.reading=!1,je(l,N);else{var B;if(F||(B=Se(N,u)),B)R(l,B);else if(N.objectMode||u&&u.length>0)if(typeof u!="string"&&!N.objectMode&&Object.getPrototypeOf(u)!==n.prototype&&(u=s(u)),I)N.endEmitted?R(l,new f):te(l,N,u,!0);else if(N.ended)R(l,new k);else{if(N.destroyed)return!1;N.reading=!1,N.decoder&&!C?(u=N.decoder.write(u),N.objectMode||u.length!==0?te(l,N,u,!1):ce(l,N)):te(l,N,u,!1)}else I||(N.reading=!1,ce(l,N))}return!N.ended&&(N.length<N.highWaterMark||N.length===0)}function te(l,u,C,I){u.flowing&&u.length===0&&!u.sync?(u.awaitDrain=0,l.emit("data",C)):(u.length+=u.objectMode?1:C.length,I?u.buffer.unshift(C):u.buffer.push(C),u.needReadable&&oe(l)),ce(l,u)}function Se(l,u){var C;return!a(u)&&typeof u!="string"&&u!==void 0&&!l.objectMode&&(C=new w("chunk",["string","Buffer","Uint8Array"],u)),C}T.prototype.isPaused=function(){return this._readableState.flowing===!1},T.prototype.setEncoding=function(l){y||(y=gi().StringDecoder);var u=new y(l);this._readableState.decoder=u,this._readableState.encoding=this._readableState.decoder.encoding;for(var C=this._readableState.buffer.head,I="";C!==null;)I+=u.write(C.data),C=C.next;return this._readableState.buffer.clear(),I!==""&&this._readableState.buffer.push(I),this._readableState.length=I.length,this};var K=1073741824;function ne(l){return l>=K?l=K:(l--,l|=l>>>1,l|=l>>>2,l|=l>>>4,l|=l>>>8,l|=l>>>16,l++),l}function ie(l,u){return l<=0||u.length===0&&u.ended?0:u.objectMode?1:l!==l?u.flowing&&u.length?u.buffer.head.data.length:u.length:(l>u.highWaterMark&&(u.highWaterMark=ne(l)),l<=u.length?l:u.ended?u.length:(u.needReadable=!0,0))}T.prototype.read=function(l){c("read",l),l=parseInt(l,10);var u=this._readableState,C=l;if(l!==0&&(u.emittedReadable=!1),l===0&&u.needReadable&&((u.highWaterMark!==0?u.length>=u.highWaterMark:u.length>0)||u.ended))return c("read: emitReadable",u.length,u.ended),u.length===0&&u.ended?x(this):oe(this),null;if(l=ie(l,u),l===0&&u.ended)return u.length===0&&x(this),null;var I=u.needReadable;c("need readable",I),(u.length===0||u.length-l<u.highWaterMark)&&(I=!0,c("length less than watermark",I)),u.ended||u.reading?(I=!1,c("reading or ended",I)):I&&(c("do read"),u.reading=!0,u.sync=!0,u.length===0&&(u.needReadable=!0),this._read(u.highWaterMark),u.sync=!1,u.reading||(l=ie(C,u)));var F;return l>0?F=b(l,u):F=null,F===null?(u.needReadable=u.length<=u.highWaterMark,l=0):(u.length-=l,u.awaitDrain=0),u.length===0&&(u.ended||(u.needReadable=!0),C!==l&&u.ended&&x(this)),F!==null&&this.emit("data",F),F};function je(l,u){if(c("onEofChunk"),!u.ended){if(u.decoder){var C=u.decoder.end();C&&C.length&&(u.buffer.push(C),u.length+=u.objectMode?1:C.length)}u.ended=!0,u.sync?oe(l):(u.needReadable=!1,u.emittedReadable||(u.emittedReadable=!0,Ce(l)))}}function oe(l){var u=l._readableState;c("emitReadable",u.needReadable,u.emittedReadable),u.needReadable=!1,u.emittedReadable||(c("emitReadable",u.flowing),u.emittedReadable=!0,U.nextTick(Ce,l))}function Ce(l){var u=l._readableState;c("emitReadable_",u.destroyed,u.length,u.ended),!u.destroyed&&(u.length||u.ended)&&(l.emit("readable"),u.emittedReadable=!1),u.needReadable=!u.flowing&&!u.ended&&u.length<=u.highWaterMark,v(l)}function ce(l,u){u.readingMore||(u.readingMore=!0,U.nextTick(xe,l,u))}function xe(l,u){for(;!u.reading&&!u.ended&&(u.length<u.highWaterMark||u.flowing&&u.length===0);){var C=u.length;if(c("maybeReadMore read 0"),l.read(0),C===u.length)break}u.readingMore=!1}T.prototype._read=function(l){R(this,new m("_read()"))},T.prototype.pipe=function(l,u){var C=this,I=this._readableState;switch(I.pipesCount){case 0:I.pipes=l;break;case 1:I.pipes=[I.pipes,l];break;default:I.pipes.push(l);break}I.pipesCount+=1,c("pipe count=%d opts=%j",I.pipesCount,u);var F=(!u||u.end!==!1)&&l!==U.stdout&&l!==U.stderr,N=F?Ie:Ue;I.endEmitted?U.nextTick(N):C.once("end",N),l.on("unpipe",B);function B(Me,pe){c("onunpipe"),Me===C&&pe&&pe.hasUnpiped===!1&&(pe.hasUnpiped=!0,Nt())}function Ie(){c("onend"),l.end()}var $e=Be(C);l.on("drain",$e);var ft=!1;function Nt(){c("cleanup"),l.removeListener("close",Qe),l.removeListener("finish",Xe),l.removeListener("drain",$e),l.removeListener("error",Je),l.removeListener("unpipe",B),C.removeListener("end",Ie),C.removeListener("end",Ue),C.removeListener("data",_t),ft=!0,I.awaitDrain&&(!l._writableState||l._writableState.needDrain)&&$e()}C.on("data",_t);function _t(Me){c("ondata");var pe=l.write(Me);c("dest.write",pe),pe===!1&&((I.pipesCount===1&&I.pipes===l||I.pipesCount>1&&O(I.pipes,l)!==-1)&&!ft&&(c("false write response, pause",I.awaitDrain),I.awaitDrain++),C.pause())}function Je(Me){c("onerror",Me),Ue(),l.removeListener("error",Je),t(l,"error")===0&&R(l,Me)}W(l,"error",Je);function Qe(){l.removeListener("finish",Xe),Ue()}l.once("close",Qe);function Xe(){c("onfinish"),l.removeListener("close",Qe),Ue()}l.once("finish",Xe);function Ue(){c("unpipe"),C.unpipe(l)}return l.emit("pipe",C),I.flowing||(c("pipe resume"),C.resume()),l};function Be(l){return function(){var C=l._readableState;c("pipeOnDrain",C.awaitDrain),C.awaitDrain&&C.awaitDrain--,C.awaitDrain===0&&t(l,"data")&&(C.flowing=!0,v(l))}}T.prototype.unpipe=function(l){var u=this._readableState,C={hasUnpiped:!1};if(u.pipesCount===0)return this;if(u.pipesCount===1)return l&&l!==u.pipes?this:(l||(l=u.pipes),u.pipes=null,u.pipesCount=0,u.flowing=!1,l&&l.emit("unpipe",this,C),this);if(!l){var I=u.pipes,F=u.pipesCount;u.pipes=null,u.pipesCount=0,u.flowing=!1;for(var N=0;N<F;N++)I[N].emit("unpipe",this,{hasUnpiped:!1});return this}var B=O(u.pipes,l);return B===-1?this:(u.pipes.splice(B,1),u.pipesCount-=1,u.pipesCount===1&&(u.pipes=u.pipes[0]),l.emit("unpipe",this,C),this)},T.prototype.on=function(l,u){var C=r.prototype.on.call(this,l,u),I=this._readableState;return l==="data"?(I.readableListening=this.listenerCount("readable")>0,I.flowing!==!1&&this.resume()):l==="readable"&&!I.endEmitted&&!I.readableListening&&(I.readableListening=I.needReadable=!0,I.flowing=!1,I.emittedReadable=!1,c("on readable",I.length,I.reading),I.length?oe(this):I.reading||U.nextTick(se,this)),C},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(l,u){var C=r.prototype.removeListener.call(this,l,u);return l==="readable"&&U.nextTick(ke,this),C},T.prototype.removeAllListeners=function(l){var u=r.prototype.removeAllListeners.apply(this,arguments);return(l==="readable"||l===void 0)&&U.nextTick(ke,this),u};function ke(l){var u=l._readableState;u.readableListening=l.listenerCount("readable")>0,u.resumeScheduled&&!u.paused?u.flowing=!0:l.listenerCount("data")>0&&l.resume()}function se(l){c("readable nexttick read 0"),l.read(0)}T.prototype.resume=function(){var l=this._readableState;return l.flowing||(c("resume"),l.flowing=!l.readableListening,We(this,l)),l.paused=!1,this};function We(l,u){u.resumeScheduled||(u.resumeScheduled=!0,U.nextTick(Re,l,u))}function Re(l,u){c("resume",u.reading),u.reading||l.read(0),u.resumeScheduled=!1,l.emit("resume"),v(l),u.flowing&&!u.reading&&l.read(0)}T.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function v(l){var u=l._readableState;for(c("flow",u.flowing);u.flowing&&l.read()!==null;);}T.prototype.wrap=function(l){var u=this,C=this._readableState,I=!1;l.on("end",function(){if(c("wrapped end"),C.decoder&&!C.ended){var B=C.decoder.end();B&&B.length&&u.push(B)}u.push(null)}),l.on("data",function(B){if(c("wrapped data"),C.decoder&&(B=C.decoder.write(B)),!(C.objectMode&&B==null)&&!(!C.objectMode&&(!B||!B.length))){var Ie=u.push(B);Ie||(I=!0,l.pause())}});for(var F in l)this[F]===void 0&&typeof l[F]=="function"&&(this[F]=function(Ie){return function(){return l[Ie].apply(l,arguments)}}(F));for(var N=0;N<A.length;N++)l.on(A[N],this.emit.bind(this,A[N]));return this._read=function(B){c("wrapped _read",B),I&&(I=!1,l.resume())},this},typeof Symbol=="function"&&(T.prototype[Symbol.asyncIterator]=function(){return E===void 0&&(E=Po()),E(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(u){this._readableState&&(this._readableState.flowing=u)}}),T._fromList=b,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function b(l,u){if(u.length===0)return null;var C;return u.objectMode?C=u.buffer.shift():!l||l>=u.length?(u.decoder?C=u.buffer.join(""):u.buffer.length===1?C=u.buffer.first():C=u.buffer.concat(u.length),u.buffer.clear()):C=u.buffer.consume(l,u.decoder),C}function x(l){var u=l._readableState;c("endReadable",u.endEmitted),u.endEmitted||(u.ended=!0,U.nextTick(L,u,l))}function L(l,u){if(c("endReadableNT",l.endEmitted,l.length),!l.endEmitted&&l.length===0&&(l.endEmitted=!0,u.readable=!1,u.emit("end"),l.autoDestroy)){var C=u._writableState;(!C||C.autoDestroy&&C.finished)&&u.destroy()}}typeof Symbol=="function"&&(T.from=function(l,u){return S===void 0&&(S=No()),S(T,l,u)});function O(l,u){for(var C=0,I=l.length;C<I;C++)if(l[C]===u)return C;return-1}return Rn}var Ls=Oe,ir=Ge.codes,Oo=ir.ERR_METHOD_NOT_IMPLEMENTED,Do=ir.ERR_MULTIPLE_CALLBACK,jo=ir.ERR_TRANSFORM_ALREADY_TRANSFORMING,Bo=ir.ERR_TRANSFORM_WITH_LENGTH_0,sr=at();_e(Oe,sr);function Wo(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Do);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Oe(e){if(!(this instanceof Oe))return new Oe(e);sr.call(this,e),this._transformState={afterTransform:Wo.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Uo)}function Uo(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){wi(e,t,r)}):wi(this,null,null)}Oe.prototype.push=function(e,t){return this._transformState.needTransform=!1,sr.prototype.push.call(this,e,t)};Oe.prototype._transform=function(e,t,r){r(new Oo("_transform()"))};Oe.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Oe.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Oe.prototype._destroy=function(e,t){sr.prototype._destroy.call(this,e,function(r){t(r)})};function wi(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Bo;if(e._transformState.transforming)throw new jo;return e.push(null)}var Ho=wt,Ts=Ls;_e(wt,Ts);function wt(e){if(!(this instanceof wt))return new wt(e);Ts.call(this,e)}wt.prototype._transform=function(e,t,r){r(null,e)};var In;function $o(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var Ps=Ge.codes,Fo=Ps.ERR_MISSING_ARGS,qo=Ps.ERR_STREAM_DESTROYED;function Ei(e){if(e)throw e}function zo(e){return e.setHeader&&typeof e.abort=="function"}function Ko(e,t,r,n){n=$o(n);var i=!1;e.on("close",function(){i=!0}),In===void 0&&(In=Gn),In(e,{readable:t,writable:r},function(a){if(a)return n(a);i=!0,n()});var s=!1;return function(a){if(!i&&!s){if(s=!0,zo(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(a||new qo("pipe"))}}}function Si(e){e()}function Vo(e,t){return e.pipe(t)}function Go(e){return!e.length||typeof e[e.length-1]!="function"?Ei:e.pop()}function Zo(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Go(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Fo("streams");var i,s=t.map(function(a,o){var c=o<t.length-1,d=o>0;return Ko(a,c,d,function(p){i||(i=p),p&&s.forEach(Si),!c&&(s.forEach(Si),n(i))})});return t.reduce(Vo)}var Yo=Zo;(function(e,t){t=e.exports=As(),t.Stream=t,t.Readable=t,t.Writable=Is(),t.Duplex=at(),t.Transform=Ls,t.PassThrough=Ho,t.finished=Gn,t.pipeline=Yo})(Nn,Nn.exports);var Ns=Nn.exports;const{Transform:Jo}=Ns;var Qo=e=>class Os extends Jo{constructor(r,n,i,s,a){super(a),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=s,this._options=a,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(a){s=a}i(s)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!j.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return j.isBuffer(r)||(r=j.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new Os(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const{Transform:Xo}=Ns;var ec=e=>class Ds extends Xo{constructor(r,n,i,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=s,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(a){s=a}i(s)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!j.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return j.isBuffer(r)||(r=j.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new Ds(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const tc=Qo,rc=ec;var nc=function(e){const t=tc(e),r=rc(e);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new t(1152,448,null,224,i);case"keccak256":return new t(1088,512,null,256,i);case"keccak384":return new t(832,768,null,384,i);case"keccak512":return new t(576,1024,null,512,i);case"sha3-224":return new t(1152,448,6,224,i);case"sha3-256":return new t(1088,512,6,256,i);case"sha3-384":return new t(832,768,6,384,i);case"sha3-512":return new t(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}},js={};const Ci=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];js.p1600=function(e){for(let t=0;t<24;++t){const r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],i=e[2]^e[12]^e[22]^e[32]^e[42],s=e[3]^e[13]^e[23]^e[33]^e[43],a=e[4]^e[14]^e[24]^e[34]^e[44],o=e[5]^e[15]^e[25]^e[35]^e[45],c=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],p=e[8]^e[18]^e[28]^e[38]^e[48],h=e[9]^e[19]^e[29]^e[39]^e[49];let _=p^(i<<1|s>>>31),g=h^(s<<1|i>>>31);const w=e[0]^_,k=e[1]^g,m=e[10]^_,f=e[11]^g,y=e[20]^_,E=e[21]^g,S=e[30]^_,R=e[31]^g,A=e[40]^_,W=e[41]^g;_=r^(a<<1|o>>>31),g=n^(o<<1|a>>>31);const P=e[2]^_,T=e[3]^g,$=e[12]^_,te=e[13]^g,Se=e[22]^_,K=e[23]^g,ne=e[32]^_,ie=e[33]^g,je=e[42]^_,oe=e[43]^g;_=i^(c<<1|d>>>31),g=s^(d<<1|c>>>31);const Ce=e[4]^_,ce=e[5]^g,xe=e[14]^_,Be=e[15]^g,ke=e[24]^_,se=e[25]^g,We=e[34]^_,Re=e[35]^g,v=e[44]^_,b=e[45]^g;_=a^(p<<1|h>>>31),g=o^(h<<1|p>>>31);const x=e[6]^_,L=e[7]^g,O=e[16]^_,l=e[17]^g,u=e[26]^_,C=e[27]^g,I=e[36]^_,F=e[37]^g,N=e[46]^_,B=e[47]^g;_=c^(r<<1|n>>>31),g=d^(n<<1|r>>>31);const Ie=e[8]^_,$e=e[9]^g,ft=e[18]^_,Nt=e[19]^g,_t=e[28]^_,Je=e[29]^g,Qe=e[38]^_,Xe=e[39]^g,Ue=e[48]^_,Me=e[49]^g,pe=w,wr=k,Er=f<<4|m>>>28,Sr=m<<4|f>>>28,Cr=y<<3|E>>>29,xr=E<<3|y>>>29,kr=R<<9|S>>>23,Rr=S<<9|R>>>23,Ir=A<<18|W>>>14,Mr=W<<18|A>>>14,Ar=P<<1|T>>>31,Lr=T<<1|P>>>31,Tr=te<<12|$>>>20,Pr=$<<12|te>>>20,Nr=Se<<10|K>>>22,Or=K<<10|Se>>>22,Dr=ie<<13|ne>>>19,jr=ne<<13|ie>>>19,Br=je<<2|oe>>>30,Wr=oe<<2|je>>>30,Ur=ce<<30|Ce>>>2,Hr=Ce<<30|ce>>>2,$r=xe<<6|Be>>>26,Fr=Be<<6|xe>>>26,qr=se<<11|ke>>>21,zr=ke<<11|se>>>21,Kr=We<<15|Re>>>17,Vr=Re<<15|We>>>17,Gr=b<<29|v>>>3,Zr=v<<29|b>>>3,Yr=x<<28|L>>>4,Jr=L<<28|x>>>4,Qr=l<<23|O>>>9,Xr=O<<23|l>>>9,en=u<<25|C>>>7,tn=C<<25|u>>>7,rn=I<<21|F>>>11,nn=F<<21|I>>>11,sn=B<<24|N>>>8,an=N<<24|B>>>8,on=Ie<<27|$e>>>5,cn=$e<<27|Ie>>>5,ln=ft<<20|Nt>>>12,un=Nt<<20|ft>>>12,dn=Je<<7|_t>>>25,hn=_t<<7|Je>>>25,fn=Qe<<8|Xe>>>24,_n=Xe<<8|Qe>>>24,pn=Ue<<14|Me>>>18,gn=Me<<14|Ue>>>18;e[0]=pe^~Tr&qr,e[1]=wr^~Pr&zr,e[10]=Yr^~ln&Cr,e[11]=Jr^~un&xr,e[20]=Ar^~$r&en,e[21]=Lr^~Fr&tn,e[30]=on^~Er&Nr,e[31]=cn^~Sr&Or,e[40]=Ur^~Qr&dn,e[41]=Hr^~Xr&hn,e[2]=Tr^~qr&rn,e[3]=Pr^~zr&nn,e[12]=ln^~Cr&Dr,e[13]=un^~xr&jr,e[22]=$r^~en&fn,e[23]=Fr^~tn&_n,e[32]=Er^~Nr&Kr,e[33]=Sr^~Or&Vr,e[42]=Qr^~dn&kr,e[43]=Xr^~hn&Rr,e[4]=qr^~rn&pn,e[5]=zr^~nn&gn,e[14]=Cr^~Dr&Gr,e[15]=xr^~jr&Zr,e[24]=en^~fn&Ir,e[25]=tn^~_n&Mr,e[34]=Nr^~Kr&sn,e[35]=Or^~Vr&an,e[44]=dn^~kr&Br,e[45]=hn^~Rr&Wr,e[6]=rn^~pn&pe,e[7]=nn^~gn&wr,e[16]=Dr^~Gr&Yr,e[17]=jr^~Zr&Jr,e[26]=fn^~Ir&Ar,e[27]=_n^~Mr&Lr,e[36]=Kr^~sn&on,e[37]=Vr^~an&cn,e[46]=kr^~Br&Ur,e[47]=Rr^~Wr&Hr,e[8]=pn^~pe&Tr,e[9]=gn^~wr&Pr,e[18]=Gr^~Yr&ln,e[19]=Zr^~Jr&un,e[28]=Ir^~Ar&$r,e[29]=Mr^~Lr&Fr,e[38]=sn^~on&Er,e[39]=an^~cn&Sr,e[48]=Br^~Ur&Qr,e[49]=Wr^~Hr&Xr,e[0]^=Ci[t*2],e[1]^=Ci[t*2+1]}};const Vt=js;function dt(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}dt.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};dt.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(Vt.p1600(this.state),this.count=0)};dt.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&Vt.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),Vt.p1600(this.state),this.count=0,this.squeezing=!0};dt.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);const t=j.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(Vt.p1600(this.state),this.count=0);return t};dt.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};var ic=dt,sc=nc(ic);const ac=sc;function Bs(e){return j.allocUnsafe(e).fill(0)}function oc(e){return e.toString(2).length}function Ws(e,t){let r=e.toString(16);r.length%2!==0&&(r="0"+r);const n=r.match(/.{1,2}/g).map(i=>parseInt(i,16));for(;n.length<t;)n.unshift(0);return j.from(n)}function cc(e,t){const r=e<0n;let n;if(r){const i=(1n<<BigInt(t))-1n;n=(~e&i)+1n}else n=e;return n&=(1n<<BigInt(t))-1n,n}function Us(e,t,r){const n=Bs(t);return e=ar(e),r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)}function lc(e,t){return Us(e,t,!0)}function ar(e){if(!j.isBuffer(e))if(Array.isArray(e))e=j.from(e);else if(typeof e=="string")Hs(e)?e=j.from(hc($s(e)),"hex"):e=j.from(e);else if(typeof e=="number")e=intToBuffer(e);else if(e==null)e=j.allocUnsafe(0);else if(typeof e=="bigint")e=Ws(e);else if(e.toArray)e=j.from(e.toArray());else throw new Error("invalid type");return e}function uc(e){return e=ar(e),"0x"+e.toString("hex")}function dc(e,t){return e=ar(e),t||(t=256),ac("keccak"+t).update(e).digest()}function hc(e){return e.length%2?"0"+e:e}function Hs(e){return typeof e=="string"&&e.match(/^0x[0-9A-Fa-f]*$/)}function $s(e){return typeof e=="string"&&e.startsWith("0x")?e.slice(2):e}var Fs={zeros:Bs,setLength:Us,setLengthRight:lc,isHexString:Hs,stripHexPrefix:$s,toBuffer:ar,bufferToHex:uc,keccak:dc,bitLengthFromBigInt:oc,bufferBEFromBigInt:Ws,twosFromBigInt:cc};const re=Fs;function qs(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}function st(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function xi(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function zs(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}function Fe(e){var t=typeof e;if(t==="string"||t==="number")return BigInt(e);if(t==="bigint")return e;throw new Error("Argument is not a number")}function ge(e,t){var r,n,i,s;if(e==="address")return ge("uint160",Fe(t));if(e==="bool")return ge("uint8",t?1:0);if(e==="string")return ge("bytes",new j(t,"utf8"));if(_c(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=zs(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);i=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(s in t)i.push(ge(e,t[s]));if(r==="dynamic"){var a=ge("uint256",t.length);i.unshift(a)}return j.concat(i)}else{if(e==="bytes")return t=new j(t),i=j.concat([ge("uint256",t.length),t]),t.length%32!==0&&(i=j.concat([i,re.zeros(32-t.length%32)])),i;if(e.startsWith("bytes")){if(r=st(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return re.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=st(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);n=Fe(t);const o=re.bitLengthFromBigInt(n);if(o>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+o);if(n<0)throw new Error("Supplied uint is negative");return re.bufferBEFromBigInt(n,32)}else if(e.startsWith("int")){if(r=st(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);n=Fe(t);const o=re.bitLengthFromBigInt(n);if(o>r)throw new Error("Supplied int exceeds width: "+r+" vs "+o);const c=re.twosFromBigInt(n,256);return re.bufferBEFromBigInt(c,32)}else if(e.startsWith("ufixed")){if(r=xi(e),n=Fe(t),n<0)throw new Error("Supplied ufixed is negative");return ge("uint256",n*BigInt(2)**BigInt(r[1]))}else if(e.startsWith("fixed"))return r=xi(e),ge("int256",Fe(t)*BigInt(2)**BigInt(r[1]))}throw new Error("Unsupported or invalid type: "+e)}function fc(e){return e==="string"||e==="bytes"||zs(e)==="dynamic"}function _c(e){return e.lastIndexOf("]")===e.length-1}function pc(e,t){var r=[],n=[],i=32*e.length;for(var s in e){var a=qs(e[s]),o=t[s],c=ge(a,o);fc(a)?(r.push(ge("uint256",i)),n.push(c),i+=c.length):r.push(c)}return j.concat(r.concat(n))}function Ks(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r,n,i=[],s=0;s<e.length;s++){var a=qs(e[s]),o=t[s];if(a==="bytes")i.push(o);else if(a==="string")i.push(new j(o,"utf8"));else if(a==="bool")i.push(new j(o?"01":"00","hex"));else if(a==="address")i.push(re.setLength(o,20));else if(a.startsWith("bytes")){if(r=st(a),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);i.push(re.setLengthRight(o,r))}else if(a.startsWith("uint")){if(r=st(a),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);n=Fe(o);const c=re.bitLengthFromBigInt(n);if(c>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+c);i.push(re.bufferBEFromBigInt(n,r/8))}else if(a.startsWith("int")){if(r=st(a),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);n=Fe(o);const c=re.bitLengthFromBigInt(n);if(c>r)throw new Error("Supplied int exceeds width: "+r+" vs "+c);const d=re.twosFromBigInt(n,r);i.push(re.bufferBEFromBigInt(d,r/8))}else throw new Error("Unsupported or invalid type: "+a)}return j.concat(i)}function gc(e,t){return re.keccak(Ks(e,t))}var bc={rawEncode:pc,solidityPack:Ks,soliditySHA3:gc};const fe=Fs,gt=bc,Vs={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},Mn={encodeData(e,t,r,n=!0){const i=["bytes32"],s=[this.hashType(e,r)];if(n){const a=(o,c,d)=>{if(r[c]!==void 0)return["bytes32",d==null?"0x0000000000000000000000000000000000000000000000000000000000000000":fe.keccak(this.encodeData(c,d,r,n))];if(d===void 0)throw new Error(`missing value for field ${o} of type ${c}`);if(c==="bytes")return["bytes32",fe.keccak(d)];if(c==="string")return typeof d=="string"&&(d=j.from(d,"utf8")),["bytes32",fe.keccak(d)];if(c.lastIndexOf("]")===c.length-1){const p=c.slice(0,c.lastIndexOf("[")),h=d.map(_=>a(o,p,_));return["bytes32",fe.keccak(gt.rawEncode(h.map(([_])=>_),h.map(([,_])=>_)))]}return[c,d]};for(const o of r[e]){const[c,d]=a(o.name,o.type,t[o.name]);i.push(c),s.push(d)}}else for(const a of r[e]){let o=t[a.name];if(o!==void 0)if(a.type==="bytes")i.push("bytes32"),o=fe.keccak(o),s.push(o);else if(a.type==="string")i.push("bytes32"),typeof o=="string"&&(o=j.from(o,"utf8")),o=fe.keccak(o),s.push(o);else if(r[a.type]!==void 0)i.push("bytes32"),o=fe.keccak(this.encodeData(a.type,o,r,n)),s.push(o);else{if(a.type.lastIndexOf("]")===a.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");i.push(a.type),s.push(o)}}return gt.rawEncode(i,s)},encodeType(e,t){let r="",n=this.findTypeDependencies(e,t).filter(i=>i!==e);n=[e].concat(n.sort());for(const i of n){if(!t[i])throw new Error("No type definition specified: "+i);r+=i+"("+t[i].map(({name:a,type:o})=>o+" "+a).join(",")+")"}return r},findTypeDependencies(e,t,r=[]){if(e=e.match(/^\w*/)[0],r.includes(e)||t[e]===void 0)return r;r.push(e);for(const n of t[e])for(const i of this.findTypeDependencies(n.type,t,r))!r.includes(i)&&r.push(i);return r},hashStruct(e,t,r,n=!0){return fe.keccak(this.encodeData(e,t,r,n))},hashType(e,t){return fe.keccak(this.encodeType(e,t))},sanitizeData(e){const t={};for(const r in Vs.properties)e[r]&&(t[r]=e[r]);return t.types&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t},hash(e,t=!0){const r=this.sanitizeData(e),n=[j.from("1901","hex")];return n.push(this.hashStruct("EIP712Domain",r.domain,r.types,t)),r.primaryType!=="EIP712Domain"&&n.push(this.hashStruct(r.primaryType,r.message,r.types,t)),fe.keccak(j.concat(n))}};var vc={TYPED_MESSAGE_SCHEMA:Vs,TypedDataUtils:Mn,hashForSignTypedDataLegacy:function(e){return yc(e.data)},hashForSignTypedData_v3:function(e){return Mn.hash(e.data,!1)},hashForSignTypedData_v4:function(e){return Mn.hash(e.data)}};function yc(e){const t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!e.length)throw t;const r=e.map(function(s){return s.type==="bytes"?fe.toBuffer(s.value):s.value}),n=e.map(function(s){return s.type}),i=e.map(function(s){if(!s.name)throw t;return s.type+" "+s.name});return gt.soliditySHA3(["bytes32","bytes32"],[gt.soliditySHA3(new Array(e.length).fill("string"),i),gt.soliditySHA3(n,r)])}var ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.APP_VERSION_KEY=ye.LOCAL_STORAGE_ADDRESSES_KEY=ye.WALLET_USER_NAME_KEY=void 0;ye.WALLET_USER_NAME_KEY="walletUsername";ye.LOCAL_STORAGE_ADDRESSES_KEY="Addresses";ye.APP_VERSION_KEY="AppVersion";var kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.RelayEventManager=void 0;const mc=M;class wc{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const t=this._nextRequestId,r=(0,mc.prepend0x)(t.toString(16));return this.callbacks.get(r)&&this.callbacks.delete(r),t}}kt.RelayEventManager=wc;var or={},cr={},lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.WalletLinkCipher=void 0;const Bt=M;class Ec{constructor(t){this.secret=t}async encrypt(t){const r=this.secret;if(r.length!==64)throw Error("secret must be 256 bits");const n=crypto.getRandomValues(new Uint8Array(12)),i=await crypto.subtle.importKey("raw",(0,Bt.hexStringToUint8Array)(r),{name:"aes-gcm"},!1,["encrypt","decrypt"]),s=new TextEncoder,a=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},i,s.encode(t)),o=16,c=a.slice(a.byteLength-o),d=a.slice(0,a.byteLength-o),p=new Uint8Array(c),h=new Uint8Array(d),_=new Uint8Array([...n,...p,...h]);return(0,Bt.uint8ArrayToHex)(_)}async decrypt(t){const r=this.secret;if(r.length!==64)throw Error("secret must be 256 bits");return new Promise((n,i)=>{(async function(){const s=await crypto.subtle.importKey("raw",(0,Bt.hexStringToUint8Array)(r),{name:"aes-gcm"},!1,["encrypt","decrypt"]),a=(0,Bt.hexStringToUint8Array)(t),o=a.slice(0,12),c=a.slice(12,28),d=a.slice(28),p=new Uint8Array([...d,...c]),h={name:"AES-GCM",iv:new Uint8Array(o)};try{const _=await window.crypto.subtle.decrypt(h,s,p),g=new TextDecoder;n(g.decode(_))}catch(_){i(_)}})()})}}lr.WalletLinkCipher=Ec;var ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.WalletLinkHTTP=void 0;class Sc{constructor(t,r,n){this.linkAPIUrl=t,this.sessionId=r;const i=`${r}:${n}`;this.auth=`Basic ${btoa(i)}`}async markUnseenEventsAsSeen(t){return Promise.all(t.map(r=>fetch(`${this.linkAPIUrl}/events/${r.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(r=>console.error("Unabled to mark event as failed:",r))}async fetchUnseenEvents(){var t;const r=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(r.ok){const{events:n,error:i}=await r.json();if(i)throw new Error(`Check unseen events failed: ${i}`);const s=(t=n==null?void 0:n.filter(a=>a.event==="Web3Response").map(a=>({type:"Event",sessionId:this.sessionId,eventId:a.id,event:a.event,data:a.data})))!==null&&t!==void 0?t:[];return this.markUnseenEventsAsSeen(s),s}throw new Error(`Check unseen events failed: ${r.status}`)}}ur.WalletLinkHTTP=Sc;var ot={};Object.defineProperty(ot,"__esModule",{value:!0});ot.WalletLinkWebSocket=ot.ConnectionState=void 0;var it;(function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED"})(it||(ot.ConnectionState=it={}));class Cc{setConnectionStateListener(t){this.connectionStateListener=t}setIncomingDataListener(t){this.incomingDataListener=t}constructor(t,r=WebSocket){this.WebSocketClass=r,this.webSocket=null,this.pendingData=[],this.url=t.replace(/^http/,"ws")}async connect(){if(this.webSocket)throw new Error("webSocket object is not null");return new Promise((t,r)=>{var n;let i;try{this.webSocket=i=new this.WebSocketClass(this.url)}catch(s){r(s);return}(n=this.connectionStateListener)===null||n===void 0||n.call(this,it.CONNECTING),i.onclose=s=>{var a;this.clearWebSocket(),r(new Error(`websocket error ${s.code}: ${s.reason}`)),(a=this.connectionStateListener)===null||a===void 0||a.call(this,it.DISCONNECTED)},i.onopen=s=>{var a;t(),(a=this.connectionStateListener)===null||a===void 0||a.call(this,it.CONNECTED),this.pendingData.length>0&&([...this.pendingData].forEach(c=>this.sendData(c)),this.pendingData=[])},i.onmessage=s=>{var a,o;if(s.data==="h")(a=this.incomingDataListener)===null||a===void 0||a.call(this,{type:"Heartbeat"});else try{const c=JSON.parse(s.data);(o=this.incomingDataListener)===null||o===void 0||o.call(this,c)}catch{}}})}disconnect(){var t;const{webSocket:r}=this;if(r){this.clearWebSocket(),(t=this.connectionStateListener)===null||t===void 0||t.call(this,it.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{r.close()}catch{}}}sendData(t){const{webSocket:r}=this;if(!r){this.pendingData.push(t),this.connect();return}r.send(t)}clearWebSocket(){const{webSocket:t}=this;t&&(this.webSocket=null,t.onclose=null,t.onerror=null,t.onmessage=null,t.onopen=null)}}ot.WalletLinkWebSocket=Cc;Object.defineProperty(cr,"__esModule",{value:!0});cr.WalletLinkConnection=void 0;const ki=ye,xc=lr,kc=ur,Wt=ot,tt=ee,Ri=1e4,Rc=6e4;class Ic{constructor({session:t,linkAPIUrl:r,listener:n,WebSocketClass:i=WebSocket}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=(0,tt.IntNumber)(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=a=>{if(!a)return;new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",c=>a.JsonRpcUrl&&this.handleChainUpdated(c,a.JsonRpcUrl)]]).forEach((c,d)=>{const p=a[d];p!==void 0&&c(p)})},this.handleDestroyed=a=>{var o;a==="1"&&((o=this.listener)===null||o===void 0||o.resetAndReload())},this.handleAccountUpdated=async a=>{var o;{const c=await this.cipher.decrypt(a);(o=this.listener)===null||o===void 0||o.accountUpdated(c)}},this.handleMetadataUpdated=async(a,o)=>{var c;{const d=await this.cipher.decrypt(o);(c=this.listener)===null||c===void 0||c.metadataUpdated(a,d)}},this.handleWalletUsernameUpdated=async a=>{this.handleMetadataUpdated(ki.WALLET_USER_NAME_KEY,a)},this.handleAppVersionUpdated=async a=>{this.handleMetadataUpdated(ki.APP_VERSION_KEY,a)},this.handleChainUpdated=async(a,o)=>{var c;{const d=await this.cipher.decrypt(a),p=await this.cipher.decrypt(o);(c=this.listener)===null||c===void 0||c.chainUpdated(d,p)}},this.session=t,this.cipher=new xc.WalletLinkCipher(t.secret),this.listener=n;const s=new Wt.WalletLinkWebSocket(`${r}/rpc`,i);s.setConnectionStateListener(async a=>{let o=!1;switch(a){case Wt.ConnectionState.DISCONNECTED:if(!this.destroyed){const c=async()=>{await new Promise(d=>setTimeout(d,5e3)),this.destroyed||s.connect().catch(()=>{c()})};c()}break;case Wt.ConnectionState.CONNECTED:try{await this.authenticate(),this.sendIsLinked(),this.sendGetSessionConfig(),o=!0}catch{}this.updateLastHeartbeat(),setInterval(()=>{this.heartbeat()},Ri),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();break;case Wt.ConnectionState.CONNECTING:break}this.connected!==o&&(this.connected=o)}),s.setIncomingDataListener(a=>{var o;switch(a.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{const c=a.type==="IsLinkedOK"?a.linked:void 0;this.linked=c||a.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":{this.handleSessionMetadataUpdated(a.metadata);break}case"Event":{this.handleIncomingEvent(a);break}}a.id!==void 0&&((o=this.requestResolutions.get(a.id))===null||o===void 0||o(a))}),this.ws=s,this.http=new kc.WalletLinkHTTP(r,t.id,t.key)}connect(){if(this.destroyed)throw new Error("instance is destroyed");this.ws.connect()}destroy(){this.destroyed=!0,this.ws.disconnect(),this.listener=void 0}get isDestroyed(){return this.destroyed}get connected(){return this._connected}set connected(t){var r;this._connected=t,t&&((r=this.onceConnected)===null||r===void 0||r.call(this))}setOnceConnected(t){return new Promise(r=>{this.connected?t().then(r):this.onceConnected=()=>{t().then(r),this.onceConnected=void 0}})}get linked(){return this._linked}set linked(t){var r,n;this._linked=t,t&&((r=this.onceLinked)===null||r===void 0||r.call(this)),(n=this.listener)===null||n===void 0||n.linkedUpdated(t)}setOnceLinked(t){return new Promise(r=>{this.linked?t().then(r):this.onceLinked=()=>{t().then(r),this.onceLinked=void 0}})}async handleIncomingEvent(t){var r;if(!(t.type!=="Event"||t.event!=="Web3Response")){const n=await this.cipher.decrypt(t.data),i=JSON.parse(n);if(i.type!=="WEB3_RESPONSE")return;(r=this.listener)===null||r===void 0||r.handleWeb3ResponseMessage(i)}}async checkUnseenEvents(){if(!this.connected){this.shouldFetchUnseenEventsOnConnect=!0;return}await new Promise(t=>setTimeout(t,250));try{await this.fetchUnseenEventsAPI()}catch(t){console.error("Unable to check for unseen events",t)}}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=!1,(await this.http.fetchUnseenEvents()).forEach(r=>this.handleIncomingEvent(r))}async setSessionMetadata(t,r){const n={type:"SetSessionConfig",id:(0,tt.IntNumber)(this.nextReqId++),sessionId:this.session.id,metadata:{[t]:r}};return this.setOnceConnected(async()=>{const i=await this.makeRequest(n);if(i.type==="Fail")throw new Error(i.error||"failed to set session metadata")})}async publishEvent(t,r,n=!1){const i=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},r),{origin:location.origin,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),s={type:"PublishEvent",id:(0,tt.IntNumber)(this.nextReqId++),sessionId:this.session.id,event:t,data:i,callWebhook:n};return this.setOnceLinked(async()=>{const a=await this.makeRequest(s);if(a.type==="Fail")throw new Error(a.error||"failed to publish event");return a.eventId})}sendData(t){this.ws.sendData(JSON.stringify(t))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>Ri*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}async makeRequest(t,r=Rc){const n=t.id;this.sendData(t);let i;return Promise.race([new Promise((s,a)=>{i=window.setTimeout(()=>{a(new Error(`request ${n} timed out`))},r)}),new Promise(s=>{this.requestResolutions.set(n,a=>{clearTimeout(i),s(a),this.requestResolutions.delete(n)})})])}async authenticate(){const t={type:"HostSession",id:(0,tt.IntNumber)(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key},r=await this.makeRequest(t);if(r.type==="Fail")throw new Error(r.error||"failed to authenticate")}sendIsLinked(){const t={type:"IsLinked",id:(0,tt.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(t)}sendGetSessionConfig(){const t={type:"GetSessionConfig",id:(0,tt.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(t)}}cr.WalletLinkConnection=Ic;var dr={},Gs={exports:{}},Zs=He.Buffer;function hr(e,t){this._block=Zs.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}hr.prototype.update=function(e,t){typeof e=="string"&&(t=t||"utf8",e=Zs.from(e,t));for(var r=this._block,n=this._blockSize,i=e.length,s=this._len,a=0;a<i;){for(var o=s%n,c=Math.min(i-a,n-o),d=0;d<c;d++)r[o+d]=e[a+d];s+=c,a+=c,s%n===0&&this._update(r)}return this._len+=i,this};hr.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return e?s.toString(e):s};hr.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var ht=hr,Mc=_e,Ys=ht,Ac=He.Buffer,Lc=[1518500249,1859775393,-1894007588,-899497514],Tc=new Array(80);function Rt(){this.init(),this._w=Tc,Ys.call(this,64,56)}Mc(Rt,Ys);Rt.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Pc(e){return e<<5|e>>>27}function Nc(e){return e<<30|e>>>2}function Oc(e,t,r,n){return e===0?t&r|~t&n:e===2?t&r|t&n|r&n:t^r^n}Rt.prototype._update=function(e){for(var t=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,a=this._e|0,o=0;o<16;++o)t[o]=e.readInt32BE(o*4);for(;o<80;++o)t[o]=t[o-3]^t[o-8]^t[o-14]^t[o-16];for(var c=0;c<80;++c){var d=~~(c/20),p=Pc(r)+Oc(d,n,i,s)+a+t[c]+Lc[d]|0;a=s,s=i,i=Nc(n),n=r,r=p}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0};Rt.prototype._hash=function(){var e=Ac.allocUnsafe(20);return e.writeInt32BE(this._a|0,0),e.writeInt32BE(this._b|0,4),e.writeInt32BE(this._c|0,8),e.writeInt32BE(this._d|0,12),e.writeInt32BE(this._e|0,16),e};var Dc=Rt,jc=_e,Js=ht,Bc=He.Buffer,Wc=[1518500249,1859775393,-1894007588,-899497514],Uc=new Array(80);function It(){this.init(),this._w=Uc,Js.call(this,64,56)}jc(It,Js);It.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Hc(e){return e<<1|e>>>31}function $c(e){return e<<5|e>>>27}function Fc(e){return e<<30|e>>>2}function qc(e,t,r,n){return e===0?t&r|~t&n:e===2?t&r|t&n|r&n:t^r^n}It.prototype._update=function(e){for(var t=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,a=this._e|0,o=0;o<16;++o)t[o]=e.readInt32BE(o*4);for(;o<80;++o)t[o]=Hc(t[o-3]^t[o-8]^t[o-14]^t[o-16]);for(var c=0;c<80;++c){var d=~~(c/20),p=$c(r)+qc(d,n,i,s)+a+t[c]+Wc[d]|0;a=s,s=i,i=Fc(n),n=r,r=p}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0};It.prototype._hash=function(){var e=Bc.allocUnsafe(20);return e.writeInt32BE(this._a|0,0),e.writeInt32BE(this._b|0,4),e.writeInt32BE(this._c|0,8),e.writeInt32BE(this._d|0,12),e.writeInt32BE(this._e|0,16),e};var zc=It,Kc=_e,Qs=ht,Vc=He.Buffer,Gc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Zc=new Array(64);function Mt(){this.init(),this._w=Zc,Qs.call(this,64,56)}Kc(Mt,Qs);Mt.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function Yc(e,t,r){return r^e&(t^r)}function Jc(e,t,r){return e&t|r&(e|t)}function Qc(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function Xc(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function el(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function tl(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}Mt.prototype._update=function(e){for(var t=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,a=this._e|0,o=this._f|0,c=this._g|0,d=this._h|0,p=0;p<16;++p)t[p]=e.readInt32BE(p*4);for(;p<64;++p)t[p]=tl(t[p-2])+t[p-7]+el(t[p-15])+t[p-16]|0;for(var h=0;h<64;++h){var _=d+Xc(a)+Yc(a,o,c)+Gc[h]+t[h]|0,g=Qc(r)+Jc(r,n,i)|0;d=c,c=o,o=a,a=s+_|0,s=i,i=n,n=r,r=_+g|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0,this._f=o+this._f|0,this._g=c+this._g|0,this._h=d+this._h|0};Mt.prototype._hash=function(){var e=Vc.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e};var Xs=Mt,rl=_e,nl=Xs,il=ht,sl=He.Buffer,al=new Array(64);function fr(){this.init(),this._w=al,il.call(this,64,56)}rl(fr,nl);fr.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};fr.prototype._hash=function(){var e=sl.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e};var ol=fr,cl=_e,ea=ht,ll=He.Buffer,Ii=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],ul=new Array(160);function At(){this.init(),this._w=ul,ea.call(this,128,112)}cl(At,ea);At.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Mi(e,t,r){return r^e&(t^r)}function Ai(e,t,r){return e&t|r&(e|t)}function Li(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function Ti(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function dl(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function hl(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function fl(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function _l(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function Z(e,t){return e>>>0<t>>>0?1:0}At.prototype._update=function(e){for(var t=this._w,r=this._ah|0,n=this._bh|0,i=this._ch|0,s=this._dh|0,a=this._eh|0,o=this._fh|0,c=this._gh|0,d=this._hh|0,p=this._al|0,h=this._bl|0,_=this._cl|0,g=this._dl|0,w=this._el|0,k=this._fl|0,m=this._gl|0,f=this._hl|0,y=0;y<32;y+=2)t[y]=e.readInt32BE(y*4),t[y+1]=e.readInt32BE(y*4+4);for(;y<160;y+=2){var E=t[y-30],S=t[y-15*2+1],R=dl(E,S),A=hl(S,E);E=t[y-2*2],S=t[y-2*2+1];var W=fl(E,S),P=_l(S,E),T=t[y-7*2],$=t[y-7*2+1],te=t[y-16*2],Se=t[y-16*2+1],K=A+$|0,ne=R+T+Z(K,A)|0;K=K+P|0,ne=ne+W+Z(K,P)|0,K=K+Se|0,ne=ne+te+Z(K,Se)|0,t[y]=ne,t[y+1]=K}for(var ie=0;ie<160;ie+=2){ne=t[ie],K=t[ie+1];var je=Ai(r,n,i),oe=Ai(p,h,_),Ce=Li(r,p),ce=Li(p,r),xe=Ti(a,w),Be=Ti(w,a),ke=Ii[ie],se=Ii[ie+1],We=Mi(a,o,c),Re=Mi(w,k,m),v=f+Be|0,b=d+xe+Z(v,f)|0;v=v+Re|0,b=b+We+Z(v,Re)|0,v=v+se|0,b=b+ke+Z(v,se)|0,v=v+K|0,b=b+ne+Z(v,K)|0;var x=ce+oe|0,L=Ce+je+Z(x,ce)|0;d=c,f=m,c=o,m=k,o=a,k=w,w=g+v|0,a=s+b+Z(w,g)|0,s=i,g=_,i=n,_=h,n=r,h=p,p=v+x|0,r=b+L+Z(p,v)|0}this._al=this._al+p|0,this._bl=this._bl+h|0,this._cl=this._cl+_|0,this._dl=this._dl+g|0,this._el=this._el+w|0,this._fl=this._fl+k|0,this._gl=this._gl+m|0,this._hl=this._hl+f|0,this._ah=this._ah+r+Z(this._al,p)|0,this._bh=this._bh+n+Z(this._bl,h)|0,this._ch=this._ch+i+Z(this._cl,_)|0,this._dh=this._dh+s+Z(this._dl,g)|0,this._eh=this._eh+a+Z(this._el,w)|0,this._fh=this._fh+o+Z(this._fl,k)|0,this._gh=this._gh+c+Z(this._gl,m)|0,this._hh=this._hh+d+Z(this._hl,f)|0};At.prototype._hash=function(){var e=ll.allocUnsafe(64);function t(r,n,i){e.writeInt32BE(r,i),e.writeInt32BE(n,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e};var ta=At,pl=_e,gl=ta,bl=ht,vl=He.Buffer,yl=new Array(160);function _r(){this.init(),this._w=yl,bl.call(this,128,112)}pl(_r,gl);_r.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};_r.prototype._hash=function(){var e=vl.allocUnsafe(48);function t(r,n,i){e.writeInt32BE(r,i),e.writeInt32BE(n,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e};var ml=_r,Ze=Gs.exports=function(t){t=t.toLowerCase();var r=Ze[t];if(!r)throw new Error(t+" is not supported (we accept pull requests)");return new r};Ze.sha=Dc;Ze.sha1=zc;Ze.sha224=ol;Ze.sha256=Xs;Ze.sha384=ml;Ze.sha512=ta;var wl=Gs.exports;Object.defineProperty(dr,"__esModule",{value:!0});dr.WalletLinkSession=void 0;const El=wl,Pi=M,Ni="session:id",Oi="session:secret",Di="session:linked";class Zn{constructor(t,r,n,i){this._storage=t,this._id=r||(0,Pi.randomBytesHex)(16),this._secret=n||(0,Pi.randomBytesHex)(32),this._key=new El.sha256().update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!i}static load(t){const r=t.getItem(Ni),n=t.getItem(Di),i=t.getItem(Oi);return r&&i?new Zn(t,r,i,n==="1"):null}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(t){this._linked=t,this.persistLinked()}save(){return this._storage.setItem(Ni,this._id),this._storage.setItem(Oi,this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem(Di,this._linked?"1":"0")}}dr.WalletLinkSession=Zn;var ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.isDarkMode=ae.isMobileWeb=ae.getLocation=ae.createQrUrl=void 0;function Sl(e,t,r,n,i,s){const a=n?"parent-id":"id",o=new URLSearchParams({[a]:e,secret:t,server:r,v:i,chainId:s.toString()}).toString();return`${r}/#/link?${o}`}ae.createQrUrl=Sl;function Cl(){try{return window.frameElement!==null}catch{return!1}}function xl(){try{return Cl()&&window.top?window.top.location:window.location}catch{return window.location}}ae.getLocation=xl;function kl(){var e;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((e=window==null?void 0:window.navigator)===null||e===void 0?void 0:e.userAgent)}ae.isMobileWeb=kl;function Rl(){var e,t;return(t=(e=window==null?void 0:window.matchMedia)===null||e===void 0?void 0:e.call(window,"(prefers-color-scheme: dark)").matches)!==null&&t!==void 0?t:!1}ae.isDarkMode=Rl;var pr={},Lt={},Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';var Il=J&&J.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.injectCssReset=void 0;const Ml=Il(Yn);function Al(){const e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(Ml.default)),document.documentElement.appendChild(e)}Lt.injectCssReset=Al;var Jn={};function ra(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=ra(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function ji(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=ra(e))&&(n&&(n+=" "),n+=t);return n}const Ll=Object.freeze(Object.defineProperty({__proto__:null,clsx:ji,default:ji},Symbol.toStringTag,{value:"Module"})),na=qn(Ll);var Tt,q,ia,sa,qe,Bi,aa,Dn,Qn,jn,Bn,oa,Et={},ca=[],Tl=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,gr=Array.isArray;function Te(e,t){for(var r in t)e[r]=t[r];return e}function la(e){var t=e.parentNode;t&&t.removeChild(e)}function Wn(e,t,r){var n,i,s,a={};for(s in t)s=="key"?n=t[s]:s=="ref"?i=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?Tt.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)a[s]===void 0&&(a[s]=e.defaultProps[s]);return bt(e,a,n,i,null)}function bt(e,t,r,n,i){var s={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i??++ia,__i:-1,__u:0};return i==null&&q.vnode!=null&&q.vnode(s),s}function Pl(){return{current:null}}function Pt(e){return e.children}function vt(e,t){this.props=e,this.context=t}function ze(e,t){if(t==null)return e.__?ze(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?ze(e):null}function ua(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return ua(e)}}function Un(e){(!e.__d&&(e.__d=!0)&&qe.push(e)&&!Gt.__r++||Bi!==q.debounceRendering)&&((Bi=q.debounceRendering)||aa)(Gt)}function Gt(){var e,t,r,n,i,s,a,o;for(qe.sort(Dn);e=qe.shift();)e.__d&&(t=qe.length,n=void 0,s=(i=(r=e).__v).__e,a=[],o=[],r.__P&&((n=Te({},i)).__v=i.__v+1,q.vnode&&q.vnode(n),Xn(r.__P,n,i,r.__n,r.__P.namespaceURI,32&i.__u?[s]:null,a,s??ze(i),!!(32&i.__u),o),n.__v=i.__v,n.__.__k[n.__i]=n,_a(a,n,o),n.__e!=s&&ua(n)),qe.length>t&&qe.sort(Dn));Gt.__r=0}function da(e,t,r,n,i,s,a,o,c,d,p){var h,_,g,w,k,m=n&&n.__k||ca,f=t.length;for(r.__d=c,Nl(r,t,m),c=r.__d,h=0;h<f;h++)(g=r.__k[h])!=null&&typeof g!="boolean"&&typeof g!="function"&&(_=g.__i===-1?Et:m[g.__i]||Et,g.__i=h,Xn(e,g,_,i,s,a,o,c,d,p),w=g.__e,g.ref&&_.ref!=g.ref&&(_.ref&&ei(_.ref,null,g),p.push(g.ref,g.__c||w,g)),k==null&&w!=null&&(k=w),65536&g.__u||_.__k===g.__k?(c&&typeof g.type=="string"&&!e.contains(c)&&(c=ze(_)),c=ha(g,c,e)):typeof g.type=="function"&&g.__d!==void 0?c=g.__d:w&&(c=w.nextSibling),g.__d=void 0,g.__u&=-196609);r.__d=c,r.__e=k}function Nl(e,t,r){var n,i,s,a,o,c=t.length,d=r.length,p=d,h=0;for(e.__k=[],n=0;n<c;n++)a=n+h,(i=e.__k[n]=(i=t[n])==null||typeof i=="boolean"||typeof i=="function"?null:typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?bt(null,i,null,null,null):gr(i)?bt(Pt,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?bt(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)!=null?(i.__=e,i.__b=e.__b+1,o=Ol(i,r,a,p),i.__i=o,s=null,o!==-1&&(p--,(s=r[o])&&(s.__u|=131072)),s==null||s.__v===null?(o==-1&&h--,typeof i.type!="function"&&(i.__u|=65536)):o!==a&&(o==a-1?h=o-a:o==a+1?h++:o>a?p>c-a?h+=o-a:h--:o<a&&h++,o!==n+h&&(i.__u|=65536))):(s=r[a])&&s.key==null&&s.__e&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=ze(s)),Hn(s,s,!1),r[a]=null,p--);if(p)for(n=0;n<d;n++)(s=r[n])!=null&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=ze(s)),Hn(s,s))}function ha(e,t,r){var n,i;if(typeof e.type=="function"){for(n=e.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=e,t=ha(n[i],t,r));return t}e.__e!=t&&(r.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function fa(e,t){return t=t||[],e==null||typeof e=="boolean"||(gr(e)?e.some(function(r){fa(r,t)}):t.push(e)),t}function Ol(e,t,r,n){var i=e.key,s=e.type,a=r-1,o=r+1,c=t[r];if(c===null||c&&i==c.key&&s===c.type&&!(131072&c.__u))return r;if(n>(c!=null&&!(131072&c.__u)?1:0))for(;a>=0||o<t.length;){if(a>=0){if((c=t[a])&&!(131072&c.__u)&&i==c.key&&s===c.type)return a;a--}if(o<t.length){if((c=t[o])&&!(131072&c.__u)&&i==c.key&&s===c.type)return o;o++}}return-1}function Wi(e,t,r){t[0]==="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||Tl.test(t)?r:r+"px"}function Ut(e,t,r,n,i){var s;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||Wi(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||Wi(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=r,r?n?r.u=n.u:(r.u=Qn,e.addEventListener(t,s?Bn:jn,s)):e.removeEventListener(t,s?Bn:jn,s);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function Ui(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=Qn++;else if(t.t<r.u)return;return r(q.event?q.event(t):t)}}}function Xn(e,t,r,n,i,s,a,o,c,d){var p,h,_,g,w,k,m,f,y,E,S,R,A,W,P,T,$=t.type;if(t.constructor!==void 0)return null;128&r.__u&&(c=!!(32&r.__u),s=[o=t.__e=r.__e]),(p=q.__b)&&p(t);e:if(typeof $=="function")try{if(f=t.props,y="prototype"in $&&$.prototype.render,E=(p=$.contextType)&&n[p.__c],S=p?E?E.props.value:p.__:n,r.__c?m=(h=t.__c=r.__c).__=h.__E:(y?t.__c=h=new $(f,S):(t.__c=h=new vt(f,S),h.constructor=$,h.render=jl),E&&E.sub(h),h.props=f,h.state||(h.state={}),h.context=S,h.__n=n,_=h.__d=!0,h.__h=[],h._sb=[]),y&&h.__s==null&&(h.__s=h.state),y&&$.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=Te({},h.__s)),Te(h.__s,$.getDerivedStateFromProps(f,h.__s))),g=h.props,w=h.state,h.__v=t,_)y&&$.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),y&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(y&&$.getDerivedStateFromProps==null&&f!==g&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(f,S),!h.__e&&(h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(f,h.__s,S)===!1||t.__v===r.__v)){for(t.__v!==r.__v&&(h.props=f,h.state=h.__s,h.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(te){te&&(te.__=t)}),R=0;R<h._sb.length;R++)h.__h.push(h._sb[R]);h._sb=[],h.__h.length&&a.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(f,h.__s,S),y&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(g,w,k)})}if(h.context=S,h.props=f,h.__P=e,h.__e=!1,A=q.__r,W=0,y){for(h.state=h.__s,h.__d=!1,A&&A(t),p=h.render(h.props,h.state,h.context),P=0;P<h._sb.length;P++)h.__h.push(h._sb[P]);h._sb=[]}else do h.__d=!1,A&&A(t),p=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++W<25);h.state=h.__s,h.getChildContext!=null&&(n=Te(Te({},n),h.getChildContext())),y&&!_&&h.getSnapshotBeforeUpdate!=null&&(k=h.getSnapshotBeforeUpdate(g,w)),da(e,gr(T=p!=null&&p.type===Pt&&p.key==null?p.props.children:p)?T:[T],t,r,n,i,s,a,o,c,d),h.base=t.__e,t.__u&=-161,h.__h.length&&a.push(h),m&&(h.__E=h.__=null)}catch(te){t.__v=null,c||s!=null?(t.__e=o,t.__u|=c?160:32,s[s.indexOf(o)]=null):(t.__e=r.__e,t.__k=r.__k),q.__e(te,t,r)}else s==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=Dl(r.__e,t,r,n,i,s,a,c,d);(p=q.diffed)&&p(t)}function _a(e,t,r){t.__d=void 0;for(var n=0;n<r.length;n++)ei(r[n],r[++n],r[++n]);q.__c&&q.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(s){s.call(i)})}catch(s){q.__e(s,i.__v)}})}function Dl(e,t,r,n,i,s,a,o,c){var d,p,h,_,g,w,k,m=r.props,f=t.props,y=t.type;if(y==="svg"?i="http://www.w3.org/2000/svg":y==="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(d=0;d<s.length;d++)if((g=s[d])&&"setAttribute"in g==!!y&&(y?g.localName===y:g.nodeType===3)){e=g,s[d]=null;break}}if(e==null){if(y===null)return document.createTextNode(f);e=document.createElementNS(i,y,f.is&&f),s=null,o=!1}if(y===null)m===f||o&&e.data===f||(e.data=f);else{if(s=s&&Tt.call(e.childNodes),m=r.props||Et,!o&&s!=null)for(m={},d=0;d<e.attributes.length;d++)m[(g=e.attributes[d]).name]=g.value;for(d in m)if(g=m[d],d!="children"){if(d=="dangerouslySetInnerHTML")h=g;else if(d!=="key"&&!(d in f)){if(d=="value"&&"defaultValue"in f||d=="checked"&&"defaultChecked"in f)continue;Ut(e,d,null,g,i)}}for(d in f)g=f[d],d=="children"?_=g:d=="dangerouslySetInnerHTML"?p=g:d=="value"?w=g:d=="checked"?k=g:d==="key"||o&&typeof g!="function"||m[d]===g||Ut(e,d,g,m[d],i);if(p)o||h&&(p.__html===h.__html||p.__html===e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(h&&(e.innerHTML=""),da(e,gr(_)?_:[_],t,r,n,y==="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,a,s?s[0]:r.__k&&ze(r,0),o,c),s!=null)for(d=s.length;d--;)s[d]!=null&&la(s[d]);o||(d="value",w!==void 0&&(w!==e[d]||y==="progress"&&!w||y==="option"&&w!==m[d])&&Ut(e,d,w,m[d],i),d="checked",k!==void 0&&k!==e[d]&&Ut(e,d,k,m[d],i))}return e}function ei(e,t,r){try{typeof e=="function"?e(t):e.current=t}catch(n){q.__e(n,r)}}function Hn(e,t,r){var n,i;if(q.unmount&&q.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||ei(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){q.__e(s,t)}n.base=n.__P=null}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&Hn(n[i],t,r||typeof e.type!="function");r||e.__e==null||la(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function jl(e,t,r){return this.constructor(e,r)}function pa(e,t,r){var n,i,s,a;q.__&&q.__(e,t),i=(n=typeof r=="function")?null:r&&r.__k||t.__k,s=[],a=[],Xn(t,e=(!n&&r||t).__k=Wn(Pt,null,[e]),i||Et,Et,t.namespaceURI,!n&&r?[r]:i?null:t.firstChild?Tt.call(t.childNodes):null,s,!n&&r?r:i?i.__e:t.firstChild,n,a),_a(s,e,a)}function ga(e,t){pa(e,t,ga)}function Bl(e,t,r){var n,i,s,a,o=Te({},e.props);for(s in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)s=="key"?n=t[s]:s=="ref"?i=t[s]:o[s]=t[s]===void 0&&a!==void 0?a[s]:t[s];return arguments.length>2&&(o.children=arguments.length>3?Tt.call(arguments,2):r),bt(e.type,o,n||e.key,i||e.ref,null)}function Wl(e,t){var r={__c:t="__cC"+oa++,__:e,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,s;return this.getChildContext||(i=[],(s={})[t]=this,this.getChildContext=function(){return s},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&i.some(function(o){o.__e=!0,Un(o)})},this.sub=function(a){i.push(a);var o=a.componentWillUnmount;a.componentWillUnmount=function(){i&&i.splice(i.indexOf(a),1),o&&o.call(a)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r}Tt=ca.slice,q={__e:function(e,t,r,n){for(var i,s,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(e)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,n||{}),a=i.__d),a)return i.__E=i}catch(o){e=o}throw e}},ia=0,sa=function(e){return e!=null&&e.constructor==null},vt.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Te({},this.state),typeof e=="function"&&(e=e(Te({},r),this.props)),e&&Te(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),Un(this))},vt.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Un(this))},vt.prototype.render=Pt,qe=[],aa=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Dn=function(e,t){return e.__v.__b-t.__v.__b},Gt.__r=0,Qn=0,jn=Ui(!1),Bn=Ui(!0),oa=0;const Ul=Object.freeze(Object.defineProperty({__proto__:null,Component:vt,Fragment:Pt,cloneElement:Bl,createContext:Wl,createElement:Wn,createRef:Pl,h:Wn,hydrate:ga,get isValidElement(){return sa},get options(){return q},render:pa,toChildArray:fa},Symbol.toStringTag,{value:"Module"})),ba=qn(Ul);var De,H,An,Hi,ct=0,va=[],z=q,$i=z.__b,Fi=z.__r,qi=z.diffed,zi=z.__c,Ki=z.unmount,Vi=z.__;function Ye(e,t){z.__h&&z.__h(H,e,ct||t),ct=0;var r=H.__H||(H.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function ya(e){return ct=1,ma(Ea,e)}function ma(e,t,r){var n=Ye(De++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):Ea(void 0,t),function(o){var c=n.__N?n.__N[0]:n.__[0],d=n.t(c,o);c!==d&&(n.__N=[d,n.__[1]],n.__c.setState({}))}],n.__c=H,!H.u)){var i=function(o,c,d){if(!n.__c.__H)return!0;var p=n.__c.__H.__.filter(function(_){return!!_.__c});if(p.every(function(_){return!_.__N}))return!s||s.call(this,o,c,d);var h=!1;return p.forEach(function(_){if(_.__N){var g=_.__[0];_.__=_.__N,_.__N=void 0,g!==_.__[0]&&(h=!0)}}),!(!h&&n.__c.props===o)&&(!s||s.call(this,o,c,d))};H.u=!0;var s=H.shouldComponentUpdate,a=H.componentWillUpdate;H.componentWillUpdate=function(o,c,d){if(this.__e){var p=s;s=void 0,i(o,c,d),s=p}a&&a.call(this,o,c,d)},H.shouldComponentUpdate=i}return n.__N||n.__}function Hl(e,t){var r=Ye(De++,3);!z.__s&&ri(r.__H,t)&&(r.__=e,r.i=t,H.__H.__h.push(r))}function wa(e,t){var r=Ye(De++,4);!z.__s&&ri(r.__H,t)&&(r.__=e,r.i=t,H.__h.push(r))}function $l(e){return ct=5,ti(function(){return{current:e}},[])}function Fl(e,t,r){ct=6,wa(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},r==null?r:r.concat(e))}function ti(e,t){var r=Ye(De++,7);return ri(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function ql(e,t){return ct=8,ti(function(){return e},t)}function zl(e){var t=H.context[e.__c],r=Ye(De++,9);return r.c=e,t?(r.__==null&&(r.__=!0,t.sub(H)),t.props.value):e.__}function Kl(e,t){z.useDebugValue&&z.useDebugValue(t?t(e):e)}function Vl(e){var t=Ye(De++,10),r=ya();return t.__=e,H.componentDidCatch||(H.componentDidCatch=function(n,i){t.__&&t.__(n,i),r[1](n)}),[r[0],function(){r[1](void 0)}]}function Gl(){var e=Ye(De++,11);if(!e.__){for(var t=H.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var r=t.__m||(t.__m=[0,0]);e.__="P"+r[0]+"-"+r[1]++}return e.__}function Zl(){for(var e;e=va.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(qt),e.__H.__h.forEach($n),e.__H.__h=[]}catch(t){e.__H.__h=[],z.__e(t,e.__v)}}z.__b=function(e){H=null,$i&&$i(e)},z.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Vi&&Vi(e,t)},z.__r=function(e){Fi&&Fi(e),De=0;var t=(H=e.__c).__H;t&&(An===H?(t.__h=[],H.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.i=r.__N=void 0})):(t.__h.forEach(qt),t.__h.forEach($n),t.__h=[],De=0)),An=H},z.diffed=function(e){qi&&qi(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(va.push(t)!==1&&Hi===z.requestAnimationFrame||((Hi=z.requestAnimationFrame)||Yl)(Zl)),t.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.i=void 0})),An=H=null},z.__c=function(e,t){t.some(function(r){try{r.__h.forEach(qt),r.__h=r.__h.filter(function(n){return!n.__||$n(n)})}catch(n){t.some(function(i){i.__h&&(i.__h=[])}),t=[],z.__e(n,r.__v)}}),zi&&zi(e,t)},z.unmount=function(e){Ki&&Ki(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{qt(n)}catch(i){t=i}}),r.__H=void 0,t&&z.__e(t,r.__v))};var Gi=typeof requestAnimationFrame=="function";function Yl(e){var t,r=function(){clearTimeout(n),Gi&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);Gi&&(t=requestAnimationFrame(r))}function qt(e){var t=H,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),H=t}function $n(e){var t=H;e.__c=e.__(),H=t}function ri(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function Ea(e,t){return typeof t=="function"?t(e):t}const Jl=Object.freeze(Object.defineProperty({__proto__:null,useCallback:ql,useContext:zl,useDebugValue:Kl,useEffect:Hl,useErrorBoundary:Vl,useId:Gl,useImperativeHandle:Fl,useLayoutEffect:wa,useMemo:ti,useReducer:ma,useRef:$l,useState:ya},Symbol.toStringTag,{value:"Module"})),Ql=qn(Jl);var ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.default=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}";(function(e){var t=J&&J.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(e,"__esModule",{value:!0}),e.SnackbarInstance=e.SnackbarContainer=e.Snackbar=void 0;const r=t(na),n=ba,i=Ql,s=ae,a=t(ni),o="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",c="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";class d{constructor(){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=(0,s.isDarkMode)()}attach(g){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",g.appendChild(this.root),this.render()}presentItem(g){const w=this.nextItemKey++;return this.items.set(w,g),this.render(),()=>{this.items.delete(w),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&(0,n.render)((0,n.h)("div",null,(0,n.h)(e.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([g,w])=>(0,n.h)(e.SnackbarInstance,Object.assign({},w,{key:g}))))),this.root)}}e.Snackbar=d;const p=_=>(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-container")},(0,n.h)("style",null,a.default),(0,n.h)("div",{class:"-cbwsdk-snackbar"},_.children));e.SnackbarContainer=p;const h=({autoExpand:_,message:g,menuItems:w})=>{const[k,m]=(0,i.useState)(!0),[f,y]=(0,i.useState)(_??!1);(0,i.useEffect)(()=>{const S=[window.setTimeout(()=>{m(!1)},1),window.setTimeout(()=>{y(!0)},1e4)];return()=>{S.forEach(window.clearTimeout)}});const E=()=>{y(!f)};return(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-instance",k&&"-cbwsdk-snackbar-instance-hidden",f&&"-cbwsdk-snackbar-instance-expanded")},(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:E},(0,n.h)("img",{src:o,class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},g),(0,n.h)("div",{class:"-gear-container"},!f&&(0,n.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,n.h)("img",{src:c,class:"-gear-icon",title:"Expand"}))),w&&w.length>0&&(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},w.map((S,R)=>(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-instance-menu-item",S.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:S.onClick,key:R},(0,n.h)("svg",{width:S.svgWidth,height:S.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("path",{"fill-rule":S.defaultFillRule,"clip-rule":S.defaultClipRule,d:S.path,fill:"#AAAAAA"})),(0,n.h)("span",{class:(0,r.default)("-cbwsdk-snackbar-instance-menu-item-info",S.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},S.info)))))};e.SnackbarInstance=h})(Jn);Object.defineProperty(pr,"__esModule",{value:!0});pr.WalletLinkRelayUI=void 0;const Xl=Lt,eu=Jn;class tu{constructor(){this.attached=!1,this.snackbar=new eu.Snackbar}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const t=document.documentElement,r=document.createElement("div");r.className="-cbwsdk-css-reset",t.appendChild(r),this.snackbar.attach(r),this.attached=!0,(0,Xl.injectCssReset)()}showConnecting(t){let r;return t.isUnlinkedErrorState?r={autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:t.onResetConnection}]}:r={message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:t.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:t.onResetConnection}]},this.snackbar.presentItem(r)}}pr.WalletLinkRelayUI=tu;var br={},vr={},ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.default=".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}";var Sa=J&&J.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vr,"__esModule",{value:!0});vr.RedirectDialog=void 0;const ru=Sa(na),be=ba,nu=Lt,iu=Jn,su=ae,au=Sa(ii);class ou{constructor(){this.root=null,this.darkMode=(0,su.isDarkMode)()}attach(){const t=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",t.appendChild(this.root),(0,nu.injectCssReset)()}present(t){this.render(t)}clear(){this.render(null)}render(t){this.root&&((0,be.render)(null,this.root),t&&(0,be.render)((0,be.h)(cu,Object.assign({},t,{onDismiss:()=>{this.clear()},darkMode:this.darkMode})),this.root))}}vr.RedirectDialog=ou;const cu=({title:e,buttonText:t,darkMode:r,onButtonClick:n,onDismiss:i})=>{const s=r?"dark":"light";return(0,be.h)(iu.SnackbarContainer,{darkMode:r},(0,be.h)("div",{class:"-cbwsdk-redirect-dialog"},(0,be.h)("style",null,au.default),(0,be.h)("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:i}),(0,be.h)("div",{class:(0,ru.default)("-cbwsdk-redirect-dialog-box",s)},(0,be.h)("p",null,e),(0,be.h)("button",{onClick:n},t))))};var me={};Object.defineProperty(me,"__esModule",{value:!0});me.CBW_MOBILE_DEEPLINK_URL=me.WALLETLINK_URL=me.CB_KEYS_URL=void 0;me.CB_KEYS_URL="https://keys.coinbase.com/connect";me.WALLETLINK_URL="https://www.walletlink.org";me.CBW_MOBILE_DEEPLINK_URL="https://go.cb-w.com/walletlink";Object.defineProperty(br,"__esModule",{value:!0});br.WLMobileRelayUI=void 0;const lu=vr,uu=ae,du=me;class hu{constructor(){this.attached=!1,this.redirectDialog=new lu.RedirectDialog}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}redirectToCoinbaseWallet(t){const r=new URL(du.CBW_MOBILE_DEEPLINK_URL);r.searchParams.append("redirect_url",(0,uu.getLocation)().href),t&&r.searchParams.append("wl_url",t);const n=document.createElement("a");n.target="cbw-opener",n.href=r.href,n.rel="noreferrer noopener",n.click()}openCoinbaseWalletDeeplink(t){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:()=>{this.redirectToCoinbaseWallet(t)}}),setTimeout(()=>{this.redirectToCoinbaseWallet(t)},99)}showConnecting(t){return()=>{this.redirectDialog.clear()}}}br.WLMobileRelayUI=hu;Object.defineProperty(or,"__esModule",{value:!0});or.WalletLinkRelay=void 0;const fu=cr,_u=ye,pu=kt,Ln=dr,rt=ut,gu=ae,bu=pr,Zi=br,vu=we,V=M,yu=Ee;class Le{constructor(t){this.accountsCallback=null,this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.chainCallback=null,this.dappDefaultChain=1,this.isMobileWeb=(0,gu.isMobileWeb)(),this.appName="",this.appLogoUrl=null,this.linkedUpdated=s=>{this.isLinked=s;const a=this.storage.getItem(_u.LOCAL_STORAGE_ADDRESSES_KEY);if(s&&(this._session.linked=s),this.isUnlinkedErrorState=!1,a){const o=a.split(" "),c=this.storage.getItem("IsStandaloneSigning")==="true";o[0]!==""&&!s&&this._session.linked&&!c&&(this.isUnlinkedErrorState=!0)}},this.metadataUpdated=(s,a)=>{this.storage.setItem(s,a)},this.chainUpdated=(s,a)=>{this.chainCallbackParams.chainId===s&&this.chainCallbackParams.jsonRpcUrl===a||(this.chainCallbackParams={chainId:s,jsonRpcUrl:a},this.chainCallback&&this.chainCallback(s,a))},this.accountUpdated=s=>{this.accountsCallback&&this.accountsCallback([s]),Le.accountRequestCallbackIds.size>0&&(Array.from(Le.accountRequestCallbackIds.values()).forEach(a=>{const o={type:"WEB3_RESPONSE",id:a,response:{method:"requestEthereumAccounts",result:[s]}};this.invokeCallback(Object.assign(Object.assign({},o),{id:a}))}),Le.accountRequestCallbackIds.clear())},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=t.linkAPIUrl,this.storage=t.storage;const{session:r,ui:n,connection:i}=this.subscribe();this._session=r,this.connection=i,this.relayEventManager=new pu.RelayEventManager,this.ui=n}subscribe(){const t=Ln.WalletLinkSession.load(this.storage)||new Ln.WalletLinkSession(this.storage).save(),{linkAPIUrl:r}=this,n=new fu.WalletLinkConnection({session:t,linkAPIUrl:r,listener:this}),i=this.isMobileWeb?new Zi.WLMobileRelayUI:new bu.WalletLinkRelayUI;return n.connect(),{session:t,ui:i,connection:n}}attachUI(){this.ui.attach()}resetAndReload(){Promise.race([this.connection.setSessionMetadata("__destroyed","1"),new Promise(t=>setTimeout(()=>t(null),1e3))]).then(()=>{this.connection.destroy();const t=Ln.WalletLinkSession.load(this.storage);(t==null?void 0:t.id)===this._session.id&&yu.ScopedLocalStorage.clearAll(),document.location.reload()}).catch(t=>{})}setAppInfo(t,r){this.appName=t,this.appLogoUrl=r}getStorageItem(t){return this.storage.getItem(t)}setStorageItem(t,r){this.storage.setItem(t,r)}signEthereumMessage(t,r,n,i){return this.sendRequest({method:"signEthereumMessage",params:{message:(0,V.hexStringFromBuffer)(t,!0),address:r,addPrefix:n,typedDataJson:i||null}})}ethereumAddressFromSignedMessage(t,r,n){return this.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:(0,V.hexStringFromBuffer)(t,!0),signature:(0,V.hexStringFromBuffer)(r,!0),addPrefix:n}})}signEthereumTransaction(t){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:t.fromAddress,toAddress:t.toAddress,weiValue:(0,V.bigIntStringFromBigInt)(t.weiValue),data:(0,V.hexStringFromBuffer)(t.data,!0),nonce:t.nonce,gasPriceInWei:t.gasPriceInWei?(0,V.bigIntStringFromBigInt)(t.gasPriceInWei):null,maxFeePerGas:t.gasPriceInWei?(0,V.bigIntStringFromBigInt)(t.gasPriceInWei):null,maxPriorityFeePerGas:t.gasPriceInWei?(0,V.bigIntStringFromBigInt)(t.gasPriceInWei):null,gasLimit:t.gasLimit?(0,V.bigIntStringFromBigInt)(t.gasLimit):null,chainId:t.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(t){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:t.fromAddress,toAddress:t.toAddress,weiValue:(0,V.bigIntStringFromBigInt)(t.weiValue),data:(0,V.hexStringFromBuffer)(t.data,!0),nonce:t.nonce,gasPriceInWei:t.gasPriceInWei?(0,V.bigIntStringFromBigInt)(t.gasPriceInWei):null,maxFeePerGas:t.maxFeePerGas?(0,V.bigIntStringFromBigInt)(t.maxFeePerGas):null,maxPriorityFeePerGas:t.maxPriorityFeePerGas?(0,V.bigIntStringFromBigInt)(t.maxPriorityFeePerGas):null,gasLimit:t.gasLimit?(0,V.bigIntStringFromBigInt)(t.gasLimit):null,chainId:t.chainId,shouldSubmit:!0}})}submitEthereumTransaction(t,r){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:(0,V.hexStringFromBuffer)(t,!0),chainId:r}})}scanQRCode(t){return this.sendRequest({method:"scanQRCode",params:{regExp:t}})}getWalletLinkSession(){return this._session}genericRequest(t,r){return this.sendRequest({method:"generic",params:{action:r,data:t}})}sendGenericMessage(t){return this.sendRequest(t)}sendRequest(t){let r=null;const n=(0,V.randomBytesHex)(8),i=s=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,t.method,s),r==null||r()};return new Promise((s,a)=>{r=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:i,onResetConnection:this.resetAndReload}),this.relayEventManager.callbacks.set(n,o=>{if(r==null||r(),(0,rt.isErrorResponse)(o))return a(new Error(o.errorMessage));s(o)}),this.publishWeb3RequestEvent(n,t)})}setAccountsCallback(t){this.accountsCallback=t}setChainCallback(t){this.chainCallback=t}setDappDefaultChainCallback(t){this.dappDefaultChain=t}publishWeb3RequestEvent(t,r){const n={type:"WEB3_REQUEST",id:t,request:r};this.publishEvent("Web3Request",n,!0).then(i=>{}).catch(i=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:n.id,response:{method:r.method,errorMessage:i.message}})}),this.isMobileWeb&&this.openCoinbaseWalletDeeplink(r.method)}openCoinbaseWalletDeeplink(t){if(this.ui instanceof Zi.WLMobileRelayUI)switch(t){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0}),this.ui.openCoinbaseWalletDeeplink();break}}publishWeb3RequestCanceledEvent(t){const r={type:"WEB3_REQUEST_CANCELED",id:t};this.publishEvent("Web3RequestCanceled",r,!1).then()}publishEvent(t,r,n){return this.connection.publishEvent(t,r,n)}handleWeb3ResponseMessage(t){const{response:r}=t;if(r.method==="requestEthereumAccounts"){Le.accountRequestCallbackIds.forEach(n=>this.invokeCallback(Object.assign(Object.assign({},t),{id:n}))),Le.accountRequestCallbackIds.clear();return}this.invokeCallback(t)}handleErrorResponse(t,r,n){var i;const s=(i=n==null?void 0:n.message)!==null&&i!==void 0?i:"Unspecified error message.";this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:t,response:{method:r,errorMessage:s}})}invokeCallback(t){const r=this.relayEventManager.callbacks.get(t.id);r&&(r(t.response),this.relayEventManager.callbacks.delete(t.id))}requestEthereumAccounts(){const t={method:"requestEthereumAccounts",params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},r=(0,V.randomBytesHex)(8);return new Promise((n,i)=>{this.relayEventManager.callbacks.set(r,s=>{if((0,rt.isErrorResponse)(s))return i(new Error(s.errorMessage));n(s)}),Le.accountRequestCallbackIds.add(r),this.publishWeb3RequestEvent(r,t)})}watchAsset(t,r,n,i,s,a){const o={method:"watchAsset",params:{type:t,options:{address:r,symbol:n,decimals:i,image:s},chainId:a}};let c=null;const d=(0,V.randomBytesHex)(8),p=h=>{this.publishWeb3RequestCanceledEvent(d),this.handleErrorResponse(d,o.method,h),c==null||c()};return c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:p,onResetConnection:this.resetAndReload}),new Promise((h,_)=>{this.relayEventManager.callbacks.set(d,g=>{if(c==null||c(),(0,rt.isErrorResponse)(g))return _(new Error(g.errorMessage));h(g)}),this.publishWeb3RequestEvent(d,o)})}addEthereumChain(t,r,n,i,s,a){const o={method:"addEthereumChain",params:{chainId:t,rpcUrls:r,blockExplorerUrls:i,chainName:s,iconUrls:n,nativeCurrency:a}};let c=null;const d=(0,V.randomBytesHex)(8),p=h=>{this.publishWeb3RequestCanceledEvent(d),this.handleErrorResponse(d,o.method,h),c==null||c()};return c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:p,onResetConnection:this.resetAndReload}),new Promise((h,_)=>{this.relayEventManager.callbacks.set(d,g=>{if(c==null||c(),(0,rt.isErrorResponse)(g))return _(new Error(g.errorMessage));h(g)}),this.publishWeb3RequestEvent(d,o)})}switchEthereumChain(t,r){const n={method:"switchEthereumChain",params:Object.assign({chainId:t},{address:r})},i=(0,V.randomBytesHex)(8);return new Promise((s,a)=>{this.relayEventManager.callbacks.set(i,o=>{if((0,rt.isErrorResponse)(o)&&o.errorCode)return a(vu.standardErrors.provider.custom({code:o.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if((0,rt.isErrorResponse)(o))return a(new Error(o.errorMessage));s(o)}),this.publishWeb3RequestEvent(i,n)})}}or.WalletLinkRelay=Le;Le.accountRequestCallbackIds=new Set;var mu=J&&J.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nr,"__esModule",{value:!0});nr.WalletLinkSigner=void 0;const Tn=mu(vc),Yi=ye,wu=kt,Ae=ut,Eu=or,Ji=me,Y=we,D=M,Su=Ee,Pn="DefaultChainId",Qi="DefaultJsonRpcUrl";class Cu{constructor(t){var r,n;this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1;const{appName:i,appLogoUrl:s}=t.metadata;this._appName=i,this._appLogoUrl=s,this._storage=new Su.ScopedLocalStorage("walletlink",Ji.WALLETLINK_URL),this.updateListener=t.updateListener,this._relayEventManager=new wu.RelayEventManager,this._jsonRpcUrlFromOpts="";const a=this._storage.getItem(Yi.LOCAL_STORAGE_ADDRESSES_KEY);if(a){const c=a.split(" ");c[0]!==""&&(this._addresses=c.map(d=>(0,D.ensureAddressString)(d)),(r=this.updateListener)===null||r===void 0||r.onAccountsUpdate({accounts:this._addresses,source:"storage"}))}this._storage.getItem(Pn)&&((n=this.updateListener)===null||n===void 0||n.onChainUpdate({chain:{id:this.getChainId(),rpcUrl:this.jsonRpcUrl},source:"storage"}),this.hasMadeFirstChainChangedEmission=!0),this.initializeRelay()}getSession(){const t=this.initializeRelay(),{id:r,secret:n}=t.getWalletLinkSession();return{id:r,secret:n}}async handshake(){return await this.request({method:"eth_requestAccounts"})}get selectedAddress(){return this._addresses[0]||void 0}get jsonRpcUrl(){var t;return(t=this._storage.getItem(Qi))!==null&&t!==void 0?t:this._jsonRpcUrlFromOpts}set jsonRpcUrl(t){this._storage.setItem(Qi,t)}updateProviderInfo(t,r){var n;this.jsonRpcUrl=t;const i=this.getChainId();this._storage.setItem(Pn,r.toString(10)),((0,D.ensureIntNumber)(r)!==i||!this.hasMadeFirstChainChangedEmission)&&((n=this.updateListener)===null||n===void 0||n.onChainUpdate({chain:{id:r,rpcUrl:t},source:"wallet"}),this.hasMadeFirstChainChangedEmission=!0)}async watchAsset(t,r,n,i,s,a){const c=await this.initializeRelay().watchAsset(t,r,n,i,s,a==null?void 0:a.toString());return(0,Ae.isErrorResponse)(c)?!1:!!c.result}async addEthereumChain(t,r,n,i,s,a){var o,c;if((0,D.ensureIntNumber)(t)===this.getChainId())return!1;const d=this.initializeRelay();this._isAuthorized()||await d.requestEthereumAccounts();const p=await d.addEthereumChain(t.toString(),r,s,n,i,a);return(0,Ae.isErrorResponse)(p)?!1:(((o=p.result)===null||o===void 0?void 0:o.isApproved)===!0&&this.updateProviderInfo(r[0],t),((c=p.result)===null||c===void 0?void 0:c.isApproved)===!0)}async switchEthereumChain(t){const n=await this.initializeRelay().switchEthereumChain(t.toString(10),this.selectedAddress||void 0);if((0,Ae.isErrorResponse)(n)){if(!n.errorCode)return;throw n.errorCode===Y.standardErrorCodes.provider.unsupportedChain?Y.standardErrors.provider.unsupportedChain():Y.standardErrors.provider.custom({message:n.errorMessage,code:n.errorCode})}const i=n.result;i.isApproved&&i.rpcUrl.length>0&&this.updateProviderInfo(i.rpcUrl,t)}async disconnect(){this._relay&&this._relay.resetAndReload(),this._storage.clear()}async request(t){try{return this._request(t).catch(r=>{throw r})}catch(r){return Promise.reject(r)}}async _request(t){if(!t||typeof t!="object"||Array.isArray(t))throw Y.standardErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:t});const{method:r,params:n}=t;if(typeof r!="string"||r.length===0)throw Y.standardErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:t});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw Y.standardErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:t});const i=n===void 0?[]:n,s=this._relayEventManager.makeRequestId();return(await this._sendRequestAsync({method:r,params:i,jsonrpc:"2.0",id:s})).result}_setAddresses(t,r){var n;if(!Array.isArray(t))throw new Error("addresses is not an array");const i=t.map(s=>(0,D.ensureAddressString)(s));JSON.stringify(i)!==JSON.stringify(this._addresses)&&(this._addresses=i,(n=this.updateListener)===null||n===void 0||n.onAccountsUpdate({accounts:i,source:"wallet"}),this._storage.setItem(Yi.LOCAL_STORAGE_ADDRESSES_KEY,i.join(" ")))}_sendRequestAsync(t){return new Promise((r,n)=>{try{const i=this._handleSynchronousMethods(t);if(i!==void 0)return r({jsonrpc:"2.0",id:t.id,result:i})}catch(i){return n(i)}this._handleAsynchronousMethods(t).then(i=>i&&r(Object.assign(Object.assign({},i),{id:t.id}))).catch(i=>n(i))})}_handleSynchronousMethods(t){const{method:r}=t;switch(r){case"eth_accounts":return this._eth_accounts();case"eth_coinbase":return this._eth_coinbase();case"net_version":return this._net_version();case"eth_chainId":return this._eth_chainId();default:return}}async _handleAsynchronousMethods(t){const{method:r}=t,n=t.params||[];switch(r){case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_sign":return this._eth_sign(n);case"eth_ecRecover":return this._eth_ecRecover(n);case"personal_sign":return this._personal_sign(n);case"personal_ecRecover":return this._personal_ecRecover(n);case"eth_signTransaction":return this._eth_signTransaction(n);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(n);case"eth_sendTransaction":return this._eth_sendTransaction(n);case"eth_signTypedData_v1":return this._eth_signTypedData_v1(n);case"eth_signTypedData_v2":return this._throwUnsupportedMethodError();case"eth_signTypedData_v3":return this._eth_signTypedData_v3(n);case"eth_signTypedData_v4":case"eth_signTypedData":return this._eth_signTypedData_v4(n);case"wallet_addEthereumChain":return this._wallet_addEthereumChain(n);case"wallet_switchEthereumChain":return this._wallet_switchEthereumChain(n);case"wallet_watchAsset":return this._wallet_watchAsset(n);default:return this._throwUnsupportedMethodError()}}_isKnownAddress(t){try{const r=(0,D.ensureAddressString)(t);return this._addresses.map(i=>(0,D.ensureAddressString)(i)).includes(r)}catch{}return!1}_ensureKnownAddress(t){if(!this._isKnownAddress(t))throw new Error("Unknown Ethereum address")}_prepareTransactionParams(t){const r=t.from?(0,D.ensureAddressString)(t.from):this.selectedAddress;if(!r)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(r);const n=t.to?(0,D.ensureAddressString)(t.to):null,i=t.value!=null?(0,D.ensureBigInt)(t.value):BigInt(0),s=t.data?(0,D.ensureBuffer)(t.data):j.alloc(0),a=t.nonce!=null?(0,D.ensureIntNumber)(t.nonce):null,o=t.gasPrice!=null?(0,D.ensureBigInt)(t.gasPrice):null,c=t.maxFeePerGas!=null?(0,D.ensureBigInt)(t.maxFeePerGas):null,d=t.maxPriorityFeePerGas!=null?(0,D.ensureBigInt)(t.maxPriorityFeePerGas):null,p=t.gas!=null?(0,D.ensureBigInt)(t.gas):null,h=t.chainId?(0,D.ensureIntNumber)(t.chainId):this.getChainId();return{fromAddress:r,toAddress:n,weiValue:i,data:s,nonce:a,gasPriceInWei:o,maxFeePerGas:c,maxPriorityFeePerGas:d,gasLimit:p,chainId:h}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw Y.standardErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw Y.standardErrors.provider.unsupportedMethod({})}async _signEthereumMessage(t,r,n,i){this._ensureKnownAddress(r);try{const a=await this.initializeRelay().signEthereumMessage(t,r,n,i);if((0,Ae.isErrorResponse)(a))throw new Error(a.errorMessage);return{jsonrpc:"2.0",id:0,result:a.result}}catch(s){throw typeof s.message=="string"&&s.message.match(/(denied|rejected)/i)?Y.standardErrors.provider.userRejectedRequest("User denied message signature"):s}}async _ethereumAddressFromSignedMessage(t,r,n){const s=await this.initializeRelay().ethereumAddressFromSignedMessage(t,r,n);if((0,Ae.isErrorResponse)(s))throw new Error(s.errorMessage);return{jsonrpc:"2.0",id:0,result:s.result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,D.hexStringFromIntNumber)(this.getChainId())}getChainId(){const t=this._storage.getItem(Pn);if(!t)return(0,D.ensureIntNumber)(1);const r=parseInt(t,10);return(0,D.ensureIntNumber)(r)}async _eth_requestAccounts(){if(this._isAuthorized())return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});let t;try{if(t=await this.initializeRelay().requestEthereumAccounts(),(0,Ae.isErrorResponse)(t))throw new Error(t.errorMessage)}catch(r){throw typeof r.message=="string"&&r.message.match(/(denied|rejected)/i)?Y.standardErrors.provider.userRejectedRequest("User denied account authorization"):r}if(!t.result)throw new Error("accounts received is empty");return this._setAddresses(t.result),{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(t){this._requireAuthorization();const r=(0,D.ensureAddressString)(t[0]),n=(0,D.ensureBuffer)(t[1]);return this._signEthereumMessage(n,r,!1)}_eth_ecRecover(t){const r=(0,D.ensureBuffer)(t[0]),n=(0,D.ensureBuffer)(t[1]);return this._ethereumAddressFromSignedMessage(r,n,!1)}_personal_sign(t){this._requireAuthorization();const r=(0,D.ensureBuffer)(t[0]),n=(0,D.ensureAddressString)(t[1]);return this._signEthereumMessage(r,n,!0)}_personal_ecRecover(t){const r=(0,D.ensureBuffer)(t[0]),n=(0,D.ensureBuffer)(t[1]);return this._ethereumAddressFromSignedMessage(r,n,!0)}async _eth_signTransaction(t){this._requireAuthorization();const r=this._prepareTransactionParams(t[0]||{});try{const i=await this.initializeRelay().signEthereumTransaction(r);if((0,Ae.isErrorResponse)(i))throw new Error(i.errorMessage);return{jsonrpc:"2.0",id:0,result:i.result}}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?Y.standardErrors.provider.userRejectedRequest("User denied transaction signature"):n}}async _eth_sendRawTransaction(t){const r=(0,D.ensureBuffer)(t[0]),i=await this.initializeRelay().submitEthereumTransaction(r,this.getChainId());if((0,Ae.isErrorResponse)(i))throw new Error(i.errorMessage);return{jsonrpc:"2.0",id:0,result:i.result}}async _eth_sendTransaction(t){this._requireAuthorization();const r=this._prepareTransactionParams(t[0]||{});try{const i=await this.initializeRelay().signAndSubmitEthereumTransaction(r);if((0,Ae.isErrorResponse)(i))throw new Error(i.errorMessage);return{jsonrpc:"2.0",id:0,result:i.result}}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?Y.standardErrors.provider.userRejectedRequest("User denied transaction signature"):n}}async _eth_signTypedData_v1(t){this._requireAuthorization();const r=(0,D.ensureParsedJSONObject)(t[0]),n=(0,D.ensureAddressString)(t[1]);this._ensureKnownAddress(n);const i=Tn.default.hashForSignTypedDataLegacy({data:r}),s=JSON.stringify(r,null,2);return this._signEthereumMessage(i,n,!1,s)}async _eth_signTypedData_v3(t){this._requireAuthorization();const r=(0,D.ensureAddressString)(t[0]),n=(0,D.ensureParsedJSONObject)(t[1]);this._ensureKnownAddress(r);const i=Tn.default.hashForSignTypedData_v3({data:n}),s=JSON.stringify(n,null,2);return this._signEthereumMessage(i,r,!1,s)}async _eth_signTypedData_v4(t){this._requireAuthorization();const r=(0,D.ensureAddressString)(t[0]),n=(0,D.ensureParsedJSONObject)(t[1]);this._ensureKnownAddress(r);const i=Tn.default.hashForSignTypedData_v4({data:n}),s=JSON.stringify(n,null,2);return this._signEthereumMessage(i,r,!1,s)}async _wallet_addEthereumChain(t){var r,n,i,s;const a=t[0];if(((r=a.rpcUrls)===null||r===void 0?void 0:r.length)===0)return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!a.chainName||a.chainName.trim()==="")throw Y.standardErrors.rpc.invalidParams("chainName is a required field");if(!a.nativeCurrency)throw Y.standardErrors.rpc.invalidParams("nativeCurrency is a required field");const o=parseInt(a.chainId,16);return await this.addEthereumChain(o,(n=a.rpcUrls)!==null&&n!==void 0?n:[],(i=a.blockExplorerUrls)!==null&&i!==void 0?i:[],a.chainName,(s=a.iconUrls)!==null&&s!==void 0?s:[],a.nativeCurrency)?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}}async _wallet_switchEthereumChain(t){const r=t[0];return await this.switchEthereumChain(parseInt(r.chainId,16)),{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(t){const r=Array.isArray(t)?t[0]:t;if(!r.type)throw Y.standardErrors.rpc.invalidParams("Type is required");if((r==null?void 0:r.type)!=="ERC20")throw Y.standardErrors.rpc.invalidParams(`Asset of type '${r.type}' is not supported`);if(!(r!=null&&r.options))throw Y.standardErrors.rpc.invalidParams("Options are required");if(!(r!=null&&r.options.address))throw Y.standardErrors.rpc.invalidParams("Address is required");const n=this.getChainId(),{address:i,symbol:s,image:a,decimals:o}=r.options;return{jsonrpc:"2.0",id:0,result:await this.watchAsset(r.type,i,s,o,a,n)}}initializeRelay(){if(!this._relay){const t=new Eu.WalletLinkRelay({linkAPIUrl:Ji.WALLETLINK_URL,storage:this._storage});t.setAppInfo(this._appName,this._appLogoUrl),t.attachUI(),t.setAccountsCallback((r,n)=>this._setAddresses(r,n)),t.setChainCallback((r,n)=>{this.updateProviderInfo(n,parseInt(r,10))}),this._relay=t}return this._relay}}nr.WalletLinkSigner=Cu;var ue={};Object.defineProperty(ue,"__esModule",{value:!0});ue.checkErrorForInvalidRequestArgs=ue.getCoinbaseInjectedProvider=ue.getCoinbaseInjectedSigner=ue.fetchRPCRequest=void 0;const xu=Ke,zt=we;async function ku(e,t){if(!t.rpcUrl)throw zt.standardErrors.rpc.internal("No RPC URL set for chain");const r=Object.assign(Object.assign({},e),{jsonrpc:"2.0",id:crypto.randomUUID()});return(await(await window.fetch(t.rpcUrl,{method:"POST",body:JSON.stringify(r),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":xu.LIB_VERSION}})).json()).result}ue.fetchRPCRequest=ku;function Ca(){return globalThis.coinbaseWalletSigner}ue.getCoinbaseInjectedSigner=Ca;function Ru({metadata:e,preference:t}){var r,n,i;const s=globalThis;if(t.options!=="smartWalletOnly"){if(Ca())return;const c=s.coinbaseWalletExtension;if(c){const{appName:d,appLogoUrl:p,appChainIds:h}=e;return(r=c.setAppInfo)===null||r===void 0||r.call(c,d,p,h),c}}const a=(n=s.ethereum)!==null&&n!==void 0?n:(i=s.top)===null||i===void 0?void 0:i.ethereum;if(a!=null&&a.isCoinbaseBrowser)return a}ue.getCoinbaseInjectedProvider=Ru;function Iu(e){if(!e||typeof e!="object"||Array.isArray(e))return zt.standardErrors.rpc.invalidParams({message:"Expected a single, non-array, object argument.",data:e});const{method:t,params:r}=e;if(typeof t!="string"||t.length===0)return zt.standardErrors.rpc.invalidParams({message:"'args.method' must be a non-empty string.",data:e});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))return zt.standardErrors.rpc.invalidParams({message:"'args.params' must be an object or array if provided.",data:e})}ue.checkErrorForInvalidRequestArgs=Iu;Object.defineProperty(ve,"__esModule",{value:!0});ve.createSigner=ve.fetchSignerType=ve.storeSignerType=ve.loadSignerType=void 0;const Mu=er,xa=nr,Au=we,Lu=ue,Tu=Ee,ka="SignerType",Ra=new Tu.ScopedLocalStorage("CBWSDK","SignerConfigurator");function Pu(){return Ra.getItem(ka)}ve.loadSignerType=Pu;function Nu(e){Ra.setItem(ka,e)}ve.storeSignerType=Nu;async function Ou(e){const{communicator:t,metadata:r}=e;ju(t,r).catch(()=>{});const n={id:crypto.randomUUID(),event:"selectSignerType",data:e.preference},{data:i}=await t.postRequestAndWaitForResponse(n);return i}ve.fetchSignerType=Ou;function Du(e){const{signerType:t,metadata:r,communicator:n,updateListener:i}=e;switch(t){case"scw":return new Mu.SCWSigner({metadata:r,updateListener:i,communicator:n});case"walletlink":return new xa.WalletLinkSigner({metadata:r,updateListener:i});case"extension":{const s=(0,Lu.getCoinbaseInjectedSigner)();if(!s)throw Au.standardErrors.rpc.internal("injected signer not found");return s}}}ve.createSigner=Du;async function ju(e,t){await e.onMessage(({event:n})=>n==="WalletLinkSessionRequest");const r=new xa.WalletLinkSigner({metadata:t});e.postMessage({event:"WalletLinkUpdate",data:{session:r.getSession()}}),await r.handshake(),e.postMessage({event:"WalletLinkUpdate",data:{connected:!0}})}var yr={},lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.closePopup=lt.openPopup=void 0;const Bu=we,Xi=420,es=540;function Wu(e){const t=(window.innerWidth-Xi)/2+window.screenX,r=(window.innerHeight-es)/2+window.screenY,n=window.open(e,"Smart Wallet",`width=${Xi}, height=${es}, left=${t}, top=${r}`);if(n==null||n.focus(),!n)throw Bu.standardErrors.rpc.internal("Pop up window failed to open");return n}lt.openPopup=Wu;function Uu(e){e&&!e.closed&&e.close()}lt.closePopup=Uu;Object.defineProperty(yr,"__esModule",{value:!0});yr.Communicator=void 0;const Hu=Ke,ts=lt,$u=me,rs=we;class Fu{constructor(t=$u.CB_KEYS_URL){this.popup=null,this.listeners=new Map,this.postMessage=async r=>{(await this.waitForPopupLoaded()).postMessage(r,this.url.origin)},this.postRequestAndWaitForResponse=async r=>{const n=this.onMessage(({requestId:i})=>i===r.id);return this.postMessage(r),await n},this.onMessage=async r=>new Promise((n,i)=>{const s=a=>{if(a.origin!==this.url.origin)return;const o=a.data;r(o)&&(n(o),window.removeEventListener("message",s),this.listeners.delete(s))};window.addEventListener("message",s),this.listeners.set(s,{reject:i})}),this.disconnect=()=>{(0,ts.closePopup)(this.popup),this.popup=null,this.listeners.forEach(({reject:r},n)=>{r(rs.standardErrors.provider.userRejectedRequest("Request rejected")),window.removeEventListener("message",n)}),this.listeners.clear()},this.waitForPopupLoaded=async()=>this.popup&&!this.popup.closed?this.popup:(this.popup=(0,ts.openPopup)(this.url),this.onMessage(({event:r})=>r==="PopupUnload").then(this.disconnect).catch(()=>{}),this.onMessage(({event:r})=>r==="PopupLoaded").then(r=>{this.postMessage({requestId:r.id,data:{version:Hu.LIB_VERSION}})}).then(()=>{if(!this.popup)throw rs.standardErrors.rpc.internal();return this.popup})),this.url=new URL(t)}}yr.Communicator=Fu;var mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.determineMethodCategory=void 0;const ns={handshake:["eth_requestAccounts"],sign:["eth_ecRecover","personal_sign","personal_ecRecover","eth_signTransaction","eth_sendTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4","eth_signTypedData","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_watchAsset","wallet_getCapabilities","wallet_sendCalls","wallet_showCallsStatus"],state:["eth_chainId","eth_accounts","eth_coinbase","net_version"],deprecated:["eth_sign","eth_signTypedData_v2"],unsupported:["eth_subscribe","eth_unsubscribe"],fetch:[]};function qu(e){for(const t in ns){const r=t;if(ns[r].includes(e))return r}}mr.determineMethodCategory=qu;var zu=J&&J.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Ku=J&&J.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.CoinbaseWalletProvider=void 0;const Vu=Ku(La),nt=we,Gu=Qt,Ht=ee,pt=M,$t=ve,is=ue,Zu=yr,Yu=mr,Ju=Ee;class Qu extends Vu.default{constructor(t){var r,n,{metadata:i}=t,s=t.preference,{keysUrl:a}=s,o=zu(s,["keysUrl"]);super(),this.accounts=[],this.handlers={handshake:async d=>{try{if(this.connected)return this.emit("connect",{chainId:(0,pt.hexStringFromIntNumber)((0,Ht.IntNumber)(this.chain.id))}),this.accounts;const p=await this.requestSignerSelection(),h=this.initSigner(p),_=await h.handshake();return this.signer=h,(0,$t.storeSignerType)(p),this.emit("connect",{chainId:(0,pt.hexStringFromIntNumber)((0,Ht.IntNumber)(this.chain.id))}),_}catch(p){throw this.handleUnauthorizedError(p),p}},sign:async d=>{if(!this.connected||!this.signer)throw nt.standardErrors.provider.unauthorized("Must call 'eth_requestAccounts' before other methods");try{return await this.signer.request(d)}catch(p){throw this.handleUnauthorizedError(p),p}},fetch:d=>(0,is.fetchRPCRequest)(d,this.chain),state:d=>{const p=()=>{if(this.connected)return this.accounts;throw nt.standardErrors.provider.unauthorized("Must call 'eth_requestAccounts' before other methods")};switch(d.method){case"eth_chainId":return(0,pt.hexStringFromIntNumber)((0,Ht.IntNumber)(this.chain.id));case"net_version":return this.chain.id;case"eth_accounts":return p();case"eth_coinbase":return p()[0];default:return this.handlers.unsupported(d)}},deprecated:({method:d})=>{throw nt.standardErrors.rpc.methodNotSupported(`Method ${d} is deprecated.`)},unsupported:({method:d})=>{throw nt.standardErrors.rpc.methodNotSupported(`Method ${d} is not supported.`)}},this.isCoinbaseWallet=!0,this.updateListener={onAccountsUpdate:({accounts:d,source:p})=>{(0,pt.areAddressArraysEqual)(this.accounts,d)||(this.accounts=d,p!=="storage"&&this.emit("accountsChanged",this.accounts))},onChainUpdate:({chain:d,source:p})=>{d.id===this.chain.id&&d.rpcUrl===this.chain.rpcUrl||(this.chain=d,p!=="storage"&&this.emit("chainChanged",(0,pt.hexStringFromIntNumber)((0,Ht.IntNumber)(d.id))))}},this.metadata=i,this.preference=o,this.communicator=new Zu.Communicator(a),this.chain={id:(n=(r=i.appChainIds)===null||r===void 0?void 0:r[0])!==null&&n!==void 0?n:1};const c=(0,$t.loadSignerType)();this.signer=c?this.initSigner(c):null}get connected(){return this.accounts.length>0}async request(t){var r;try{const n=(0,is.checkErrorForInvalidRequestArgs)(t);if(n)throw n;const i=(r=(0,Yu.determineMethodCategory)(t.method))!==null&&r!==void 0?r:"fetch";return this.handlers[i](t)}catch(n){return Promise.reject((0,Gu.serializeError)(n,t.method))}}handleUnauthorizedError(t){t.code===nt.standardErrorCodes.provider.unauthorized&&this.disconnect()}async enable(){return console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'),await this.request({method:"eth_requestAccounts"})}async disconnect(){this.accounts=[],this.chain={id:1},Ju.ScopedLocalStorage.clearAll(),this.emit("disconnect",nt.standardErrors.provider.disconnected("User initiated disconnection"))}requestSignerSelection(){return(0,$t.fetchSignerType)({communicator:this.communicator,preference:this.preference,metadata:this.metadata})}initSigner(t){return(0,$t.createSigner)({signerType:t,metadata:this.metadata,communicator:this.communicator,updateListener:this.updateListener})}}Yt.CoinbaseWalletProvider=Qu;Object.defineProperty(yt,"__esModule",{value:!0});yt.CoinbaseWalletSDK=void 0;const Xu=Zt,ed=Yt,td=Ee,rd=Ke,nd=M,id=ue;class sd{constructor(t){this.metadata={appName:t.appName||"Dapp",appLogoUrl:t.appLogoUrl||(0,nd.getFavicon)(),appChainIds:t.appChainIds||[]},this.storeLatestVersion()}makeWeb3Provider(t={options:"all"}){var r;const n={metadata:this.metadata,preference:t};return(r=(0,id.getCoinbaseInjectedProvider)(n))!==null&&r!==void 0?r:new ed.CoinbaseWalletProvider(n)}getCoinbaseWalletLogo(t,r=240){return(0,Xu.walletLogo)(t,r)}storeLatestVersion(){new td.ScopedLocalStorage("CBWSDK").setItem("VERSION",rd.LIB_VERSION)}}yt.CoinbaseWalletSDK=sd;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CoinbaseWalletSDK=void 0;const t=yt;e.default=t.CoinbaseWalletSDK;var r=yt;Object.defineProperty(e,"CoinbaseWalletSDK",{enumerable:!0,get:function(){return r.CoinbaseWalletSDK}})})(zn);const ad=Ia(zn),cd=Ma({__proto__:null,default:ad},[zn]);export{cd as i};
